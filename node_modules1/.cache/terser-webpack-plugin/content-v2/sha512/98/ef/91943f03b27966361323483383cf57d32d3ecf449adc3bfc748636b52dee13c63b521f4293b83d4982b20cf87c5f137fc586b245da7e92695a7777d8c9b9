{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-158aa0f2\"],{3191:function(e,t,n){\"use strict\";var o={project:\"诸暨建设集团项目管理\",center:\"项目数据中心\"},a={project:\"1613264195\",center:\"1594315244\"},i={projectTypes:[{name:\"房建\",value:\"LM\"},{name:\"桥梁\",value:\"QL\"},{name:\"隧道\",value:\"SD\"},{name:\"其他\",value:\"other\"}],wholeName:\"全生命周期智慧建设管理平台\",name:o[\"project\"],iosAppId:a[\"project\"],versionInfo:{ios:{project:{version:{name:\"3.2\",code:3200},remark:[\"新增人员位置\"]},center:{version:{name:\"1.7\",code:1700},remark:[\"首页区分工程类型\"]}},android:{project:{version:{name:\"5.3\",code:5300},remark:[\"新增人员位置\"]},center:{version:{name:\"2.8\",code:2800},remark:[\"首页区分工程类型\"]}}}};t[\"a\"]=i},5530:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));n(\"b64b\"),n(\"a4d3\"),n(\"4de4\"),n(\"d3b7\"),n(\"e439\"),n(\"14d9\"),n(\"159b\"),n(\"dbb4\");var o=n(\"ade3\");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(o[\"a\"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},\"58f9\":function(e,t,n){},\"63f3\":function(e,t,n){\"use strict\";n(\"58f9\")},\"679f\":function(e,t,n){\"use strict\";n(\"b0c0\");var o=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"component-select\"},[t(\"van-cell-group\",{staticClass:\"common-card\",staticStyle:{\"margin-bottom\":\"0\"},attrs:{inset:\"\"}},[t(\"van-field\",{attrs:{label:\"类型\",\"label-width\":\"40px\"},scopedSlots:e._u([{key:\"input\",fn:function(){return[t(\"van-radio-group\",{attrs:{direction:\"horizontal\"},model:{value:e.projectType,callback:function(t){e.projectType=t},expression:\"projectType\"}},e._l(e.projectTypes,(function(n,o){return t(\"van-radio\",{key:o,attrs:{name:n.value}},[e._v(e._s(n.name))])})),1)]},proxy:!0}])}),t(\"van-field\",{staticClass:\"condition\",attrs:{label:\"工区名称\",readonly:\"\",\"right-icon\":\"arrow\"},on:{click:function(t){e.showGongQu=!0}},model:{value:e.gongquItem.name,callback:function(t){e.$set(e.gongquItem,\"name\",t)},expression:\"gongquItem.name\"}}),t(\"van-field\",{staticClass:\"condition\",attrs:{label:\"项目名称\",readonly:\"\",\"right-icon\":\"arrow\"},on:{click:function(t){e.show=!0}},model:{value:e.typeItem.name,callback:function(t){e.$set(e.typeItem,\"name\",t)},expression:\"typeItem.name\"}}),t(\"van-field\",{attrs:{label:\"构件选择\",\"is-link\":\"\",readonly:\"\",placeholder:\"请选择构件\",rules:[{required:!0,message:\"请选择所在地区\"}]},on:{click:function(t){e.showLocationSelect=!0}},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:\"fieldValue\"}})],1),t(\"van-list\",{staticClass:\"common-list common-card\",style:{height:e.scrollerHeight},attrs:{finished:e.finished,\"finished-text\":\"我也是有底线的~~\"},on:{load:e.onLoad}},e._l(e.list,(function(n,o){return t(\"div\",{key:o,class:\"item \"+(o===e.list.length-1?\"last\":\"\"),on:{click:function(t){return e.itemClick(n,o)}}},[t(\"div\",{staticClass:\"content\"},[t(\"span\",{staticClass:\"name\"},[e._v(\"工序名称：\")]),t(\"span\",{staticClass:\"value\"},[e._v(e._s(n.name))])]),t(\"div\",{staticClass:\"content\"},[t(\"span\",{staticClass:\"name\"},[e._v(\"完成时间：\")]),t(\"span\",{staticClass:\"value\"},[e._v(e._s(n.finish||\"未录入\"))])]),2===n.status?t(\"div\",{staticClass:\"content\"},[t(\"span\",{staticClass:\"name\"},[e._v(\"工序状态：\")]),t(\"span\",{staticClass:\"value common-state-2\"},[e._v(e._s([\"未填报\",\"已通过\",\"被驳回\",\"待审核\"][n.status]))])]):e._e(),t(\"div\",{staticClass:\"operate center-in-vertical\"},[n.finish?t(\"van-button\",{staticClass:\"button\",attrs:{type:\"primary\",size:\"small\"},on:{click:function(t){return t.stopPropagation(),e.previewPic(n)}}},[e._v(\"照片\")]):e._e(),n.finish?t(\"van-button\",{staticClass:\"button\",attrs:{type:\"primary\",size:\"small\"},on:{click:function(t){return t.stopPropagation(),e.previewPdf(n)}}},[e._v(\"PDF\")]):e._e()],1)])})),0),t(\"van-action-sheet\",{attrs:{actions:e.gongquActions},on:{select:e.onGongQuSelect},model:{value:e.showGongQu,callback:function(t){e.showGongQu=t},expression:\"showGongQu\"}}),t(\"van-action-sheet\",{attrs:{actions:e.actions},on:{select:e.onSelect},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}}),t(\"van-popup\",{attrs:{round:\"\",position:\"bottom\"},model:{value:e.showLocationSelect,callback:function(t){e.showLocationSelect=t},expression:\"showLocationSelect\"}},[t(\"van-cascader\",{attrs:{title:\"请选择构件\",options:e.options,\"field-names\":e.fieldNames},on:{close:function(t){e.showLocationSelect=!1},change:e.onChange},model:{value:e.cascaderValue,callback:function(t){e.cascaderValue=t},expression:\"cascaderValue\"}})],1),t(\"PdfPreview\",{ref:\"pdfPreview\"})],1)},a=[],i=n(\"5530\"),s=n(\"ade3\"),c=(n(\"4662\"),n(\"28a2\")),l=(n(\"a15b\"),n(\"d81d\"),n(\"3191\")),r=n(\"a79c\"),u=n(\"ed08\"),d=n(\"2f62\"),p=n(\"24d2\"),h={components:Object(s[\"a\"])({PdfPreview:r[\"a\"]},c[\"a\"].Component.name,c[\"a\"].Component),props:{onComponentSelect:{type:Function}},data:function(){return{show:!1,showDetail:!1,typeItem:{},showLocationSelect:!1,fieldNames:{text:\"name\",value:\"id\",children:\"child\"},fieldValue:\"\",cascaderValue:\"\",options:[],code:\"\",actions:[],list:[],finished:!1,refreshing:!1,map:{},detailList:[],detailName:\"\",currentComponent:null,formatISO8601Time:u[\"b\"],checkData:null,pdfUrl:\"\",showPdf:!1,pdfHeight:0,gongquItem:{},showGongQu:!1,gongquActions:[],projectTypes:l[\"a\"].projectTypes,projectType:\"\"}},watch:{projectType:function(){this.init()}},computed:Object(i[\"a\"])(Object(i[\"a\"])({},Object(d[\"b\"])([\"currentProject\",\"curProject\"])),{},{scrollerHeight:function(){return window.innerHeight-81-130-92+\"px\"}}),created:function(){this.projectType=this.projectTypes[0].value},methods:{init:function(){var e=this;Object(p[\"cb\"])({type:this.projectType,projectId:this.curProject.child[0].id}).then((function(t){t&&t.child&&t.child.length>0?(e.gongquActions=t.child||[],e.gongquActions.length>0&&e.onGongQuSelect(e.gongquActions[0])):(e.gongquActions=[],e.actions=[],e.options=[],e.list=[],e.gongquItem={},e.typeItem={},e.fieldValue=\"\",e.cascaderValue=\"\",e.$toast.fail(\"该类型下无对应数据！\"))}))},onGongQuSelect:function(e){this.showGongQu=!1,this.gongquItem=e,this.actions=e.child,this.actions&&this.actions.length>0?(this.typeItem=this.actions[0],this.onSelect(this.typeItem)):(this.typeItem={},this.$toast.fail(\"该工区下无项目数据！\"))},onSelect:function(e){this.show=!1,this.typeItem=e,this.getprojectDetailInfo()},getprojectDetailInfo:function(){this.fieldValue=\"\",this.cascaderValue=\"\",this.options=this.typeItem.child},onChange:function(e){var t=e.selectedOptions;this.fieldValue=t.map((function(e){return e.name})).join(\"/\");var n=t[t.length-1];if(n.conponetcode&&(this.currentComponent=n,this.onLoad()),!n.child||0===n.child.length)return this.showLocationSelect=!1},onLoad:function(){var e=this;this.currentComponent&&Object(p[\"o\"])({id:this.currentComponent.id}).then((function(t){e.list=t.check,e.checkData=t.data,e.refreshing=!1,e.finished=!0}))},previewPic:function(e){this.$refs[\"pdfPreview\"].showPic(e.recordid)},previewPdf:function(e){this.$refs[\"pdfPreview\"].show(e.recordid)},itemClick:function(e,t){var n=null;0!==t&&(n=this.list[t-1]);var o=e.status;n&&1!==n.status?this.$notify({message:\"请填报上个工序或联系监理审核上个工序\",type:\"warning\"}):0===o?this.onComponentSelect(e,this.checkData):1===o?this.$notify({message:\"工序已审核完成，请填报下一道工序\",type:\"warning\"}):2===o?this.onComponentSelect(e,this.checkData,!0):3===o&&this.$notify({message:\"请联系监理审核\",type:\"warning\"})}}},f=h,m=(n(\"63f3\"),n(\"2877\")),v=Object(m[\"a\"])(f,o,a,!1,null,null,null);t[\"a\"]=v.exports},\"79e8\":function(e,t,n){\"use strict\";n(\"8465\")},8465:function(e,t,n){},df8d:function(e,t,n){\"use strict\";n.r(t);var o=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"chedule-filling\"},[t(\"component-select\",{on:{onComponentSelect:e.onComponentSelect}}),t(\"van-dialog\",{attrs:{title:e.title,\"show-cancel-button\":\"\",beforeClose:e.submit},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[t(\"van-form\",{model:{value:e.editData,callback:function(t){e.editData=t},expression:\"editData\"}},[t(\"van-field\",{attrs:{readonly:\"\",clickable:\"\",name:\"sTime\",label:\"开始时间\",placeholder:\"开始时间\",required:\"\"},on:{click:function(t){(e.showCalendar=!0)&&(e.dateType=\"sTime\")}},model:{value:e.editData.sTime,callback:function(t){e.$set(e.editData,\"sTime\",t)},expression:\"editData.sTime\"}}),t(\"van-field\",{attrs:{readonly:\"\",clickable:\"\",name:\"eTime\",label:\"结束时间\",placeholder:\"结束时间\",required:\"\"},on:{click:function(t){(e.showCalendar=!0)&&(e.dateType=\"eTime\")}},model:{value:e.editData.eTime,callback:function(t){e.$set(e.editData,\"eTime\",t)},expression:\"editData.eTime\"}})],1)],1),t(\"van-calendar\",{on:{confirm:e.onConfirm},model:{value:e.showCalendar,callback:function(t){e.showCalendar=t},expression:\"showCalendar\"}})],1)},a=[],i=n(\"679f\"),s={components:{ComponentSelect:i[\"a\"]},data:function(){return{show:!1,title:\"计划填报\",editData:{},showCalendar:!1,dateType:\"\"}},methods:{onComponentSelect:function(e){this.show=!0},submit:function(e,t){t()},onConfirm:function(e){e=this.moment(e).format(\"YYYY-MM-DD\"),this.editData[this.dateType]=e,this.showCalendar=!1}}},c=s,l=(n(\"79e8\"),n(\"2877\")),r=Object(l[\"a\"])(c,o,a,!1,null,null,null);t[\"default\"]=r.exports}}]);","extractedComments":[]}