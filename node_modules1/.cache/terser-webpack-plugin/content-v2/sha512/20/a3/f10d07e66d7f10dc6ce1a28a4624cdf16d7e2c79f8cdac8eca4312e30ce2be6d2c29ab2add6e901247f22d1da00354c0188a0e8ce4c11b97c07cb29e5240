{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0fdeb81e\"],{\"166b\":function(t,e,n){\"use strict\";n(\"d3ac\")},\"1a03\":function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));n(\"e7e5\");var a=n(\"d399\"),o=(n(\"e17f\"),n(\"2241\")),s=(n(\"d3b7\"),n(\"e9c4\"),n(\"4e82\"),n(\"b0c0\"),n(\"99af\"),n(\"f121\")),i=n(\"3191\"),c=n(\"f6d5\"),r=function(t){return new Promise((function(e){Object(c[\"a\"])({table:\"ss_f_app_update\",mapStr:JSON.stringify({os:t,type:\"project\"})}).then((function(n){if(n&&0!==n.length){var a=[];a=n.sort((function(t,e){return Date.parse(e[\"time\"])-Date.parse(t[\"time\"])}));var o=a[0],s=o.name,c=o.code,r=o.remark;e({version:{name:s,code:c},remark:JSON.parse(r)})}else e(i[\"a\"].versionInfo[t][\"project\"])}))}))},u=function(t){var e=i[\"a\"].versionInfo[t][\"project\"];return new Promise((function(n){r(t).then((function(t){t.version.code>e.version.code?n(t):n()}))}))},l=function(t){return new Promise((function(e){Object(o[\"a\"])({title:\"【\".concat(t.version.name,\"】版本更新\"),message:t.remark,confirmButtonText:\"更新\",confirmButtonColor:\"green\",closeOnClickOverlay:!0}).then((function(t){\"confirm\"===t&&e()})).catch((function(t){}))}))},f=function(){u(\"ios\").then((function(t){t&&l(t).then((function(){var t=encodeURI(\"https://apps.apple.com/cn/app/\".concat(i[\"a\"].name,\"/\").concat(i[\"a\"].iosAppId));plus.runtime.openURL(t,(function(t){alert(JSON.stringify(t))}))}))}))},d=function(){u(\"android\").then((function(t){if(t){var e=\"\".concat(\"project\").concat(t.version.name,\".apk\");l(t).then((function(){p(e)}))}}))},p=function(t){a[\"a\"].loading({message:\"安装包下载中，请等到1-2两分钟！\",forbidClick:!0});var e=\"_downloads/\"+t,n=plus.downloader.createDownload(s[\"data_zlsk\"]+\"/bim/\"+t,{filename:e},(function(t,n){a[\"a\"].clear(),200==n?plus.runtime.install(e,{},(function(){a[\"a\"].success(\"安装成功\")}),(function(){a[\"a\"].fail(\"安装失败\")})):a[\"a\"].fail(\"下载失败\")}));n.start()},A=function(){return new Promise((function(t){window.plus?t():document.addEventListener(\"plusready\",(function(){t()}))}))},h=function(){A().then((function(){var t=plus.os.name.toLowerCase();\"ios\"===t?f():d()}))},m=function(){A().then((function(){var t=plus.os.name.toLowerCase(),e=\"ios\"===t?\"ios\":\"android\";u(e).then((function(t){t?h():a[\"a\"].success(\"当版本为最新版本！\")}))}))},g=function(){var t=window.plus?window.plus.os.name.toLowerCase():\"android\";return i[\"a\"].versionInfo[\"ios\"===t?\"ios\":\"android\"][\"project\"]},v={checkUpdate:m,update:h,getCurrentVersionInfo:g}},\"1a042\":function(t,e){t.exports=\"data:image/png;base64,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\"},\"25c5\":function(t,e,n){},5613:function(t,e,n){t.exports=n.p+\"static/img/project.7897f2cb.png\"},\"707c\":function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t._self._c;return e(\"div\",{ref:\"container\",staticClass:\"app-container\"},[t.isRouterAlive?e(\"div\",{staticClass:\"layout-content\",style:{height:t.scrollerHeight}},[e(\"keep-alive\",[t.$route.meta.keepAlive?e(\"router-view\"):t._e()],1),t.$route.meta.keepAlive?t._e():e(\"router-view\")],1):t._e(),e(\"TabBar\",{ref:\"tabbar\",attrs:{data:t.authTables}})],1)},o=[],s=n(\"5530\"),i=n(\"3191\"),c=(n(\"b0c0\"),function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"app-head\"},[e(\"van-image\",{staticClass:\"img\",attrs:{round:\"\",src:t.headImg},on:{click:t.goToSystem}}),e(\"span\",{staticClass:\"user-name\",on:{click:t.goToSystem}},[t._v(t._s(t.userinfo.name))]),e(\"span\",{staticClass:\"center-both project-name\",on:{click:function(e){t.show=!0}}},[t._v(t._s(t.project.name))]),t.showMessageIcon&&t.messageTotal>0?e(\"div\",{staticClass:\"message\",on:{click:t.onMessageIconClick}},[e(\"img\",{staticClass:\"message-img center-both\",attrs:{src:t.img}}),t.messageTotal>0?e(\"van-badge\",{staticStyle:{float:\"right\",margin:\"6px 6px 0 0\"},attrs:{content:t.messageTotal,max:\"99\"}}):t._e()],1):e(\"Weather\"),e(\"van-action-sheet\",{attrs:{description:\"消息通知\"},on:{select:t.onMessageSelect},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:\"showMessage\"}},t._l(t.actions,(function(n,a){return e(\"van-button\",{key:a,staticClass:\"van-action-sheet__item\",on:{click:function(e){return t.onMessageSelect(n)}}},[e(\"van-badge\",{attrs:{content:0===n.message?\"\":n.message}},[e(\"span\",{staticClass:\"sheet-name\"},[t._v(t._s(n.name))])])],1)})),1),e(\"van-action-sheet\",{attrs:{actions:t.projectList},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}})],1)}),r=[],u=(n(\"14d9\"),n(\"d3b7\"),n(\"159b\"),n(\"2f62\")),l=function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"weather\",on:{click:t.gotoWeatherDetail}},[e(\"img\",{staticClass:\"img center-in-vertical\",attrs:{src:t.weatherImg}}),e(\"span\",[t._v(t._s(this.temperature)+\"°\")])])},f=[],d=n(\"cffd\"),p=n(\"ed08\"),A={data:function(){return{weatherImgMap:{\"晴\":\"00\",\"多云\":\"01\",\"阴\":\"02\",\"阵雨\":\"03\",\"雷阵雨\":\"04\",\"雷阵雨伴有冰雹\":\"05\",\"雨夹雪\":\"06\",\"小雨\":\"07\",\"中雨\":\"08\",\"大雨\":\"09\",\"暴雨\":\"10\",\"大暴雨\":\"11\",\"特大暴雨\":\"12\",\"阵雪\":\"13\",\"小雪\":\"14\",\"中雪\":\"15\",\"大雪\":\"16\",\"暴雪\":\"17\",\"雾\":\"18\",\"冻雨\":\"19\",\"沙尘暴\":\"20\",\"小到中雨\":\"21\",\"中到大雨\":\"22\",\"大到暴雨\":\"23\",\"暴雨到大暴雨\":\"24\",\"大暴雨到特大暴雨\":\"25\",\"小到中雪\":\"26\",\"中到大雪\":\"27\",\"大到暴雪\":\"28\",\"浮尘\":\"29\",\"扬沙\":\"30\",\"强沙尘暴\":\"31\",\"浓雾\":\"32\",\"龙卷风\":\"33\",\"弱高吹雪\":\"34\",\"轻雾\":\"35\",\"强浓雾\":\"49\",\"霾\":\"53\",\"中度霾\":\"54\",\"重度霾\":\"55\",\"严重霾\":\"56\",\"大雾\":\"57\",\"特强浓雾\":\"58\"},city:\"\",weather:\"\",weatherImg:\"\",temperature:\"\"}},created:function(){var t=this;Object(d[\"a\"])().then((function(e){0===e.status&&(t.city=e.result.location.name,t.weather=e.result.now.text,t.temperature=e.result.now.temp,t.weatherImg=Object(p[\"e\"])(t.weather))}))},methods:{gotoWeatherDetail:function(){this.$router.push({path:\"weatherDetail\"})}}},h=A,m=(n(\"7486\"),n(\"2877\")),g=Object(m[\"a\"])(h,l,f,!1,null,\"45a7fe0c\",null),v=g.exports,w=(n(\"24d2\"),{components:{Weather:v},name:\"\",data:function(){return{show:!1,headImg:n(\"5613\"),projectList:[{name:\"G235改建\"},{name:\"项目2\"},{name:\"项目3\"},{name:\"项目4\"},{name:\"项目5\"},{name:\"项目6\"},{name:\"项目7\"}],project:{name:\"G235改建\"},img:n(\"1a042\"),messageTotal:0,showMessage:!1,actions:[],showMessageIcon:!0}},computed:Object(s[\"a\"])({},Object(u[\"b\"])([\"userinfo\",\"currentProject\",\"qualityEventCount\",\"safeEventCount\",\"delayQualityEventCount\",\"delaySafeEventCount\",\"doRectificationQualityEventCount\",\"doRectificationSafeEventCount\",\"processFillingCount\"])),watch:{qualityEventCount:function(){this.updateTotal()},safeEventCount:function(){this.updateTotal()},delayQualityEventCount:function(){this.updateTotal()},delaySafeEventCount:function(){this.updateTotal()},doRectificationQualityEventCount:function(){this.updateTotal()},doRectificationSafeEventCount:function(){this.updateTotal()},processFillingCount:function(){this.updateTotal()}},created:function(){this.updateActions()},methods:{goToSystem:function(){this.$router.push({name:\"system\",params:this.currentProject})},onSelect:function(t){this.show=!1,this.project=t},onMessageIconClick:function(){this.messageTotal>0&&(this.showMessage=!0)},updateActions:function(){var t=this,e=[{name:\"安全整改\",message:this.safeEventCount,path:\"securityReportRecord\"},{name:\"质量整改\",message:this.qualityEventCount,path:\"modify\"},{name:\"安全延期申请\",message:this.delaySafeEventCount,path:\"securityReport\"},{name:\"质量延期申请\",message:this.delayQualityEventCount,path:\"check\"},{name:\"安全整改确认\",message:this.doRectificationSafeEventCount,path:\"securityDealRecord\"},{name:\"质量整改确认\",message:this.doRectificationQualityEventCount,path:\"verify\"},{name:\"工序审核\",message:this.processFillingCount,path:\"processAudit\"}];this.actions=[],e.forEach((function(e){e.message>0&&t.actions.push(e)}))},updateTotal:function(){this.messageTotal=this.qualityEventCount+this.safeEventCount+this.delayQualityEventCount+this.delaySafeEventCount+this.doRectificationQualityEventCount+this.doRectificationSafeEventCount+this.processFillingCount,this.updateActions()},onMessageSelect:function(t){this.showMessage=!1,this.$router.push({path:t.path})}}}),C=w,y=(n(\"cbfd\"),Object(m[\"a\"])(C,c,r,!1,null,\"00a05845\",null)),E=y.exports,b=n(\"0311\"),k=n(\"1a03\"),B={name:\"AppLayout\",provide:function(){return{reload:this.reload}},data:function(){return{authTables:[],params:this.$route.params,isRouterAlive:!0,showTables:!0,authMenu:p[\"a\"],appUpdate:k[\"a\"],active:0}},components:{CenterHead:E,TabBar:b[\"a\"]},computed:Object(s[\"a\"])({scrollerHeight:function(){return window.innerHeight-60+\"px\"},menuCookie:function(){return this.$store.state.userinfo.id}},Object(u[\"b\"])([])),watch:{menuCookie:function(t){t&&this.init()}},mounted:function(){this.$store.state.currentProject=i[\"a\"].projectTypes[0],this.appUpdate.update(),this.$store.state.userinfo.token&&this.init()},methods:{init:function(){this.active=0,this.authTables=[{title:\"首页\",to:{path:\"/center\"},prefix:\"iconfont\",icon:\"home\"},{title:\"智慧建管\",prefix:\"iconfont\",icon:\"menu\",to:{path:\"/menu\"}},{title:\"我的\",prefix:\"iconfont\",icon:\"me\",to:{path:\"/system\"}}],this.reload()},reload:function(){var t=this;this.isRouterAlive=!1,this.$nextTick((function(){t.isRouterAlive=!0}))}}},I=B,j=(n(\"166b\"),Object(m[\"a\"])(I,a,o,!1,null,\"8307b232\",null));e[\"default\"]=j.exports},7486:function(t,e,n){\"use strict\";n(\"9c05\")},\"9c05\":function(t,e,n){},cbfd:function(t,e,n){\"use strict\";n(\"25c5\")},cffd:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return u}));n(\"e7e5\");var a,o=n(\"d399\"),s=(n(\"d3b7\"),n(\"bc3a\")),i=n.n(s),c=n(\"f121\");a=i.a.create({baseURL:c[\"baiduProxy\"],withCredentials:!0,timeout:5e3}),a.interceptors.response.use((function(t){return Promise.resolve(t.data)}),(function(t){return Promise.reject(t)}));var r=function(){return new Promise((function(t){window.plus?t():document.addEventListener(\"plusready\",(function(){t()}))}))};function u(){return a({url:\"/weather/v1/?district_id=330681&data_type=all&ak=K5P2ccCwPCf6bIGUQvfVpnSBjLAssCxd&mcode=10:7C:27:50:C0:E7:28:BE:4F:3E:7C:DB:87:A3:0B:15:13:60:03:C7;plus.H5BB7D9CB\",method:\"get\"})}a=function(t){var e=t.url;return new Promise((function(t){r().then((function(){var n=new plus.net.XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(200==n.status&&n.response?n.response?t(n.response):o[\"a\"].fail(n.response.message||\"接口访问出错！\"):o[\"a\"].fail(\"请检查您的网络，或联系管理员！\"))},n.open(\"GET\",c[\"baiduProxy\"]+e),n.responseType=\"json\",n.setRequestHeader(\"Content-Type\",\"application/json\"),n.send()}))}))}},d3ac:function(t,e,n){},f6d5:function(t,e,n){\"use strict\";n.d(e,\"d\",(function(){return c})),n.d(e,\"c\",(function(){return r})),n.d(e,\"a\",(function(){return u})),n.d(e,\"b\",(function(){return l}));n(\"e7e5\");var a=n(\"d399\"),o=(n(\"d3b7\"),n(\"e9c4\"),n(\"14d9\"),n(\"99af\"),n(\"a15b\"),n(\"159b\"),n(\"bc3a\"),n(\"f121\")),s=function(){return new Promise((function(t){window.plus?t():document.addEventListener(\"plusready\",(function(){t()}))}))},i=function(t){return mui.init(),new Promise((function(e){s().then((function(){mui.init();var n=t.url,s=t.method,i=t.params,c=t.data,r=t.isUploadFile,u=t.loading,l=n;if(i&&\"{}\"!==JSON.stringify(i)){var f=[];for(var d in i)f.push(\"\".concat(d,\"=\").concat(i[d]));n+=\"?\".concat(f.join(\"&\"))}var p={url:o[\"STSfmzj\"]+encodeURI(n),type:s.toUpperCase(),headers:{\"Content-Type\":\"application/json\"},success:function(t){a[\"a\"].clear(),200===t.status||0===t.meow?e(t.data):300===t.status?(e(t.data||[]),a[\"a\"].fail(t.message||\"无数据！\")):a[\"a\"].fail(\"\".concat(l,\": \").concat(t.message||\"接口访问出错！\"))},error:function(t,e,n){a[\"a\"].clear(),a[\"a\"].fail(\"\".concat(l,\": 请检查您的网络，或联系管理员！\"))}};if(c&&(p.data=c),!r&&(null===i||void 0===i||!i.noToken)){var A=localStorage.getItem(\"userinfo\");if(A){var h=JSON.parse(A);p.headers[\"token\"]=h.token}}mui.ajax(p),u&&a[\"a\"].loading({message:\"加载中...\",forbidClick:!0})}))}))};function c(t){return i({url:\"/userauth/getUserInfo\",method:\"get\",params:t})}function r(t,e,n){var a=[];return n&&n.forEach((function(t){a.push(t.ID)})),i({url:\"/mapConfig/getMyMap?type=2,3&userid=\".concat(t,\"&groupId=\").concat(e,\"&rolesId=\").concat(a.join(\",\")),method:\"get\"})}function u(t){return i({url:\"/assets/easySelect\",method:\"get\",params:t})}var l=function(t){return i({url:\"/userauth/selectDicByParentKey?keyStr=\".concat(t),method:\"get\"})}}}]);","extractedComments":[]}