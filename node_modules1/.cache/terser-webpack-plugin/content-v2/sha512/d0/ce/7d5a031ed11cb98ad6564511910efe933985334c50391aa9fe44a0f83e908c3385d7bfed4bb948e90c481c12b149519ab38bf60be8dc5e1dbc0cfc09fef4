{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-517d0854\"],{\"17db\":function(e,o,n){\"use strict\";n.r(o);n(\"b0c0\");var t=function(){var e=this,o=e._self._c;return o(\"div\",{staticClass:\"monitor-container\"},[o(\"van-tabs\",[o(\"van-tab\",{attrs:{title:\"视频监控\"}},[o(\"van-list\",{staticClass:\"monitor-list\",style:{height:e.scrollerHeight}},e._l(e.list,(function(n,t){return o(\"div\",{key:t,class:\"common-card list-item \"+(t===e.list.length-1?\"last\":\"\"),staticStyle:{\"background-color\":\"white\"}},[o(\"div\",{staticClass:\"ez-vedio\",attrs:{id:n.id}}),o(\"div\",{staticClass:\"content\"},[o(\"div\",{staticClass:\"name\",on:{click:function(o){return e.fullScreen(n,t)}}},[e._v(e._s(n.name))])])])})),0)],1)],1),o(\"el-row\",{staticStyle:{position:\"fixed\",bottom:\"10px\",left:\"10px\"}},[o(\"el-button\",{attrs:{icon:\"el-icon-arrow-left\",circle:\"\"},nativeOn:{touchstart:function(o){return e.startCtrl(2)},touchend:function(o){return e.stopCtrl.apply(null,arguments)}}}),o(\"el-button\",{attrs:{icon:\"el-icon-arrow-right\",circle:\"\"},nativeOn:{touchstart:function(o){return e.startCtrl(3)},touchend:function(o){return e.stopCtrl.apply(null,arguments)}}}),o(\"el-button\",{attrs:{icon:\"el-icon-arrow-down\",circle:\"\"},nativeOn:{touchstart:function(o){return e.startCtrl(1)},touchend:function(o){return e.stopCtrl.apply(null,arguments)}}}),o(\"el-button\",{attrs:{icon:\"el-icon-arrow-up\",circle:\"\"},nativeOn:{touchstart:function(o){return e.startCtrl(0)},touchend:function(o){return e.stopCtrl.apply(null,arguments)}}})],1)],1)},i=[],c=(n(\"4de4\"),n(\"d3b7\"),n(\"159b\"),n(\"3ca3\"),n(\"ddb0\"),n(\"9861\"),n(\"c38d\")),l=n.n(c),r=n(\"24d2\"),p={computed:{scrollerHeight:function(){return window.innerHeight-138+\"px\"}},data:function(){return{hls:null,refreshing:!1,finished:!1,moveActive:!1,selectedVideo:0,list:[{id:1,name:\"池州市急救中心项目1号\",type:2,url:\"ezopen://open.ys7.com/K54134283/1.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:2,name:\"池州市急救中心项目2号\",type:2,url:\"ezopen://open.ys7.com/K54134283/2.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:3,name:\"池州市急救中心项目3号\",type:2,url:\"ezopen://open.ys7.com/K54134283/3.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:4,name:\"池州市急救中心项目4号\",type:2,url:\"ezopen://open.ys7.com/K54134283/4.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:5,name:\"池州市急救中心项目5号\",type:2,url:\"ezopen://open.ys7.com/K54134283/5.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:6,name:\"池州市急救中心项目6号\",type:2,url:\"ezopen://open.ys7.com/K54134283/6.hd.live\",geom:[120.1567907,29.8855307,85],project:126},{id:7,name:\"池州市急救中心项目7号\",type:2,url:\"ezopen://open.ys7.com/K54134283/7.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:8,name:\"池州市急救中心项目8号\",type:2,url:\"ezopen://open.ys7.com/K54134283/8.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:126},{id:9,name:\"池州职业技术学院实验实训南区EPC总承包项目1号\",type:2,url:\"ezopen://open.ys7.com/K54134316/1.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:10,name:\"池州职业技术学院实验实训南区EPC总承包项目2号\",type:2,url:\"ezopen://open.ys7.com/K54134316/2.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:11,name:\"池州职业技术学院实验实训南区EPC总承包项目3号\",type:2,url:\"ezopen://open.ys7.com/K54134316/3.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:12,name:\"池州职业技术学院实验实训南区EPC总承包项目4号\",type:2,url:\"ezopen://open.ys7.com/K54134316/4.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:13,name:\"池州职业技术学院实验实训南区EPC总承包项目5号\",type:2,url:\"ezopen://open.ys7.com/K54134316/5.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:14,name:\"池州职业技术学院实验实训南区EPC总承包项目6号\",type:2,url:\"ezopen://open.ys7.com/K54134316/6.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:15,name:\"池州职业技术学院实验实训南区EPC总承包项目7号\",type:2,url:\"ezopen://open.ys7.com/K54134316/7.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:16,name:\"池州职业技术学院实验实训南区EPC总承包项目8号\",type:2,url:\"ezopen://open.ys7.com/K54134316/8.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:130},{id:17,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 1号\",type:2,url:\"ezopen://open.ys7.com/K09696219/1.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:18,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 2号\",type:2,url:\"ezopen://open.ys7.com/K09696219/2.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:19,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 3号\",type:2,url:\"ezopen://open.ys7.com/K09696219/3.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:20,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 4号\",type:2,url:\"ezopen://open.ys7.com/K09696219/4.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:21,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 5号\",type:2,url:\"ezopen://open.ys7.com/K09696219/5.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:22,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 6号\",type:2,url:\"ezopen://open.ys7.com/K09696219/6.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:23,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 7号\",type:2,url:\"ezopen://open.ys7.com/K09696219/7.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:24,name:\"池州职业技术学院实验实训综合提升项目（二期）F+EPC 8号\",type:2,url:\"ezopen://open.ys7.com/K09696219/8.hd.live\",deviceNo:\"\",channelNo:\"\",geom:[120.1567907,29.8855307,85],project:195},{id:25,name:\"(球机)池州生态人文纪念园项目 1号\",type:2,url:\"ezopen://open.ys7.com/L18119347/1.hd.live\",deviceNo:\"L18119347\",channelNo:\"1\",geom:[120.1567907,29.8855307,85],project:191},{id:26,name:\"(球机)池州生态人文纪念园项目 2号\",type:2,url:\"ezopen://open.ys7.com/L18119347/2.hd.live\",deviceNo:\"L18119347\",channelNo:\"2\",geom:[120.1567907,29.8855307,85],project:191},{id:27,name:\"(球机)池州港乌沙港区公用码头工程 1号\",type:2,url:\"ezopen://open.ys7.com/L01047307/1.hd.live\",deviceNo:\"L01047307\",channelNo:\"1\",geom:[120.1567907,29.8855307,85],project:3},{id:28,name:\"(球机)池州港乌沙港区公用码头工程 2号\",type:2,url:\"ezopen://open.ys7.com/L01047307/2.hd.live\",deviceNo:\"L01047307\",channelNo:\"2\",geom:[120.1567907,29.8855307,85],project:3},{id:29,name:\"(球机)池州港乌沙港区公用码头工程 3号\",type:2,url:\"ezopen://open.ys7.com/L01047307/3.hd.live\",deviceNo:\"L01047307\",channelNo:\"3\",geom:[120.1567907,29.8855307,85],project:3},{id:30,name:\"(球机)池州港乌沙港区公用码头工程 4号\",type:2,url:\"ezopen://open.ys7.com/L01047307/4.hd.live\",deviceNo:\"L01047307\",channelNo:\"4\",geom:[120.1567907,29.8855307,85],project:3},{id:31,name:\"(球机)池州港乌沙港区公用码头工程 5号\",type:2,url:\"ezopen://open.ys7.com/L01047307/5.hd.live\",deviceNo:\"L01047307\",channelNo:\"5\",geom:[120.1567907,29.8855307,85],project:3}],sensorList:[],show:!1,title:\"\",showVideo:!1,videoToken:\"\"}},mounted:function(){var e=this;Object(r[\"fb\"])().then((function(o){e.videoToken=o,e.list=e.list.filter((function(o){return o.project===e.$store.state.curProject.child[0].id})),e.init()})),this.initSensor()},methods:{initSensor:function(){var e=this;Object(r[\"gb\"])().then((function(o){e.sensorList=o}))},init:function(){var e=this;this.$nextTick((function(){e.initVideo()}))},initVideo:function(){var e=this;this.list.forEach((function(o,n){e.initEzVideo(o,n)}))},initEzVideo:function(e,o){var n=this;if(!e.player){var t=e.id,i=e.url;e.player=new l.a.EZUIKitPlayer({id:t,accessToken:this.videoToken,url:i,width:320,height:240,autoplay:0==o,footer:\"fullScreen\",template:\"standard\",handleSuccess:function(){n.list.forEach((function(e,n){e.player&&n!=o&&e.player.stop()}))}})}},fullScreen:function(e,o){var n;null===e||void 0===e||null===(n=e.player)||void 0===n||n.stop(),this.selectedVideo=o},startCtrl:function(e){var o=this.list[this.selectedVideo],n=new Headers;n.append(\"Content-Type\",\"application/x-www-form-urlencoded\");var t=new URLSearchParams;t.append(\"accessToken\",this.videoToken),t.append(\"deviceSerial\",o.deviceNo),t.append(\"channelNo\",o.channelNo),t.append(\"direction\",e),t.append(\"speed\",\"1\");var i={method:\"POST\",headers:n,body:t,redirect:\"follow\"};fetch(\"https://open.ys7.com/api/lapp/device/ptz/start\",i).then((function(e){return e.text()})).then((function(e){})).catch((function(e){})),this.moveActive=!0},stopCtrl:function(){var e=this,o=this.list[this.selectedVideo],n=new Headers;n.append(\"Content-Type\",\"application/x-www-form-urlencoded\");var t=new URLSearchParams;t.append(\"accessToken\",this.videoToken),t.append(\"deviceSerial\",o.deviceNo),t.append(\"channelNo\",o.channelNo);var i={method:\"POST\",headers:n,body:t,redirect:\"follow\"};fetch(\"https://open.ys7.com/api/lapp/device/ptz/stop\",i).then((function(e){return e.text()})).then((function(o){e.moveActive=!1})).catch((function(e){}))}}},a=p,d=(n(\"f5a8\"),n(\"2877\")),s=Object(d[\"a\"])(a,t,i,!1,null,null,null);o[\"default\"]=s.exports},\"870f\":function(e,o,n){},f5a8:function(e,o,n){\"use strict\";n(\"870f\")}}]);","extractedComments":[]}