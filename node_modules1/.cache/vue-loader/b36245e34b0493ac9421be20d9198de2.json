{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\historicaltask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\historicaltask.vue","mtime":1684246188057},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0ICogYXMgYXBpIGZyb20gIkAvYXBpL3F1YWxpdHkiOw0KCWltcG9ydCB7DQoJCW1hcEdldHRlcnMNCgl9IGZyb20gJ3Z1ZXgnDQoJaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXJNYXAgfSBmcm9tICdAL3JvdXRlci9yb3V0ZXIucHJvamVjdC5qcycNCglpbXBvcnQgew0KCQlzZXRUb2tlbg0KCX0gZnJvbSAiQC91dGlscy9hdXRoIjsNCglleHBvcnQgZGVmYXVsdCB7DQoJCWRhdGEoKSB7DQoJCQlyZXR1cm4gew0KCQkJCXRhYmxlRGF0YTogW10sDQoJCQkJbG9hZGluZzogZmFsc2UsDQoJCQkJZmluaXNoZWQ6IGZhbHNlLA0KCQkJCXF1ZXJ5RGF0YTogew0KCQkJCQkvLyBwcm9jZXNzRGVmaW5pdGlvbk5hbWU6JycsDQoJCQkJCS8vIGJlZ2luRGF0ZTonMjAyMS0wNS0xNScsDQoJCQkJCS8vIGVuZERhdGU6JzIwMjItMDUtMTUnLA0KCQkJCQlwYWdlUGFyYW06IHsNCgkJCQkJCXBhZ2VOdW06IDEsDQoJCQkJCQl0b3RhbFBhZ2U6IDEsDQoJCQkJCQlwYWdlU2l6ZTogMTANCgkJCQkJfSwNCgkJCQl9LA0KCQkJCXJvdXRlczogbnVsbCwNCgkJCQlkZXRhaWxSb3V0ZXJzOiBbXQ0KCQkJfTsNCgkJfSwNCgkJY3JlYXRlZCgpIHsNCgkJCXRoaXMucm91dGVzID0gdGhpcy5tZW51czsNCgkJCWxldCBkZXRhaWxSb3V0ZXIgPSBjb25zdGFudFJvdXRlck1hcC5maW5kKGUgPT4gZS5uYW1lID09PSAiaGFuZGxlckZsb3dUYXNrIik7DQoJCQl0aGlzLmRldGFpbFJvdXRlcnMgPSBkZXRhaWxSb3V0ZXI/LmNoaWxkcmVuOw0KCQl9LA0KCQljb21wb25lbnRzOiB7fSwNCgkJY29tcHV0ZWQ6IHsNCgkJCS4uLm1hcEdldHRlcnMoWyJtZW51cyJdKSwNCgkJCXNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbigpIHsNCgkJCQlyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gOTEgKyAncHgnDQoJCQl9DQoJCX0sDQoJCW1vdW50ZWQoKSB7DQoJCQkvLyB0aGlzLnF1ZXJ5KCk7DQoJCX0sDQoJCW1ldGhvZHM6IHsNCgkJCXF1ZXJ5KCkgew0KCQkJCWFwaS5saXN0SGlzdG9yaWNQcm9jZXNzSW5zdGFuY2UodGhpcy5xdWVyeURhdGEpLnRoZW4oKHJlcykgPT4gew0KCQkJCQl0aGlzLmFsbERhdGEgPSByZXMuZGF0YSB8fCB7fTsNCgkJCQkJdGhpcy50YWJsZURhdGEgPSBbLi4udGhpcy50YWJsZURhdGEsLi4udGhpcy5hbGxEYXRhWydsaXN0J118fFtdXQ0KCQkJCQl0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0ucGFnZU51bSA9IHJlcy5kYXRhLnBhZ2VOdW0gKyAxOw0KCQkJCQl0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0udG90YWxQYWdlID0gcmVzLmRhdGEudG90YWw7DQoJCQkJCXRoaXMucXVlcnlEYXRhLnBhZ2VQYXJhbS5wYWdlU2l6ZSA9IHJlcy5kYXRhLnBhZ2VTaXplOw0KDQoJCQkJCS8vIOWKoOi9veeKtuaAgee7k+adnw0KCQkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCgkJCQkJLy8g5pWw5o2u5YWo6YOo5Yqg6L295a6M5oiQDQoJCQkJCWlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPj0gcmVzLmRhdGEudG90YWwpIHsNCgkJCQkJCXRoaXMuZmluaXNoZWQgPSB0cnVlOw0KCQkJCQl9DQoJCQkJfSk7DQoJCQl9LA0KCQkJaGFuZGxlQ3VycmVudENoYW5nZShwYWdlKSB7DQoJCQkJdGhpcy5xdWVyeURhdGEucGFnZVBhcmFtLnBhZ2VOdW0gPSBwYWdlDQoJCQkJdGhpcy5xdWVyeSgpDQoJCQl9LA0KCQkJZ290b0hhbmRsZShyb3cpIHsNCgkJCQkvL3Jvd1sndGFza0Zvcm1LZXknXT0odHlwZW9mIHJvd1sndGFza0Zvcm1LZXknXSk9PSdzdHJpbmcnP0pTT04ucGFyc2Uocm93Wyd0YXNrRm9ybUtleSddKTpyb3dbJ3Rhc2tGb3JtS2V5J107DQoJCQkJbGV0IGtleSA9IHJvd1sicHJvY2Vzc0RlZmluaXRpb25LZXkiXTsNCgkJCQlsZXQgcm91dGVyID0gdGhpcy5kZXRhaWxSb3V0ZXJzLmZpbmQoZSA9PiBlLmNvZGUuaW5kZXhPZihrZXkpICE9PSAtMSk7DQoJCQkJbGV0IGhpZGRlbkVkaXQgPSBbInNnZHdodHJ5YnMiLCAiamxkd2h0cnlicyIsICJxemR3aHRyeWJzIiwgInNnZHdyeWJnIiwgImpsZHdyeWJnIiwgInF6ZHdyeWJnIiwgInNnZHdyeXFqIiwNCgkJCQkJImpsZHdyeXFqIiwgInF6ZHdyeXFqIg0KCQkJCV07DQoJCQkJaWYgKHJvdXRlcikgew0KCQkJCQlzZXRUb2tlbigidGFza1R5cGUiLCAzKTsNCgkJCQkJdGhpcy4kcm91dGVyLnB1c2goew0KCQkJCQkJcGF0aDogcm91dGVyLnBhdGgsDQoJCQkJCQlxdWVyeTogew0KCQkJCQkJCS8vIHRhc2tJZDogcm93LmRlcGxveW1lbnRJZCwNCgkJCQkJCQl0YXNrS2V5OiByb3cudGFza0tleSwNCgkJCQkJCQlidXNpbmVzc0tleTogcm93LmJ1c2luZXNzS2V5LA0KCQkJCQkJCXByb2Nlc3NEZWZpbml0aW9uS2V5OiByb3cucHJvY2Vzc0RlZmluaXRpb25LZXksDQoJCQkJCQkJcHJvY2Vzc0luc3RhbmNlSWQ6IHJvdy5wcm9jZXNzSW5zdGFuY2VJZCwNCgkJCQkJCQlwcm9jZXNzRGVmaW5pdGlvbklkOiByb3cucHJvY2Vzc0RlZmluaXRpb25JZCwNCgkJCQkJCQl0YXNrTmFtZTogcm93LnRhc2tOYW1lLA0KCQkJCQkJCWZsb3dFbnRyeU5hbWU6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbk5hbWUsDQoJCQkJCQkJcHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yOiByb3cucHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yLA0KCQkJCQkJCWlzSGlkZGVuRWRpdDogaGlkZGVuRWRpdC5pbmNsdWRlcyhrZXkpLA0KCQkJCQkJCWZsb3dLZXk6IGhpZGRlbkVkaXQuaW5jbHVkZXMoa2V5KSA/IGtleSA6ICIiDQoJCQkJCQl9DQoJCQkJCX0pOw0KCQkJCX0NCgkJCQkvLyB0aGlzLnJvdXRlcy5mb3JFYWNoKHBhcmVudD0+ew0KCQkJCS8vIAlwYXJlbnRbJ2NoaWxkcmVuJ10uZm9yRWFjaChjaGlsZD0+ew0KCQkJCS8vIAkJaWYoY2hpbGRbJ21ldGEnXVsnY29kZSddPT1yb3dbJ3Byb2Nlc3NEZWZpbml0aW9uS2V5J10pew0KCQkJCS8vIAkJCXRoaXMuJHJvdXRlci5wdXNoKHsNCgkJCQkvLyAJCQkJcGF0aDpjaGlsZFsncGF0aCddKydfZGV0YWlsJywNCgkJCQkvLyAJCQkJcXVlcnk6ew0KCQkJCS8vIAkJCQkJdGFza0lkOiByb3cuZGVwbG95bWVudElkLA0KCQkJCS8vIAkJCQkJYnVzaW5lc3NLZXk6cm93LmJ1c2luZXNzS2V5LA0KCQkJCS8vIAkJCQkJcHJvY2Vzc0RlZmluaXRpb25LZXk6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbktleSwNCgkJCQkvLyAJCQkJCXByb2Nlc3NJbnN0YW5jZUlkOiByb3cucHJvY2Vzc0luc3RhbmNlSWQsDQoJCQkJLy8gCQkJCQlwcm9jZXNzRGVmaW5pdGlvbklkOiByb3cucHJvY2Vzc0RlZmluaXRpb25JZCwNCgkJCQkvLyAJCQkJCXRhc2tOYW1lOiByb3cudGFza05hbWUsDQoJCQkJLy8gCQkJCQlmbG93RW50cnlOYW1lOiByb3cucHJvY2Vzc0RlZmluaXRpb25OYW1lLA0KCQkJCS8vIAkJCQkJcHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yOiByb3cucHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yLA0KCQkJCS8vIAkJCQl9DQoJCQkJLy8gCQkJfSk7DQoJCQkJLy8gCQl9DQoJCQkJLy8gCX0pDQoJCQkJLy8gfSkNCgkJCX0NCgkJfQ0KCX0NCg=="},{"version":3,"sources":["historicaltask.vue"],"names":[],"mappings":";AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"historicaltask.vue","sourceRoot":"src/views/task","sourcesContent":["<!--\r\n * @Descripttion:监理旁站\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:12:51\r\n * @LastEditors: WangHarry\r\n * @LastEditTime: 2022-05-09 14:15:22\r\n-->\r\n<template>\r\n\t<el-container class=\"container-box\">\r\n\t\t<van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n\t\t\t\t<van-swipe-cell class=\"list\" v-for=\"(item, index) in tableData\" :key=\"index\" :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\">\r\n\t\t\t\t\t<div class=\"item\" style=\"\" @click=\"gotoHandle(item)\">\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">流程名称</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.processDefinitionName }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">流程标识</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.processDefinitionKey }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务名称</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.name }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- <div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">执行操作</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.approvalType }}</span>\r\n\t\t\t\t\t\t</div> -->\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务发起人</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.startUserName }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务发起时间</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.createTime }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"gotoHandle(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</van-swipe-cell>\r\n\t\t</van-list>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n\timport * as api from \"@/api/quality\";\r\n\timport {\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\timport { constantRouterMap } from '@/router/router.project.js'\r\n\timport {\r\n\t\tsetToken\r\n\t} from \"@/utils/auth\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\tqueryData: {\r\n\t\t\t\t\t// processDefinitionName:'',\r\n\t\t\t\t\t// beginDate:'2021-05-15',\r\n\t\t\t\t\t// endDate:'2022-05-15',\r\n\t\t\t\t\tpageParam: {\r\n\t\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\troutes: null,\r\n\t\t\t\tdetailRouters: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.routes = this.menus;\r\n\t\t\tlet detailRouter = constantRouterMap.find(e => e.name === \"handlerFlowTask\");\r\n\t\t\tthis.detailRouters = detailRouter?.children;\r\n\t\t},\r\n\t\tcomponents: {},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters([\"menus\"]),\r\n\t\t\tscrollerHeight: function() {\r\n\t\t\t\treturn window.innerHeight - 91 + 'px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.query();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tquery() {\r\n\t\t\t\tapi.listHistoricProcessInstance(this.queryData).then((res) => {\r\n\t\t\t\t\tthis.allData = res.data || {};\r\n\t\t\t\t\tthis.tableData = [...this.tableData,...this.allData['list']||[]]\r\n\t\t\t\t\tthis.queryData.pageParam.pageNum = res.data.pageNum + 1;\r\n\t\t\t\t\tthis.queryData.pageParam.totalPage = res.data.total;\r\n\t\t\t\t\tthis.queryData.pageParam.pageSize = res.data.pageSize;\r\n\r\n\t\t\t\t\t// 加载状态结束\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t// 数据全部加载完成\r\n\t\t\t\t\tif (this.tableData.length >= res.data.total) {\r\n\t\t\t\t\t\tthis.finished = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(page) {\r\n\t\t\t\tthis.queryData.pageParam.pageNum = page\r\n\t\t\t\tthis.query()\r\n\t\t\t},\r\n\t\t\tgotoHandle(row) {\r\n\t\t\t\t//row['taskFormKey']=(typeof row['taskFormKey'])=='string'?JSON.parse(row['taskFormKey']):row['taskFormKey'];\r\n\t\t\t\tlet key = row[\"processDefinitionKey\"];\r\n\t\t\t\tlet router = this.detailRouters.find(e => e.code.indexOf(key) !== -1);\r\n\t\t\t\tlet hiddenEdit = [\"sgdwhtrybs\", \"jldwhtrybs\", \"qzdwhtrybs\", \"sgdwrybg\", \"jldwrybg\", \"qzdwrybg\", \"sgdwryqj\",\r\n\t\t\t\t\t\"jldwryqj\", \"qzdwryqj\"\r\n\t\t\t\t];\r\n\t\t\t\tif (router) {\r\n\t\t\t\t\tsetToken(\"taskType\", 3);\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath: router.path,\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t// taskId: row.deploymentId,\r\n\t\t\t\t\t\t\ttaskKey: row.taskKey,\r\n\t\t\t\t\t\t\tbusinessKey: row.businessKey,\r\n\t\t\t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n\t\t\t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n\t\t\t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n\t\t\t\t\t\t\ttaskName: row.taskName,\r\n\t\t\t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n\t\t\t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n\t\t\t\t\t\t\tisHiddenEdit: hiddenEdit.includes(key),\r\n\t\t\t\t\t\t\tflowKey: hiddenEdit.includes(key) ? key : \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// this.routes.forEach(parent=>{\r\n\t\t\t\t// \tparent['children'].forEach(child=>{\r\n\t\t\t\t// \t\tif(child['meta']['code']==row['processDefinitionKey']){\r\n\t\t\t\t// \t\t\tthis.$router.push({\r\n\t\t\t\t// \t\t\t\tpath:child['path']+'_detail',\r\n\t\t\t\t// \t\t\t\tquery:{\r\n\t\t\t\t// \t\t\t\t\ttaskId: row.deploymentId,\r\n\t\t\t\t// \t\t\t\t\tbusinessKey:row.businessKey,\r\n\t\t\t\t// \t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n\t\t\t\t// \t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n\t\t\t\t// \t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n\t\t\t\t// \t\t\t\t\ttaskName: row.taskName,\r\n\t\t\t\t// \t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n\t\t\t\t// \t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t});\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.container-box {\r\n\t\tcolor: #000000;\r\n\t\tbackground-color: #FAFAFA;\r\n\t\theight: 100%;\r\n\t\twidth: calc(100% + 1px);\r\n  \t\toverflow-y: auto;\r\n\t\t.van-list{\r\n\t\t\twidth: 100%;\r\n\t\t\t.list {\r\n\t\t\t\t.item{\r\n\t\t\t\t\tpadding: 10px;\r\n\t\t\t\t\tborder:1px solid rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\tborder-radius:5px;\r\n\t\t\t\t\tmargin:5px;\r\n\t\t\t\t\tbox-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\t.block {\r\n\t\t\t\t\t\t.block-value {\r\n\t\t\t\t\t\t\tmargin-left: 5px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.van-button {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"]}]}