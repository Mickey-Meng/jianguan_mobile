{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\Report.vue?vue&type=style&index=0&id=5f1d4164&lang=scss&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\Report.vue","mtime":1684246187880},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1684411443176},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1684411446724},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1684411443221},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1684411446938},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucmVwb3J0IHsNCiAgbWFyZ2luOiAxMnB4IDA7DQogIC52ZS10YWJsZSB0YWJsZS52ZS10YWJsZS1jb250ZW50IHRoZWFkLnZlLXRhYmxlLWhlYWRlciB0ci52ZS10YWJsZS1oZWFkZXItdHIgdGgudmUtdGFibGUtaGVhZGVyLXRoIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNmM5YWM3ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMC4yNjY2N3JlbTsNCiAgICBmb250LXdlaWdodDogNTAwOw0KICAgIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7DQogIH0NCiAgLnZlLXRhYmxlIHRhYmxlLnZlLXRhYmxlLWNvbnRlbnQgdGJvZHkudmUtdGFibGUtYm9keSB0ci52ZS10YWJsZS1ib2R5LXRyIHRkLnZlLXRhYmxlLWJvZHktdGQsDQogIC52ZS10YWJsZSB0YWJsZS52ZS10YWJsZS1jb250ZW50IHRib2R5LnZlLXRhYmxlLWJvZHkgdHIudmUtdGFibGUtZXhwYW5kLXRyIHRkLnZlLXRhYmxlLWJvZHktdGQsDQogIC52ZS10YWJsZSB0YWJsZS52ZS10YWJsZS1jb250ZW50IHRib2R5LnZlLXRhYmxlLWJvZHkgdHIudmUtdGFibGUtYm9keS10ciB0ZC52ZS10YWJsZS1leHBhbmQtdGQsDQogIC52ZS10YWJsZSB0YWJsZS52ZS10YWJsZS1jb250ZW50IHRib2R5LnZlLXRhYmxlLWJvZHkgdHIudmUtdGFibGUtZXhwYW5kLXRyIHRkLnZlLXRhYmxlLWV4cGFuZC10ZCB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICBjb2xvcjogIzAwMDAwMGQ5Ow0KICAgIGhlaWdodDogaW5oZXJpdDsNCiAgICBmb250LXNpemU6IDEycHggIWltcG9ydGFudDsNCiAgfQ0KICAudmUtdGFibGUgLnZlLXRhYmxlLWNvbnRhaW5lci52ZS10YWJsZS1ib3JkZXItYXJvdW5kIC52ZS10YWJsZS1ib3JkZXIteSB0aC52ZS10YWJsZS1sYXN0LWNvbHVtbiwNCiAgLnZlLXRhYmxlIC52ZS10YWJsZS1jb250YWluZXIudmUtdGFibGUtYm9yZGVyLWFyb3VuZCAudmUtdGFibGUtYm9yZGVyLXkgdGQ6bGFzdC1jaGlsZCB7DQogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZSAhaW1wb3J0YW50Ow0KICB9DQogIC5uby1kYXRhIHsNCiAgICBoZWlnaHQ6IDYwcHg7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbGluZS1oZWlnaHQ6IDYwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICB9DQogIC5jb25kaXRpb24gew0KICAgIGhlaWdodDogMzhweDsNCiAgICBsaW5lLWhlaWdodDogMzhweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgZm9udC1zaXplOiAxNHB4Ow0KICAgIHdpZHRoOiAxMDAlOw0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgLnNwYW4tY29udGFpbmVyIHsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICRhY3RpdmUtY29sb3I7DQogICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICBoZWlnaHQ6IDI2cHg7DQogICAgICBsaW5lLWhlaWdodDogMjZweDsNCiAgICAgIG1hcmdpbi10b3A6IDZweDsNCiAgICAgIHNwYW4gew0KICAgICAgICBmbG9hdDogbGVmdDsNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgICB9DQogICAgfQ0KICAgIC5yZXBvcnRUeXBlIHsNCiAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgICB3aWR0aDogMTIwcHg7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkYWN0aXZlLWNvbG9yOw0KICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgYm9yZGVyOiBub25lOw0KICAgIH0NCiAgICAuZGF0ZSB7DQogICAgICBmbG9hdDogcmlnaHQ7DQogICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogICAgICB3aWR0aDogMjAwcHg7DQogICAgfQ0KICAgIC5zcGFuLWNvbnRhaW5lcjo6YWZ0ZXIgew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgdG9wOiA1MCU7DQogICAgICByaWdodDogMTBweDsNCiAgICAgIG1hcmdpbi10b3A6IC01cHg7DQogICAgICBib3JkZXI6IDNweCBzb2xpZDsNCiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgI2RjZGVlMCAjZGNkZWUwOw0KICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpOw0KICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsNCiAgICAgIG9wYWNpdHk6IDAuODsNCiAgICAgIGNvbnRlbnQ6ICcnOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Report.vue"],"names":[],"mappings":";AAqVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Report.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"report\">\r\n    <div class=\"condition\">\r\n      <!-- <div class=\"span-container reportType\">\r\n        <span>\r\n          {{ this.reportType }}\r\n        </span>\r\n      </div> -->\r\n      <div class=\"span-container date\" @click=\"showDatePick\">\r\n        <span>\r\n          {{ this.date }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <ve-table\r\n      :max-height=\"scrollerHeight\"\r\n      :columns=\"columns\"\r\n      :table-data=\"tableData\"\r\n      :border-around=\"true\"\r\n      :border-x=\"true\"\r\n      :border-y=\"true\"\r\n      v-if=\"tableData.length > 0\"\r\n    />\r\n    <div class=\"no-data\" v-else>\r\n      <span>无数据！</span>\r\n    </div>\r\n    <van-action-sheet v-model=\"showReportType\" :actions=\"reportTypes\" @select=\"reportTypeChange\" />\r\n    <van-calendar :min-date=\"minDate\" :max-date=\"maxDate\" v-model=\"show\" @confirm=\"onConfirm\" color=\"#1989fa\" />\r\n    <van-calendar\r\n      :default-date=\"defaultDate\"\r\n      :min-date=\"minDate\"\r\n      :max-date=\"maxDate\"\r\n      type=\"range\"\r\n      v-model=\"showDateRange\"\r\n      @confirm=\"onConfirm\"\r\n      color=\"#1989fa\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { getStatus } from '@/api/project.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      cellSpanOption: {\r\n        bodyCellSpan: this.bodyCellSpan\r\n      },\r\n      columns: [\r\n        {\r\n          field: 'name',\r\n          key: 'a',\r\n          title: '分项名称',\r\n          align: 'center',\r\n          width: '20%',\r\n          renderBodyCell: ({ row, column, rowIndex }, h) => {\r\n            const cellData = row[column.field]\r\n            return h(\r\n              'div',\r\n              {\r\n                style: {\r\n                  color: rowIndex === 1 || rowIndex === 3 || rowIndex === 5 || rowIndex === 8 ? '#1989fa' : '#000000d9'\r\n                }\r\n              },\r\n              `${cellData}`\r\n            )\r\n          }\r\n        },\r\n        {\r\n          field: 'count',\r\n          key: 'b',\r\n          title: '设计数量',\r\n          align: 'center',\r\n          width: '20%'\r\n        },\r\n        {\r\n          field: 'todayFinish',\r\n          key: 'c',\r\n          title: '完成量',\r\n          width: '20%',\r\n          align: 'center',\r\n          renderBodyCell: ({ row, column, rowIndex }, h) => {\r\n            const cellData = row[column.field]\r\n            return h(\r\n              'div',\r\n              {\r\n                style: {\r\n                  color: cellData !== 0 ? '#07c160' : '#000000d9'\r\n                }\r\n              },\r\n              `${cellData}`\r\n            )\r\n          }\r\n        },\r\n        {\r\n          field: 'finish',\r\n          key: 'd',\r\n          title: '累计完成',\r\n          width: '20%',\r\n          align: 'center'\r\n        },\r\n        {\r\n          field: 'rate',\r\n          key: 'e',\r\n          title: '完成比例',\r\n          width: '20%',\r\n          align: 'center',\r\n          renderBodyCell: ({ row, column, rowIndex }, h) => {\r\n            let cellData = ((100 * parseInt(row['finish'])) / parseInt(row['count'])).toFixed(1)\r\n            return h('div', {}, `${cellData}%`)\r\n          }\r\n        }\r\n      ],\r\n      tableData: [\r\n        {\r\n          name: '桩基',\r\n          number: '1307',\r\n          completed: '2',\r\n          completedTotal: '1219',\r\n          ratio: '93.3%'\r\n        },\r\n        {\r\n          name: '承台',\r\n          number: '476',\r\n          completed: '0',\r\n          completedTotal: '385',\r\n          ratio: '81.5%'\r\n        },\r\n        {\r\n          name: '桥台',\r\n          number: '476',\r\n          completed: '0',\r\n          completedTotal: '3',\r\n          ratio: '81.5%'\r\n        },\r\n        {\r\n          name: '预制立柱',\r\n          number: '649',\r\n          completed: '0',\r\n          completedTotal: '428',\r\n          ratio: '82.3%'\r\n        },\r\n        {\r\n          name: '现浇立柱',\r\n          number: '649',\r\n          completed: '1',\r\n          completedTotal: '106',\r\n          ratio: '82.3%'\r\n        },\r\n        {\r\n          name: '预制盖梁',\r\n          number: '318',\r\n          completed: '2',\r\n          completedTotal: '152',\r\n          ratio: '76.7%'\r\n        },\r\n        {\r\n          name: '现浇盖梁',\r\n          number: '318',\r\n          completed: '1',\r\n          completedTotal: '45',\r\n          ratio: '76.7%'\r\n        },\r\n        {\r\n          name: '钢盖梁',\r\n          number: '318',\r\n          completed: '0',\r\n          completedTotal: '47',\r\n          ratio: '76.7%'\r\n        },\r\n        {\r\n          name: '预制小箱梁',\r\n          number: '1325',\r\n          completed: '0',\r\n          completedTotal: '806',\r\n          ratio: '69.4%'\r\n        },\r\n        {\r\n          name: '现浇箱梁',\r\n          number: '1325',\r\n          completed: '0',\r\n          completedTotal: '10',\r\n          ratio: '69.4%'\r\n        },\r\n        {\r\n          name: '钢箱梁',\r\n          number: '1325',\r\n          completed: '0',\r\n          completedTotal: '25',\r\n          ratio: '69.4%'\r\n        },\r\n        {\r\n          name: '钢混叠合梁',\r\n          number: '1325',\r\n          completed: '0',\r\n          completedTotal: '78',\r\n          ratio: '69.4%'\r\n        },\r\n        {\r\n          name: '铺装',\r\n          number: '138',\r\n          completed: '0',\r\n          completedTotal: '0',\r\n          ratio: '0%'\r\n        },\r\n        {\r\n          name: '伸缩缝',\r\n          number: '149',\r\n          completed: '0',\r\n          completedTotal: '0',\r\n          ratio: '0%'\r\n        }\r\n      ],\r\n      reportType: '分项报表',\r\n      reportTypes: [{ name: '分项报表' }],\r\n      minDate: new Date(2010, 0, 1),\r\n      maxDate: new Date(),\r\n      date: this.moment(new Date()).format('YYYY年MM月DD日'),\r\n      lastDate: this.moment(new Date()).format('YYYY年MM月DD日'),\r\n      lastRangeDate:\r\n        this.moment(new Date())\r\n          .subtract(1, 'days')\r\n          .format('MM月DD日') +\r\n        ' - ' +\r\n        this.moment(new Date()).format('MM月DD日'),\r\n      show: false,\r\n      showDateRange: false,\r\n      showReportType: false,\r\n      defaultDate: [new Date(this.moment(new Date()).subtract(1, 'days')), new Date()],\r\n      startTime: this.moment(new Date())\r\n        .subtract(7, 'days')\r\n        .format('YYYY-MM-DD HH:mm:SS'),\r\n      endTime: this.moment(new Date()).format('YYYY-MM-DD HH:mm:SS')\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentProject']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 134 + 'px'\r\n    }\r\n  },\r\n  // watch: {\r\n  //   currentProject: function(value) {\r\n  //     this.getData(value)\r\n  //   }\r\n  // },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.reportTypeChange({ name: '分项报表' })\r\n      this.getData()\r\n    },\r\n    getData() {\r\n      console.log(this.currentProject.value);\r\n      let type = this.currentProject.value\r\n      getStatus({\r\n        type: 1,\r\n        sttime: this.startTime,\r\n        endtime: this.endTime\r\n      }).then(data => {\r\n        console.log(data,type);\r\n        this.tableData = data[type] || []\r\n        console.log(this.tableData);\r\n      })\r\n    },\r\n    showDatePick() {\r\n      if (this.reportType === '分项报表') {\r\n        this.showDateRange = true\r\n      } else {\r\n        this.show = true\r\n      }\r\n    },\r\n    onConfirm(date) {\r\n      if (date instanceof Array) {\r\n        const [start, end] = date\r\n        this.date = this.moment(start).format('MM月DD日') + ' - ' + this.moment(end).format('MM月DD日')\r\n        this.showDateRange = false\r\n        this.lastRangeDate = this.date\r\n        this.startTime = this.moment(start).format('YYYY-MM-DD HH:mm:SS')\r\n        this.endTime = this.moment(end).format('YYYY-MM-DD HH:mm:SS')\r\n        this.getData()\r\n      } else {\r\n        this.date = this.moment(date).format('YYYY年MM月DD日')\r\n        this.show = false\r\n        this.lastDate = this.date\r\n      }\r\n    },\r\n    reportTypeChange(item) {\r\n      this.showReportType = false\r\n      this.reportType = item.name\r\n      this.date = this.reportType === '分项报表' ? this.lastRangeDate : this.lastDate\r\n    },\r\n    // body cell span\r\n    bodyCellSpan({ row, column, rowIndex }) {\r\n      // rowspan\r\n      if (column.field === 'number' || column.field === 'ratio') {\r\n        if (rowIndex === 1) {\r\n          return {\r\n            rowspan: 2,\r\n            colspan: 1\r\n          }\r\n        }\r\n        // does not need to be rendered\r\n        else if (\r\n          rowIndex === 2 ||\r\n          rowIndex === 4 ||\r\n          rowIndex === 6 ||\r\n          rowIndex === 7 ||\r\n          rowIndex === 9 ||\r\n          rowIndex === 10 ||\r\n          rowIndex === 11\r\n        ) {\r\n          return {\r\n            rowspan: 0,\r\n            colspan: 0\r\n          }\r\n        } else if (rowIndex === 3) {\r\n          return {\r\n            rowspan: 2,\r\n            colspan: 1\r\n          }\r\n        } else if (rowIndex === 5) {\r\n          return {\r\n            rowspan: 3,\r\n            colspan: 1\r\n          }\r\n        } else if (rowIndex === 8) {\r\n          return {\r\n            rowspan: 4,\r\n            colspan: 1\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.report {\r\n  margin: 12px 0;\r\n  .ve-table table.ve-table-content thead.ve-table-header tr.ve-table-header-tr th.ve-table-header-th {\r\n    background-color: #6c9ac7 !important;\r\n    padding: 0.26667rem;\r\n    font-weight: 500;\r\n    color: #ffffff !important;\r\n    font-size: 12px !important;\r\n  }\r\n  .ve-table table.ve-table-content tbody.ve-table-body tr.ve-table-body-tr td.ve-table-body-td,\r\n  .ve-table table.ve-table-content tbody.ve-table-body tr.ve-table-expand-tr td.ve-table-body-td,\r\n  .ve-table table.ve-table-content tbody.ve-table-body tr.ve-table-body-tr td.ve-table-expand-td,\r\n  .ve-table table.ve-table-content tbody.ve-table-body tr.ve-table-expand-tr td.ve-table-expand-td {\r\n    background-color: #fff;\r\n    color: #000000d9;\r\n    height: inherit;\r\n    font-size: 12px !important;\r\n  }\r\n  .ve-table .ve-table-container.ve-table-border-around .ve-table-border-y th.ve-table-last-column,\r\n  .ve-table .ve-table-container.ve-table-border-around .ve-table-border-y td:last-child {\r\n    border-right: 1px solid #eee !important;\r\n  }\r\n  .no-data {\r\n    height: 60px;\r\n    width: 100%;\r\n    line-height: 60px;\r\n    text-align: center;\r\n  }\r\n  .condition {\r\n    height: 38px;\r\n    line-height: 38px;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    width: 100%;\r\n      background-color: white;\r\n    .span-container {\r\n      position: relative;\r\n      border: 1px solid $active-color;\r\n      border-radius: 5px;\r\n      height: 26px;\r\n      line-height: 26px;\r\n      margin-top: 6px;\r\n      span {\r\n        float: left;\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n    .reportType {\r\n      float: left;\r\n      margin-left: 10px;\r\n      width: 120px;\r\n      background-color: $active-color;\r\n      color: white;\r\n      border: none;\r\n    }\r\n    .date {\r\n      float: right;\r\n      margin-right: 10px;\r\n      width: 200px;\r\n    }\r\n    .span-container::after {\r\n      position: absolute;\r\n      top: 50%;\r\n      right: 10px;\r\n      margin-top: -5px;\r\n      border: 3px solid;\r\n      border-color: transparent transparent #dcdee0 #dcdee0;\r\n      -webkit-transform: rotate(-45deg);\r\n      transform: rotate(-45deg);\r\n      opacity: 0.8;\r\n      content: '';\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}