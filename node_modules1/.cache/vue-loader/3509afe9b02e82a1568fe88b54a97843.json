{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\copytask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\copytask.vue","mtime":1684246188055},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyBhcGkgZnJvbSAnQC9hcGkvcXVhbGl0eScNCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXJNYXAgfSBmcm9tICdAL3JvdXRlci9yb3V0ZXIucHJvamVjdC5qcycNCmltcG9ydCB7IHNldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBmaW5pc2hlZDogZmFsc2UsDQogICAgICBxdWVyeURhdGE6IHsNCiAgICAgICAgLy8gcHJvY2Vzc0RlZmluaXRpb25OYW1lOicnLA0KICAgICAgICAvLyBiZWdpbkRhdGU6JzIwMjEtMDUtMTUnLA0KICAgICAgICAvLyBlbmREYXRlOicyMDIyLTA1LTE1JywNCiAgICAgICAgLy8gdGFza0hhbmRsZVN0YXR1czozLA0KICAgICAgICBvcmRlclBhcmFtOiBbeyBmaWVsZE5hbWU6ICdjcmVhdGVUaW1lJywgYXNjOiAxIH1dLA0KICAgICAgICBwYWdlUGFyYW06IHsNCiAgICAgICAgICBwYWdlTnVtOiAxLA0KICAgICAgICAgIHRvdGFsUGFnZTogMSwNCiAgICAgICAgICBwYWdlU2l6ZTogMTANCiAgICAgICAgfSwNCiAgICAgICAgcmVhZDogZmFsc2UNCiAgICAgIH0sDQogICAgICByb3V0ZXM6IG51bGwsDQogICAgICBkZXRhaWxSb3V0ZXJzOiBbXQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnJvdXRlcyA9IHRoaXMubWVudXMNCiAgICBsZXQgZGV0YWlsUm91dGVyID0gY29uc3RhbnRSb3V0ZXJNYXAuZmluZChlID0+IGUubmFtZSA9PT0gJ2hhbmRsZXJGbG93VGFzaycpDQogICAgdGhpcy5kZXRhaWxSb3V0ZXJzID0gZGV0YWlsUm91dGVyPy5jaGlsZHJlbg0KICB9LA0KICBjb21wb25lbnRzOiB7fSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsnbWVudXMnXSksDQogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDkxICsgJ3B4Jw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvLyB0aGlzLnF1ZXJ5KCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBxdWVyeSgpIHsNCiAgICAgIGFwaS5saXN0Q29weU1lc3NhZ2UodGhpcy5xdWVyeURhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5hbGxEYXRhID0gcmVzLmRhdGEgfHwge30NCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbLi4udGhpcy50YWJsZURhdGEsIC4uLih0aGlzLmFsbERhdGFbJ2xpc3QnXSB8fCBbXSldDQoNCiAgICAgICAgdGhpcy5xdWVyeURhdGEucGFnZVBhcmFtLnBhZ2VOdW0gPSByZXMuZGF0YS5wYWdlTnVtICsgMQ0KICAgICAgICB0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0udG90YWxQYWdlID0gcmVzLmRhdGEudG90YWwgfHwgMQ0KICAgICAgICB0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0ucGFnZVNpemUgPSByZXMuZGF0YS5wYWdlU2l6ZSB8fCAxMA0KDQogICAgICAgIC8vIOWKoOi9veeKtuaAgee7k+adnw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAvLyDmlbDmja7lhajpg6jliqDovb3lrozmiJANCiAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA+PSByZXMuZGF0YS50b3RhbCkgew0KICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2UpIHsNCiAgICAgIHRoaXMucXVlcnlEYXRhLnBhZ2VQYXJhbS5wYWdlTnVtID0gcGFnZQ0KICAgICAgdGhpcy5xdWVyeSgpDQogICAgfSwNCiAgICBnb3RvSGFuZGxlKHJvdykgew0KICAgICAgLy8gcm93Wydmb3JtS2V5J10gPSAodHlwZW9mIHJvd1snZm9ybUtleSddKSA9PSAnc3RyaW5nJyA/IEpTT04ucGFyc2Uocm93Wydmb3JtS2V5J10pIDogcm93Wydmb3JtS2V5J107DQogICAgICBsZXQga2V5ID0gcm93Wydwcm9jZXNzRGVmaW5pdGlvbktleSddDQogICAgICBsZXQgcm91dGVyID0gdGhpcy5kZXRhaWxSb3V0ZXJzLmZpbmQoZSA9PiBlLmNvZGUuaW5kZXhPZihrZXkpICE9PSAtMSkNCiAgICAgIGxldCBoaWRkZW5FZGl0ID0gWw0KICAgICAgICAnc2dkd2h0cnlicycsDQogICAgICAgICdqbGR3aHRyeWJzJywNCiAgICAgICAgJ3F6ZHdodHJ5YnMnLA0KICAgICAgICAnc2dkd3J5YmcnLA0KICAgICAgICAnamxkd3J5YmcnLA0KICAgICAgICAncXpkd3J5YmcnLA0KICAgICAgICAnc2dkd3J5cWonLA0KICAgICAgICAnamxkd3J5cWonLA0KICAgICAgICAncXpkd3J5cWonDQogICAgICBdDQogICAgICBpZiAocm91dGVyKSB7DQogICAgICAgIHNldFRva2VuKCd0YXNrVHlwZScsIDQpDQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBwYXRoOiByb3V0ZXIucGF0aCwNCiAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgdGFza0lkOiByb3cudGFza0lkLA0KICAgICAgICAgICAgdGFza0tleTogcm93LnRhc2tLZXksDQogICAgICAgICAgICBidXNpbmVzc0tleTogcm93LmJ1c2luZXNzS2V5LA0KICAgICAgICAgICAgcHJvY2Vzc0RlZmluaXRpb25LZXk6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbktleSwNCiAgICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiByb3cucHJvY2Vzc0luc3RhbmNlSWQsDQogICAgICAgICAgICBwcm9jZXNzRGVmaW5pdGlvbklkOiByb3cucHJvY2Vzc0RlZmluaXRpb25JZCwNCiAgICAgICAgICAgIHRhc2tOYW1lOiByb3cudGFza05hbWUsDQogICAgICAgICAgICBmbG93RW50cnlOYW1lOiByb3cucHJvY2Vzc0RlZmluaXRpb25OYW1lLA0KICAgICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yOiByb3cucHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yLA0KICAgICAgICAgICAgaXNIaWRkZW5FZGl0OiBoaWRkZW5FZGl0LmluY2x1ZGVzKGtleSksDQogICAgICAgICAgICBmbG93S2V5OiBoaWRkZW5FZGl0LmluY2x1ZGVzKGtleSkgPyBrZXkgOiAnJw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIC8vIHRoaXMucm91dGVzLmZvckVhY2gocGFyZW50PT57DQogICAgICAvLyAJcGFyZW50WydjaGlsZHJlbiddLmZvckVhY2goY2hpbGQ9PnsNCiAgICAgIC8vIAkJaWYoY2hpbGRbJ21ldGEnXVsnY29kZSddPT1yb3dbJ2Zvcm1LZXknXVsncm91dGVyTmFtZSddKXsNCiAgICAgIC8vIAkJCXRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgIC8vIAkJCQlwYXRoOmNoaWxkWydwYXRoJ10rJ19kZXRhaWwnLA0KICAgICAgLy8gCQkJCXF1ZXJ5OnsNCiAgICAgIC8vIAkJCQkJdGFza0lkOiByb3cuZXhlY3V0aW9uSWQsDQogICAgICAvLyAJCQkJCWJ1c2luZXNzS2V5OnJvdy5idXNpbmVzc0tleSwNCiAgICAgIC8vIAkJCQkJcHJvY2Vzc0RlZmluaXRpb25LZXk6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbktleSwNCiAgICAgIC8vIAkJCQkJcHJvY2Vzc0luc3RhbmNlSWQ6IHJvdy5wcm9jZXNzSW5zdGFuY2VJZCwNCiAgICAgIC8vIAkJCQkJcHJvY2Vzc0RlZmluaXRpb25JZDogcm93LnByb2Nlc3NEZWZpbml0aW9uSWQsDQogICAgICAvLyAJCQkJCXRhc2tOYW1lOiByb3cudGFza05hbWUsDQogICAgICAvLyAJCQkJCWZsb3dFbnRyeU5hbWU6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbk5hbWUsDQogICAgICAvLyAJCQkJCXByb2Nlc3NJbnN0YW5jZUluaXRpYXRvcjogcm93LnByb2Nlc3NJbnN0YW5jZUluaXRpYXRvciwNCiAgICAgIC8vIAkJCQl9DQogICAgICAvLyAJCQl9KTsNCiAgICAgIC8vIAkJfQ0KICAgICAgLy8gCX0pDQogICAgICAvLyB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["copytask.vue"],"names":[],"mappings":";AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"copytask.vue","sourceRoot":"src/views/task","sourcesContent":["<!--\r\n * @Descripttion:监理巡视\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:15:44\r\n * @LastEditors: WangHarry\r\n * @LastEditTime: 2022-05-09 14:15:51\r\n-->\r\n<template>\r\n  <el-container class=\"container-box\">\r\n    <van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n      <van-swipe-cell\r\n        class=\"list\"\r\n        v-for=\"(item, index) in tableData\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"item\" style=\"\" @click=\"gotoHandle(item)\">\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">流程名称:</span>\r\n            <span class=\"block-value\">{{ item.processDefinitionName }}</span>\r\n          </div>\r\n          <!-- <div class=\"block\">\r\n            <span class=\"block-name\">流程标识:</span>\r\n            <span class=\"block-value\">{{ item.processDefinitionKey }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务名称:</span>\r\n            <span class=\"block-value\">{{ item.name }}</span>\r\n          </div> -->\r\n          <!-- <div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">执行操作</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.approvalType }}</span>\r\n\t\t\t\t\t\t</div> -->\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起人:</span>\r\n            <span class=\"block-value\">{{ item.createUsername }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起时间:</span>\r\n            <span class=\"block-value\">{{ item.createTime }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"gotoHandle(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n      </van-swipe-cell>\r\n    </van-list>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport * as api from '@/api/quality'\r\nimport { mapGetters } from 'vuex'\r\nimport { constantRouterMap } from '@/router/router.project.js'\r\nimport { setToken } from '@/utils/auth'\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: false,\r\n      finished: false,\r\n      queryData: {\r\n        // processDefinitionName:'',\r\n        // beginDate:'2021-05-15',\r\n        // endDate:'2022-05-15',\r\n        // taskHandleStatus:3,\r\n        orderParam: [{ fieldName: 'createTime', asc: 1 }],\r\n        pageParam: {\r\n          pageNum: 1,\r\n          totalPage: 1,\r\n          pageSize: 10\r\n        },\r\n        read: false\r\n      },\r\n      routes: null,\r\n      detailRouters: []\r\n    }\r\n  },\r\n  created() {\r\n    this.routes = this.menus\r\n    let detailRouter = constantRouterMap.find(e => e.name === 'handlerFlowTask')\r\n    this.detailRouters = detailRouter?.children\r\n  },\r\n  components: {},\r\n  computed: {\r\n    ...mapGetters(['menus']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 91 + 'px'\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.query();\r\n  },\r\n  methods: {\r\n    query() {\r\n      api.listCopyMessage(this.queryData).then(res => {\r\n        this.allData = res.data || {}\r\n        this.tableData = [...this.tableData, ...(this.allData['list'] || [])]\r\n\r\n        this.queryData.pageParam.pageNum = res.data.pageNum + 1\r\n        this.queryData.pageParam.totalPage = res.data.total || 1\r\n        this.queryData.pageParam.pageSize = res.data.pageSize || 10\r\n\r\n        // 加载状态结束\r\n        this.loading = false\r\n        // 数据全部加载完成\r\n        if (this.tableData.length >= res.data.total) {\r\n          this.finished = true\r\n        }\r\n      })\r\n    },\r\n    handleCurrentChange(page) {\r\n      this.queryData.pageParam.pageNum = page\r\n      this.query()\r\n    },\r\n    gotoHandle(row) {\r\n      // row['formKey'] = (typeof row['formKey']) == 'string' ? JSON.parse(row['formKey']) : row['formKey'];\r\n      let key = row['processDefinitionKey']\r\n      let router = this.detailRouters.find(e => e.code.indexOf(key) !== -1)\r\n      let hiddenEdit = [\r\n        'sgdwhtrybs',\r\n        'jldwhtrybs',\r\n        'qzdwhtrybs',\r\n        'sgdwrybg',\r\n        'jldwrybg',\r\n        'qzdwrybg',\r\n        'sgdwryqj',\r\n        'jldwryqj',\r\n        'qzdwryqj'\r\n      ]\r\n      if (router) {\r\n        setToken('taskType', 4)\r\n        this.$router.push({\r\n          path: router.path,\r\n          query: {\r\n            taskId: row.taskId,\r\n            taskKey: row.taskKey,\r\n            businessKey: row.businessKey,\r\n            processDefinitionKey: row.processDefinitionKey,\r\n            processInstanceId: row.processInstanceId,\r\n            processDefinitionId: row.processDefinitionId,\r\n            taskName: row.taskName,\r\n            flowEntryName: row.processDefinitionName,\r\n            processInstanceInitiator: row.processInstanceInitiator,\r\n            isHiddenEdit: hiddenEdit.includes(key),\r\n            flowKey: hiddenEdit.includes(key) ? key : ''\r\n          }\r\n        })\r\n      }\r\n      // this.routes.forEach(parent=>{\r\n      // \tparent['children'].forEach(child=>{\r\n      // \t\tif(child['meta']['code']==row['formKey']['routerName']){\r\n      // \t\t\tthis.$router.push({\r\n      // \t\t\t\tpath:child['path']+'_detail',\r\n      // \t\t\t\tquery:{\r\n      // \t\t\t\t\ttaskId: row.executionId,\r\n      // \t\t\t\t\tbusinessKey:row.businessKey,\r\n      // \t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n      // \t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n      // \t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n      // \t\t\t\t\ttaskName: row.taskName,\r\n      // \t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n      // \t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n      // \t\t\t\t}\r\n      // \t\t\t});\r\n      // \t\t}\r\n      // \t})\r\n      // })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.container-box {\r\n  color: #000000;\r\n  background-color: #fafafa;\r\n  height: 100%;\r\n  width: calc(100% + 1px);\r\n  overflow-y: auto;\r\n  .van-list {\r\n    width: 100%;\r\n    .list {\r\n      .item {\r\n        padding: 10px;\r\n        border: 1px solid rgba(0, 0, 0, 0.1);\r\n        border-radius: 5px;\r\n        margin: 5px;\r\n        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n        .block {\r\n          .block-value {\r\n            margin-left: 5px;\r\n          }\r\n        }\r\n      }\r\n      .van-button {\r\n        height: 100%;\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}