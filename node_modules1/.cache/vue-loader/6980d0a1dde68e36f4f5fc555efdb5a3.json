{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\security\\reportDeal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\security\\reportDeal.vue","mtime":1684246188051},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgVXBsb2FkIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vVXBsb2FkJw0KaW1wb3J0IHsgc3VibWl0RGVhbFdpdGhTYWZlRXZlbnQgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJw0KaW1wb3J0IHsgZm9ybWF0SVNPODYwMVRpbWUgfSBmcm9tICdAL3V0aWxzL2luZGV4Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgVXBsb2FkDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDkwICsgJ3B4Jw0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybWF0SVNPODYwMVRpbWUsDQogICAgICB1cmxMaXN0OiBbXSwNCiAgICAgIG1vZGlmeXJlbWFyazogJycsDQogICAgICBjdXJyZW50RGF0ZTogbmV3IERhdGUoKSwNCiAgICAgIG1vZGlmeWRhdGU6ICcnLA0KICAgICAgc2hvd1BpY2tlcjogZmFsc2UNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ29uZmlybSh0aW1lKSB7DQogICAgICB0aGlzLnNob3dQaWNrZXIgPSBmYWxzZQ0KICAgICAgdGhpcy5tb2RpZnlkYXRlID0gdGhpcy5mb3JtYXRJU084NjAxVGltZShuZXcgRGF0ZSh0aW1lKS50b0pTT04oKSkNCiAgICB9LA0KICAgIGluaXQoKSB7fSwNCiAgICBvblN1Ym1pdCh2YWx1ZXMpIHsNCiAgICAgIGxldCB0ZW1wID0gW10NCiAgICAgIHZhbHVlcy5tb2RpZnl1cmwuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS51cmwgJiYgdGVtcC5wdXNoKGl0ZW0udXJsKQ0KICAgICAgfSkNCiAgICAgIGlmICh2YWx1ZXMubW9kaWZ5dXJsLmxlbmd0aCAhPT0gdGVtcC5sZW5ndGgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG5vdGlmeSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+S4iuS8oOaWh+S7tuaIluetieW+heaWh+S7tuS4iuS8oOWujOaIkO+8gScgfSkNCiAgICAgIH0NCiAgICAgIHZhbHVlcy5tb2RpZnl1cmwgPSB0ZW1wLmpvaW4oJywnKQ0KICAgICAgdmFsdWVzLmV2ZW50aWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5ldmVudGlkDQogICAgICBzdWJtaXREZWFsV2l0aFNhZmVFdmVudCh2YWx1ZXMpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRSZWFsdGltZU1lc3NhZ2UnKQ0KICAgICAgICB0aGlzLiR0b2FzdCgn5aSE55CG5oiQ5YqfJykNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["reportDeal.vue"],"names":[],"mappings":";AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reportDeal.vue","sourceRoot":"src/views/project/security","sourcesContent":["<template>\r\n  <div class=\"report-deal\">\r\n    <van-form @submit=\"onSubmit\" class=\"common-card\" :style=\"{ height: scrollerHeight }\">\r\n      <van-field\r\n        v-model=\"modifydate\"\r\n        is-link\r\n        readonly\r\n        name=\"modifydate\"\r\n        label=\"整改时间\"\r\n        placeholder=\"点击选择时间\"\r\n        @click=\"showPicker = true\"\r\n        :rules=\"[{ required: true, message: '请选择时间' }]\"\r\n      />\r\n      <upload\r\n        :fileList=\"[]\"\r\n        label=\"整改照片\"\r\n        name=\"modifyurl\"\r\n        :rules=\"[{ required: true, message: '请选择整改照片' }]\"\r\n      ></upload>\r\n      <van-field v-model=\"modifyremark\" name=\"modifyremark\" label=\"整改备注\" placeholder=\"整改备注\" />\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n    <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n      <van-datetime-picker v-model=\"currentDate\" type=\"datetime\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Upload from '@/components/common/Upload'\r\nimport { submitDealWithSafeEvent } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nexport default {\r\n  components: {\r\n    Upload\r\n  },\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 90 + 'px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      formatISO8601Time,\r\n      urlList: [],\r\n      modifyremark: '',\r\n      currentDate: new Date(),\r\n      modifydate: '',\r\n      showPicker: false\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    onConfirm(time) {\r\n      this.showPicker = false\r\n      this.modifydate = this.formatISO8601Time(new Date(time).toJSON())\r\n    },\r\n    init() {},\r\n    onSubmit(values) {\r\n      let temp = []\r\n      values.modifyurl.forEach(item => {\r\n        item.url && temp.push(item.url)\r\n      })\r\n      if (values.modifyurl.length !== temp.length) {\r\n        return this.$notify({ type: 'warning', message: '请上传文件或等待文件上传完成！' })\r\n      }\r\n      values.modifyurl = temp.join(',')\r\n      values.eventid = this.$route.query.eventid\r\n      submitDealWithSafeEvent(values).then(data => {\r\n        this.$store.dispatch('getRealtimeMessage')\r\n        this.$toast('处理成功')\r\n        this.$router.go(-1)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}