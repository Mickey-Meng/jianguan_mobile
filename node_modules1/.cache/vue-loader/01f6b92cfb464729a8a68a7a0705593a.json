{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\agencytask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\agencytask.vue","mtime":1684246188054},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCAqIGFzIGFwaSBmcm9tICdAL2FwaS9xdWFsaXR5Jw0KLy8gICBpbXBvcnQge2NvbnN0YW50Um91dGVzfSBmcm9tICJAL3JvdXRlci9yb3V0ZXIiOw0KLy8gY29uc3QgeyBjb25zdGFudFJvdXRlcyB9ID0gcmVxdWlyZShgQC9yb3V0ZXIvcm91dGVyLiR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9UWVBFfWApDQppbXBvcnQgeyBjb25zdGFudFJvdXRlck1hcCB9IGZyb20gJ0Avcm91dGVyL3JvdXRlci5wcm9qZWN0LmpzJw0KaW1wb3J0IHsgc2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KICAgICAgcXVlcnlEYXRhOiB7DQogICAgICAgIHByb2Nlc3NEZWZpbml0aW9uTmFtZTogJycsDQogICAgICAgIHByb2Nlc3NEZWZpbml0aW9uS2V5OiAnJywNCiAgICAgICAgdGFza05hbWU6ICcnLA0KICAgICAgICB0YXNrSGFuZGxlU3RhdHVzOiAxLA0KICAgICAgICBwYWdlUGFyYW06IHsNCiAgICAgICAgICBwYWdlTnVtOiAwLA0KICAgICAgICAgIHRvdGFsUGFnZTogMSwNCiAgICAgICAgICBwYWdlU2l6ZTogMTANCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHJvdXRlczogbnVsbCwNCiAgICAgIGRldGFpbFJvdXRlcnM6IFtdDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucm91dGVzID0gdGhpcy5tZW51cw0KICAgIGNvbnNvbGUubG9nKGNvbnN0YW50Um91dGVyTWFwKQ0KICAgIGxldCBkZXRhaWxSb3V0ZXIgPSBjb25zdGFudFJvdXRlck1hcC5maW5kKGUgPT4gZS5uYW1lID09PSAnaGFuZGxlckZsb3dUYXNrJykNCiAgICB0aGlzLmRldGFpbFJvdXRlcnMgPSBkZXRhaWxSb3V0ZXI/LmNoaWxkcmVuDQogIH0sDQogIGNvbXBvbmVudHM6IHt9LA0KICBjb21wdXRlZDogew0KICAgIHNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gOTEgKyAncHgnDQogICAgfSwNCiAgICAuLi5tYXBHZXR0ZXJzKFsnbWVudXMnXSkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvLyB0aGlzLnF1ZXJ5KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHF1ZXJ5KCkgew0KICAgICAgICB0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0ucGFnZU51bSsrOw0KICAgICAgYXBpLmxpc3RIYW5kbGVUYXNrKHRoaXMucXVlcnlEYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuYWxsRGF0YSA9IHJlcy5kYXRhIHx8IHt9DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gWy4uLnRoaXMudGFibGVEYXRhLC4uLnRoaXMuYWxsRGF0YS5saXN0IHx8IFtdXQ0KICAgICAgICB0aGlzLnF1ZXJ5RGF0YS5wYWdlUGFyYW0ucGFnZU51bSA9IHJlcy5kYXRhLnBhZ2VOdW0NCiAgICAgICAgdGhpcy5xdWVyeURhdGEucGFnZVBhcmFtLnRvdGFsUGFnZSA9IHJlcy5kYXRhLnRvdGFsDQogICAgICAgIHRoaXMucXVlcnlEYXRhLnBhZ2VQYXJhbS5wYWdlU2l6ZSA9IHJlcy5kYXRhLnBhZ2VTaXplDQoNCiAgICAgICAgLy8g5Yqg6L2954q25oCB57uT5p2fDQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAvLyDmlbDmja7lhajpg6jliqDovb3lrozmiJANCiAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA+PSByZXMuZGF0YS50b3RhbCkgew0KICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlKSB7DQogICAgICB0aGlzLnF1ZXJ5RGF0YS5wYWdlTnVtID0gcGFnZQ0KICAgICAgdGhpcy5xdWVyeSgpDQogICAgfSwNCiAgICBnb3RvSGFuZGxlKHJvdykgew0KICAgICAgcm93Wyd0YXNrRm9ybUtleSddID0gdHlwZW9mIHJvd1sndGFza0Zvcm1LZXknXSA9PSAnc3RyaW5nJyA/IEpTT04ucGFyc2Uocm93Wyd0YXNrRm9ybUtleSddKSA6IHJvd1sndGFza0Zvcm1LZXknXQ0KICAgICAgbGV0IGtleSA9IHJvd1sndGFza0Zvcm1LZXknXVsncm91dGVyTmFtZSddDQogICAgICBsZXQgcm91dGVyID0gdGhpcy5kZXRhaWxSb3V0ZXJzLmZpbmQoZSA9PiBlLmNvZGUuaW5kZXhPZihrZXkpICE9PSAtMSkNCiAgICAgIGxldCBoaWRkZW5FZGl0ID0gWw0KICAgICAgICAnc2dkd2h0cnlicycsDQogICAgICAgICdqbGR3aHRyeWJzJywNCiAgICAgICAgJ3F6ZHdodHJ5YnMnLA0KICAgICAgICAnc2dkd3J5YmcnLA0KICAgICAgICAnamxkd3J5YmcnLA0KICAgICAgICAncXpkd3J5YmcnLA0KICAgICAgICAnc2dkd3J5cWonLA0KICAgICAgICAnamxkd3J5cWonLA0KICAgICAgICAncXpkd3J5cWonDQogICAgICBdDQogICAgICBpZiAocm91dGVyKSB7DQogICAgICAgIHNldFRva2VuKCd0YXNrVHlwZScsIDEpDQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBwYXRoOiByb3V0ZXIucGF0aCwNCiAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgdGFza0lkOiByb3cudGFza0lkLA0KICAgICAgICAgICAgdGFza0tleTogcm93LnRhc2tLZXksDQogICAgICAgICAgICBidXNpbmVzc0tleTogcm93LmJ1c2luZXNzS2V5LA0KICAgICAgICAgICAgcHJvY2Vzc0RlZmluaXRpb25LZXk6IHJvdy5wcm9jZXNzRGVmaW5pdGlvbktleSwNCiAgICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiByb3cucHJvY2Vzc0luc3RhbmNlSWQsDQogICAgICAgICAgICBwcm9jZXNzRGVmaW5pdGlvbklkOiByb3cucHJvY2Vzc0RlZmluaXRpb25JZCwNCiAgICAgICAgICAgIHRhc2tOYW1lOiByb3cudGFza05hbWUsDQogICAgICAgICAgICBmbG93RW50cnlOYW1lOiByb3cucHJvY2Vzc0RlZmluaXRpb25OYW1lLA0KICAgICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yOiByb3cucHJvY2Vzc0luc3RhbmNlSW5pdGlhdG9yLA0KICAgICAgICAgICAgaXNIaWRkZW5FZGl0OiBoaWRkZW5FZGl0LmluY2x1ZGVzKGtleSksDQogICAgICAgICAgICBmbG93S2V5OiBoaWRkZW5FZGl0LmluY2x1ZGVzKGtleSkgPyBrZXkgOiAnJw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIC8vIHRoaXMucm91dGVzLmZvckVhY2gocGFyZW50ID0+IHsNCiAgICAgIC8vICAgcGFyZW50WyJjaGlsZHJlbiJdLmZvckVhY2goY2hpbGQgPT4gew0KICAgICAgLy8gICAgIGlmIChjaGlsZFsibWV0YSJdWyJjb2RlIl0gPT0gcm93WyJ0YXNrRm9ybUtleSJdWyJyb3V0ZXJOYW1lIl0pIHsNCiAgICAgIC8vICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgIC8vICAgICAgICAgcGF0aDogY2hpbGRbInBhdGgiXSArICJfZGV0YWlsIiwNCiAgICAgIC8vICAgICAgICAgcXVlcnk6IHsNCiAgICAgIC8vICAgICAgICAgICB0YXNrSWQ6IHJvdy50YXNrSWQsDQogICAgICAvLyAgICAgICAgICAgYnVzaW5lc3NLZXk6IHJvdy5idXNpbmVzc0tleSwNCiAgICAgIC8vICAgICAgICAgICBwcm9jZXNzRGVmaW5pdGlvbktleTogcm93LnByb2Nlc3NEZWZpbml0aW9uS2V5LA0KICAgICAgLy8gICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiByb3cucHJvY2Vzc0luc3RhbmNlSWQsDQogICAgICAvLyAgICAgICAgICAgcHJvY2Vzc0RlZmluaXRpb25JZDogcm93LnByb2Nlc3NEZWZpbml0aW9uSWQsDQogICAgICAvLyAgICAgICAgICAgdGFza05hbWU6IHJvdy50YXNrTmFtZSwNCiAgICAgIC8vICAgICAgICAgICBmbG93RW50cnlOYW1lOiByb3cucHJvY2Vzc0RlZmluaXRpb25OYW1lLA0KICAgICAgLy8gICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUluaXRpYXRvcjogcm93LnByb2Nlc3NJbnN0YW5jZUluaXRpYXRvcg0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICB9KTsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0pOw0KICAgICAgLy8gfSk7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["agencytask.vue"],"names":[],"mappings":";AAqEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"agencytask.vue","sourceRoot":"src/views/task","sourcesContent":["<!--\r\n * @Descripttion:待办任务\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:12:16\r\n * @LastEditors: WangHarry\r\n * @LastEditTime: 2022-05-09 14:12:22\r\n-->\r\n<template>\r\n  <div class=\"container-box\">\r\n    <!-- <el-header>\r\n\t\t\t<div class=\"input-box\">\r\n\t\t\t\t<div class=\"input-value\">\r\n\t\t\t\t\t<el-input v-model=\"queryData.processDefinitionName\" placeholder=\"请输入流程名称\"></el-input>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-box\">\r\n\t\t\t\t<div class=\"input-value\">\r\n\t\t\t\t\t<el-input v-model=\"queryData.processDefinitionKey\" placeholder=\"请输入流程标识\"></el-input>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-box\">\r\n\t\t\t\t<div class=\"input-value\">\r\n\t\t\t\t\t<el-input  v-model=\"queryData.taskName\" placeholder=\"请输入任务名称\"></el-input>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<el-button type=\"primary\" @click=\"query\">搜索</el-button>\r\n\t\t</el-header> -->\r\n    <van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n      <van-swipe-cell\r\n        class=\"list\"\r\n        v-for=\"(item, index) in tableData\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"item\" style=\"\" @click=\"gotoHandle(item)\">\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">流程名称：</span>\r\n            <span class=\"block-value\" style=\"margin-left: unset;\">{{ item.processDefinitionName }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">当前任务：</span>\r\n            <span class=\"block-value\" style=\"margin-left: unset;\">{{ item.taskName }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起人：</span>\r\n            <span class=\"block-value\" style=\"margin-left: unset;\">{{ item.processInstanceInitiatorName }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起时间：</span>\r\n            <span class=\"block-value\" style=\"margin-left: unset;\">{{ item.processInstanceStartTime }}</span>\r\n          </div>\r\n          <!-- <div class=\"operate center-in-vertical\">\r\n\t\t\t\t\t\t\t<img v-if=\"item.checkresult === 3\" :src=\"require(`assets/image/待审核.png`)\" />\r\n\t\t\t\t\t\t\t<img v-if=\"item.checkresult === 1\" :src=\"require(`assets/image/已通过.png`)\" />\r\n\t\t\t\t\t\t\t<img v-if=\"item.checkresult === 2\" :src=\"require(`assets/image/已驳回.png`)\" />\r\n\t\t\t\t\t\t</div> -->\r\n        </div>\r\n\r\n        <!-- <template #right>\r\n          <van-button square type=\"primary\" text=\"办理\" @click=\"gotoHandle(item)\" />\r\n        </template> -->\r\n      </van-swipe-cell>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport * as api from '@/api/quality'\r\n//   import {constantRoutes} from \"@/router/router\";\r\n// const { constantRoutes } = require(`@/router/router.${process.env.VUE_APP_TYPE}`)\r\nimport { constantRouterMap } from '@/router/router.project.js'\r\nimport { setToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: false,\r\n      finished: false,\r\n      queryData: {\r\n        processDefinitionName: '',\r\n        processDefinitionKey: '',\r\n        taskName: '',\r\n        taskHandleStatus: 1,\r\n        pageParam: {\r\n          pageNum: 0,\r\n          totalPage: 1,\r\n          pageSize: 10\r\n        }\r\n      },\r\n      routes: null,\r\n      detailRouters: []\r\n    }\r\n  },\r\n  created() {\r\n    this.routes = this.menus\r\n    console.log(constantRouterMap)\r\n    let detailRouter = constantRouterMap.find(e => e.name === 'handlerFlowTask')\r\n    this.detailRouters = detailRouter?.children\r\n  },\r\n  components: {},\r\n  computed: {\r\n    scrollerHeight: function () {\r\n      return window.innerHeight - 91 + 'px'\r\n    },\r\n    ...mapGetters(['menus'])\r\n  },\r\n  mounted() {\r\n    // this.query()\r\n  },\r\n  methods: {\r\n    query() {\r\n        this.queryData.pageParam.pageNum++;\r\n      api.listHandleTask(this.queryData).then(res => {\r\n        this.allData = res.data || {}\r\n        this.tableData = [...this.tableData,...this.allData.list || []]\r\n        this.queryData.pageParam.pageNum = res.data.pageNum\r\n        this.queryData.pageParam.totalPage = res.data.total\r\n        this.queryData.pageParam.pageSize = res.data.pageSize\r\n\r\n        // 加载状态结束\r\n        this.loading = false;\r\n        // 数据全部加载完成\r\n        if (this.tableData.length >= res.data.total) {\r\n          this.finished = true;\r\n        }\r\n      })\r\n    },\r\n    handleCurrentChange(page) {\r\n      this.queryData.pageNum = page\r\n      this.query()\r\n    },\r\n    gotoHandle(row) {\r\n      row['taskFormKey'] = typeof row['taskFormKey'] == 'string' ? JSON.parse(row['taskFormKey']) : row['taskFormKey']\r\n      let key = row['taskFormKey']['routerName']\r\n      let router = this.detailRouters.find(e => e.code.indexOf(key) !== -1)\r\n      let hiddenEdit = [\r\n        'sgdwhtrybs',\r\n        'jldwhtrybs',\r\n        'qzdwhtrybs',\r\n        'sgdwrybg',\r\n        'jldwrybg',\r\n        'qzdwrybg',\r\n        'sgdwryqj',\r\n        'jldwryqj',\r\n        'qzdwryqj'\r\n      ]\r\n      if (router) {\r\n        setToken('taskType', 1)\r\n        this.$router.push({\r\n          path: router.path,\r\n          query: {\r\n            taskId: row.taskId,\r\n            taskKey: row.taskKey,\r\n            businessKey: row.businessKey,\r\n            processDefinitionKey: row.processDefinitionKey,\r\n            processInstanceId: row.processInstanceId,\r\n            processDefinitionId: row.processDefinitionId,\r\n            taskName: row.taskName,\r\n            flowEntryName: row.processDefinitionName,\r\n            processInstanceInitiator: row.processInstanceInitiator,\r\n            isHiddenEdit: hiddenEdit.includes(key),\r\n            flowKey: hiddenEdit.includes(key) ? key : ''\r\n          }\r\n        })\r\n      }\r\n      // this.routes.forEach(parent => {\r\n      //   parent[\"children\"].forEach(child => {\r\n      //     if (child[\"meta\"][\"code\"] == row[\"taskFormKey\"][\"routerName\"]) {\r\n      //       this.$router.push({\r\n      //         path: child[\"path\"] + \"_detail\",\r\n      //         query: {\r\n      //           taskId: row.taskId,\r\n      //           businessKey: row.businessKey,\r\n      //           processDefinitionKey: row.processDefinitionKey,\r\n      //           processInstanceId: row.processInstanceId,\r\n      //           processDefinitionId: row.processDefinitionId,\r\n      //           taskName: row.taskName,\r\n      //           flowEntryName: row.processDefinitionName,\r\n      //           processInstanceInitiator: row.processInstanceInitiator\r\n      //         }\r\n      //       });\r\n      //     }\r\n      //   });\r\n      // });\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n// @import \"../../assets/css/table.scss\"\r\n.container-box {\r\n  color: #000000;\r\n  background-color: #fafafa;\r\n  height: 100%;\r\n  width: calc(100% + 1px);\r\n  overflow-y: auto;\r\n  .list {\r\n    .item {\r\n      padding: 10px;\r\n      border: 1px solid rgba(0, 0, 0, 0.1);\r\n      border-radius: 5px;\r\n      margin: 5px;\r\n      box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n    }\r\n    .van-button {\r\n      height: 100%;\r\n      border-radius: 5px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}