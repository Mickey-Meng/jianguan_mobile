{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\contract\\personnelChangeAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\contract\\personnelChangeAdd.vue","mtime":1684246187999},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IGdldE5vd0RhdGUgfSBmcm9tICdAL3V0aWxzL2RhdGUuanMnDQppbXBvcnQgeyBnZXRSb2xlSW5mb0J5VXNlcklkLCBnZXRVc2VyUm9sZUFuZENvZGUsIGFkZFBlcnNvbkNoYW5nZSB9IGZyb20gJ0AvYXBpL3Byb2plY3QnDQppbXBvcnQgeyBzdWJtaXRVc2VyVGFzaywgbGlzdEZsb3dUYXNrQ29tbWVudCB9IGZyb20gJ0AvYXBpL3F1YWxpdHknDQppbXBvcnQgeyBsb29rVXJsIH0gZnJvbSAnQC91dGlscy9pbmRleCcNCmltcG9ydCBVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9VcGxvYWQnDQppbXBvcnQgYXBwcm92ZXVzZXIgZnJvbSAnQC92aWV3cy9jb21tb24vYXBwcm92ZXVzZXIudnVlJw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWydjdXJyZW50Qmlhb0R1YW4nLCAndXNlcmluZm8nLCAnY3VyUHJvamVjdCddKSwNCiAgICBzY3JvbGxlckhlaWdodDogZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gODUgKyAncHgnDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgVXBsb2FkLA0KICAgIGFwcHJvdmV1c2VyDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFkZDogdHJ1ZSwNCiAgICAgIGZvcm1EYXRhOiB7fSwNCiAgICAgIHNob3dDaGFuZ2VUeXBlOiBmYWxzZSwNCiAgICAgIHNob3dCZWZvcmVQZXJzb246IGZhbHNlLA0KICAgICAgc2hvd0FmdGVyUGVyc29uOiBmYWxzZSwNCiAgICAgIGNoYW5nZVR5cGVMaXN0OiBbXSwgLy/kurrlkZjlj5jmm7TnsbvlnosNCiAgICAgIGJlZm9yZVVzZXJzOiBbXSwgLy/lj5jmm7TliY3kurrlkZgNCiAgICAgIGFmdGVyVXNlcnM6IFtdLCAvL+WPmOabtOWQjuS6uuWRmA0KDQogICAgICByb2xlSW5mb0xpc3Q6IFtdLA0KDQogICAgICBmaWxlTGlzdDogW10sDQogICAgICBwaWNGaWxlZDogJ2ZpbGVzJywNCg0KICAgICAgLy8gZmxvd1R5cGVzOiBbDQogICAgICAvLyAgIHsNCiAgICAgIC8vICAgICBrZXk6ICdzaGlnb25namloZScsIC8v5pa95bel5Y2V5L2N5Lq65ZGY5Y+Y5pu0DQogICAgICAvLyAgICAgZmxvd0tleTogJ3NnZHdyeWJnJw0KICAgICAgLy8gICB9LA0KICAgICAgLy8gICB7DQogICAgICAvLyAgICAga2V5OiAnamlhbmxpamloZScsIC8v55uR55CG5Y2V5L2N5ZCI5ZCM5Lq65ZGY5oql5a6hDQogICAgICAvLyAgICAgZmxvd0tleTogJ2psZHdyeWJnJw0KICAgICAgLy8gICB9LA0KICAgICAgLy8gICB7DQogICAgICAvLyAgICAga2V5OiAncXVhbnppamloZScsIC8v55uR55CG5Y2V5L2N5ZCI5ZCM5Lq65ZGY5oql5a6hDQogICAgICAvLyAgICAgZmxvd0tleTogJ3F6ZHdyeWJnJw0KICAgICAgLy8gICB9DQogICAgICAvLyBdLA0KICAgICAgLy8gdXNlclJvbGVQYXJlbnRDb2RlOiAnJywNCiAgICAgIGxvZ0RhdGE6IFtdLA0KICAgICAgYXVkaXRVc2VyOiB7fSwNCiAgICAgIGZsb3dLZXk6ICcnDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmZsb3dLZXkpIHsNCiAgICAgIHRoaXMuYWRkID0gZmFsc2UNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSB0aGlzLmZvcm1hdEltZ1VybCh0aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZXMpDQogICAgICB0aGlzLmZvcm1EYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy4kcm91dGUucGFyYW1zKQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBpZiAoIXRoaXMuJHJvdXRlLnBhcmFtcy5mbG93S2V5KSB7DQogICAgICB0aGlzLmFkZCA9IGZhbHNlDQogICAgICAvLyB0aGlzLmZvcm1EYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy4kcm91dGUucGFyYW1zKQ0KICAgICAgdGhpcy5saXN0Rmxvd1Rhc2tDb21tZW50KCkNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5mbG93S2V5ID0gdGhpcy4kcm91dGUucGFyYW1zLmZsb3dLZXkNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgICB0aGlzLmluaXRGb3JtKCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0KCkgew0KICAgICAgZ2V0Um9sZUluZm9CeVVzZXJJZCh7IHByb2plY3RpZDogdGhpcy5jdXJyZW50Qmlhb0R1YW4uaWQgfSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnJvbGVJbmZvTGlzdCA9IHJlcw0KICAgICAgICB0aGlzLmNoYW5nZVR5cGVMaXN0ID0gW10NCiAgICAgICAgaWYgKHJlcyAmJiByZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMpKQ0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgZGF0YS5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5yb2xlaWQgPT09IGRhdGFbal0ucm9sZWlkKSB7DQogICAgICAgICAgICAgICAgZGF0YS5zcGxpY2UoaiwgMSkNCiAgICAgICAgICAgICAgICBqLS0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICB0aGlzLmNoYW5nZVR5cGVMaXN0LnB1c2goew0KICAgICAgICAgICAgICBuYW1lOiBpdGVtLnJvbGVuYW1lLA0KICAgICAgICAgICAgICByb2xlaWQ6IGl0ZW0ucm9sZWlkDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAvL+iOt+WPlueUqOaIt+inkuiJsg0KICAgICAgLy8gZ2V0VXNlclJvbGVBbmRDb2RlKHsgcHJvamVjdElkOiB0aGlzLmN1cnJlbnRCaWFvRHVhbi5pZCB9KS50aGVuKHJlcyA9PiB7DQogICAgICAvLyAgIGlmIChyZXMpIHsNCiAgICAgIC8vICAgICB0aGlzLnVzZXJSb2xlUGFyZW50Q29kZSA9IHJlcy5wYXJlbnRDb2RlDQogICAgICAvLyAgIH0NCiAgICAgIC8vIH0pDQogICAgfSwNCiAgICBpbml0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSB7DQogICAgICAgIGFmdGVyQ29kZTogJycsIC8v5Y+Y5pu05ZCO77yI5omn5Lia77yJ6LWE5qC86K+B5Lmm5Y+3DQogICAgICAgIGFmdGVyUGVyc29uOiAnJywgLy/lj5jmm7TlkI7kurrlkZjlkI0NCiAgICAgICAgYWZ0ZXJQZXJzb25JZDogbnVsbCwgLy/lj5jmm7TlkI7kurrlkZhpZA0KICAgICAgICBiZWZvcmVDb2RlOiAnJywgLy/lj5jmm7TliY3vvIjmiafkuJrvvInotYTmoLzor4Hkuablj7cNCiAgICAgICAgYmVmb3JlUGVyc29uOiAnJywgLy/lj5jmm7TliY3kurrlkZjlkI0NCiAgICAgICAgYmVmb3JlUGVyc29uSWQ6IG51bGwsIC8v5Y+Y5pu05YmN5Lq65ZGYaWQNCiAgICAgICAgY2hhbmdlUG9zdDogbnVsbCwgLy/lj5jmm7TlspfkvY1pZA0KICAgICAgICBjaGFuZ2VQb3N0TmFtZTogJycsIC8v5Y+Y5pu05bKX5L2N5ZCNDQogICAgICAgIGNoYW5nZVJlYXNvbjogJycsIC8v5Y+Y5pu05Y6f5ZugDQogICAgICAgIGNoYW5nZVR5cGU6IG51bGwsIC8v6KeS6ImyaWQNCiAgICAgICAgY2hhbmdlVHlwZU5hbWU6ICcnLCAvL+inkuiJsuWQjQ0KICAgICAgICBjaGFuZ2VVbml0OiB0aGlzLnVzZXJpbmZvLmdyb3VwaWQsIC8v57uE57uHaWQNCiAgICAgICAgY2hhbmdlVW5pdE5hbWU6IHRoaXMudXNlcmluZm8uZ3JvdXBuYW1lLCAvL+e7hOe7h+WQjQ0KICAgICAgICBwcm9qZWN0Q2hpbGRJZDogdGhpcy5jdXJyZW50Qmlhb0R1YW4uaWQsIC8v6aG555uu5qCH5q61aWQNCiAgICAgICAgcHJvamVjdENoaWxkTmFtZTogdGhpcy5jdXJyZW50Qmlhb0R1YW4ubmFtZSwgLy/pobnnm67moIfmrrXlkI0NCiAgICAgICAgcHJvamVjdElkOiB0aGlzLmN1clByb2plY3QuaWQsIC8v6aG555uuaWQNCiAgICAgICAgcHJvamVjdE5hbWU6IHRoaXMuY3VyUHJvamVjdC5uYW1lLCAvL+mhueebruWQjQ0KICAgICAgICByZWNvcmRJZDogdGhpcy51c2VyaW5mby5pZCwgLy/lj5jmm7Tlj5HotbfkurppZA0KICAgICAgICByZWNvcmRlcjogdGhpcy51c2VyaW5mby5uYW1lLCAvL+WPmOabtOWPkei1t+S6uuWQjQ0KICAgICAgICBzdWJEYXRlOiBnZXROb3dEYXRlKCkgLy/lj5jmm7Tlj5Hotbfml7bpl7QNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uQ2hhbmdlVHlwZVNlbGVjdChpdGVtKSB7DQogICAgICB0aGlzLnNob3dDaGFuZ2VUeXBlID0gZmFsc2UNCiAgICAgIHRoaXMuZm9ybURhdGEuY2hhbmdlVHlwZSA9IGl0ZW0ucm9sZWlkDQogICAgICB0aGlzLmZvcm1EYXRhLmNoYW5nZVR5cGVOYW1lID0gaXRlbS5uYW1lDQoNCiAgICAgIHRoaXMuZm9ybURhdGEuY2hhbmdlUG9zdCA9IGl0ZW0ucm9sZWlkIC8v5Y+Y5pu05bKX5L2NaWQNCiAgICAgIHRoaXMuZm9ybURhdGEuY2hhbmdlUG9zdE5hbWUgPSBpdGVtLm5hbWUgLy/lj5jmm7TlspfkvY3lkI0NCg0KICAgICAgdGhpcy5iZWZvcmVVc2VycyA9IHRoaXMucm9sZUluZm9MaXN0LmZpbHRlcihlID0+IGUucm9sZWlkID09PSBpdGVtLnJvbGVpZCkNCiAgICAgIHRoaXMuYWZ0ZXJVc2VycyA9IHRoaXMucm9sZUluZm9MaXN0LmZpbHRlcihlID0+IGUucm9sZWlkICE9PSBpdGVtLnJvbGVpZCkNCg0KICAgICAgdGhpcy5mb3JtRGF0YS5iZWZvcmVQZXJzb24gPSAnJw0KICAgICAgdGhpcy5mb3JtRGF0YS5iZWZvcmVQZXJzb25JZCA9IG51bGwNCiAgICAgIHRoaXMuZm9ybURhdGEuYWZ0ZXJQZXJzb24gPSAnJw0KICAgICAgdGhpcy5mb3JtRGF0YS5hZnRlclBlcnNvbklkID0gbnVsbA0KICAgIH0sDQogICAgb25DaGFuZ2VCZWZvcmVQZXJzb24oaXRlbSkgew0KICAgICAgdGhpcy5zaG93QmVmb3JlUGVyc29uID0gZmFsc2UNCiAgICAgIHRoaXMuZm9ybURhdGEuYmVmb3JlUGVyc29uID0gaXRlbS5uYW1lDQogICAgICB0aGlzLmZvcm1EYXRhLmJlZm9yZVBlcnNvbklkID0gaXRlbS5pZA0KICAgIH0sDQogICAgb25DaGFuZ2VBZnRlclBlcnNvbihpdGVtKSB7DQogICAgICB0aGlzLnNob3dBZnRlclBlcnNvbiA9IGZhbHNlDQogICAgICB0aGlzLmZvcm1EYXRhLmFmdGVyUGVyc29uID0gaXRlbS5uYW1lDQogICAgICB0aGlzLmZvcm1EYXRhLmFmdGVyUGVyc29uSWQgPSBpdGVtLmlkDQogICAgfSwNCiAgICBvblN1Ym1pdCh2YWx1ZXMpIHsNCiAgICAgIC8vIGlmICghdGhpcy51c2VyUm9sZVBhcmVudENvZGUpIHsNCiAgICAgIC8vICAgcmV0dXJuIHRoaXMuJG5vdGlmeSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+mFjee9rumUmeivr+OAgeaXoOazleiOt+WPluWuoeaJuea1geeoi++8jOivt+iBlOezu+euoeeQhuWRmO+8gScgfSkNCiAgICAgIC8vIH0NCiAgICAgIC8vIGxldCBmbG93T2JqID0gdGhpcy5mbG93VHlwZXMuZmluZChlID0+IGUua2V5ID09PSB0aGlzLnVzZXJSb2xlUGFyZW50Q29kZSkNCiAgICAgIC8vIGlmICghZmxvd09iaikgew0KICAgICAgLy8gICByZXR1cm4gdGhpcy4kbm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6YWN572u6ZSZ6K+v44CB5peg5rOV6I635Y+W5a6h5om55rWB56iL77yM6K+36IGU57O7566h55CG5ZGY77yBJyB9KQ0KICAgICAgLy8gfQ0KICAgICAgbGV0IHRlbXAgPSBbXQ0KICAgICAgdmFsdWVzW3RoaXMucGljRmlsZWRdLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGl0ZW0udXJsICYmDQogICAgICAgICAgdGVtcC5wdXNoKHsNCiAgICAgICAgICAgIGZpbGVOYW1lOiBpdGVtLmZpbGUubmFtZSwNCiAgICAgICAgICAgIGZpbGVJZDogaXRlbS51cmwsDQogICAgICAgICAgICB1cGxvYWRQZXJzb246IHRoaXMudXNlcmluZm8ubmFtZSwNCiAgICAgICAgICAgIHVwbG9hZFBlcnNvbklkOiB0aGlzLnVzZXJpbmZvLmlkLA0KICAgICAgICAgICAgdXBsb2FkVGltZTogdGhpcy5tb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOlNTJykNCiAgICAgICAgICB9KQ0KICAgICAgfSkNCg0KICAgICAgaWYgKHZhbHVlc1t0aGlzLnBpY0ZpbGVkXS5sZW5ndGggIT09IHRlbXAubGVuZ3RoKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRub3RpZnkoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fkuIrkvKDnhafniYfmiJbnrYnlvoXnhafniYfkuIrkvKDlrozmiJDvvIEnIH0pDQogICAgICB9DQogICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5mb3JtRGF0YSkNCiAgICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHsNCiAgICAgICAgb2JqLmZpbGVzID0gdGVtcA0KICAgICAgfQ0KICAgICAgb2JqLnByb2Nlc3NEZWZpbml0aW9uS2V5ID0gdGhpcy5mbG93S2V5DQogICAgICBjb25zb2xlLmxvZyhvYmopDQogICAgICBhZGRQZXJzb25DaGFuZ2Uob2JqKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuaXNzdWVTdGVwKHJlcykNCiAgICAgIH0pDQogICAgfSwNCiAgICBpc3N1ZVN0ZXAoZGF0YSkgew0KICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgY29weURhdGE6IHt9LA0KICAgICAgICBmbG93VGFza0NvbW1lbnREdG86IHsNCiAgICAgICAgICBhcHByb3ZhbFR5cGU6ICcnLA0KICAgICAgICAgIGNvbW1lbnQ6ICcnLA0KICAgICAgICAgIGRlbGVnYXRlQXNzZ2luZWU6ICcnDQogICAgICAgIH0sDQogICAgICAgIG1hc3RlckRhdGE6IHt9LA0KICAgICAgICBwcm9jZXNzSW5zdGFuY2VJZDogZGF0YSwNCiAgICAgICAgc2xhdmVEYXRhOiB7fSwNCiAgICAgICAgdGFza0lkOiAnJywNCiAgICAgICAgdGFza1ZhcmlhYmxlRGF0YToge30NCiAgICAgIH0NCiAgICAgIHN1Ym1pdFVzZXJUYXNrKG9iaikudGhlbihyZXMxID0+IHsNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsgdHlwZTogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiAn5aGr5oql5oiQ5Yqf77yBJyB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGxpc3RGbG93VGFza0NvbW1lbnQoKSB7DQogICAgICBsaXN0Rmxvd1Rhc2tDb21tZW50KHsgcHJvY2Vzc0luc3RhbmNlSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5wcm9jZXNzSW5zdGFuY2VJZCB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMubG9nRGF0YSA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgZm9ybWF0SW1nVXJsKGFycikgew0KICAgICAgbGV0IHVybHMgPSBbXQ0KICAgICAgYXJyICYmDQogICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIHVybHMucHVzaCh7IHVybDogbG9va1VybChpdGVtLmZpbGVJZCksIGlzSW1hZ2U6IHRydWUgfSkNCiAgICAgICAgfSkNCiAgICAgIHJldHVybiB1cmxzDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["personnelChangeAdd.vue"],"names":[],"mappings":";AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"personnelChangeAdd.vue","sourceRoot":"src/views/project/contract","sourcesContent":["<template>\r\n  <div :style=\"{ height: scrollerHeight }\" class=\"info\">\r\n    <van-form @submit=\"onSubmit\" :v-model=\"formData\">\r\n      <p class=\"title\">基本信息</p>\r\n      <van-cell-group inset>\r\n        <van-field v-model=\"formData.projectChildName\" label=\"标段\" readonly />\r\n        <van-field v-model=\"formData.recorder\" label=\"填报人\" readonly />\r\n        <van-field v-model=\"formData.subDate\" label=\"填报日期\" readonly />\r\n        <!-- <van-field v-model=\"showTime\" label=\"日期时间\" readonly />\r\n        <van-field v-model=\"formData.clockAddr\" label=\"打卡位置\" readonly /> -->\r\n      </van-cell-group>\r\n      <p class=\"title\">变更信息</p>\r\n      <van-cell-group inset>\r\n        <van-field v-model=\"formData.projectName\" label=\"项目\" readonly />\r\n        <van-field v-model=\"formData.projectChildName\" label=\"标段\" readonly />\r\n        <van-field\r\n          label=\"人员变更类型\"\r\n          v-model=\"formData.changeTypeName\"\r\n          is-link\r\n          readonly\r\n          placeholder=\"请选择\"\r\n          @click=\"showChangeType = true\"\r\n          :rules=\"[{ required: true, message: '请选择人员变更类型' }]\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.changeTypeName\" label=\"人员变更类型\" readonly />\r\n\r\n        <van-field\r\n          label=\"变更岗位\"\r\n          v-model=\"formData.changePostName\"\r\n          is-link\r\n          disabled\r\n          placeholder=\"请选择\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.changePostName\" label=\"变更岗位\" readonly />\r\n\r\n        <van-field\r\n          label=\"变更前人员\"\r\n          v-model=\"formData.beforePerson\"\r\n          is-link\r\n          readonly\r\n          placeholder=\"请选择\"\r\n          @click=\"showBeforePerson = true\"\r\n          :rules=\"[{ required: true, message: '请选择变更前人员' }]\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.beforePerson\" label=\"变更前人员\" readonly />\r\n\r\n        <van-field v-model=\"formData.beforeCode\" label=\"变更前(执业)资格证书号\" :readonly=\"!add\" />\r\n        <van-field\r\n          label=\"变更后人员\"\r\n          v-model=\"formData.afterPerson\"\r\n          is-link\r\n          readonly\r\n          placeholder=\"请选择\"\r\n          @click=\"showAfterPerson = true\"\r\n          :rules=\"[{ required: true, message: '请选择变更后人员' }]\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.afterPerson\" label=\"变更后人员\" readonly />\r\n\r\n        <van-field v-model=\"formData.afterCode\" label=\"变更后(执业)资格证书号\" :readonly=\"!add\" />\r\n        <van-field v-model=\"formData.changeUnitName\" label=\"变更单位\" readonly />\r\n      </van-cell-group>\r\n      <p class=\"title\">附件</p>\r\n      <van-cell-group inset>\r\n        <upload label=\"文件上传\" :name=\"picFiled\" :fileList=\"fileList\" :editable=\"add\"></upload>\r\n      </van-cell-group>\r\n      <div v-if=\"!add\">\r\n        <p class=\"title\">审批记录</p>\r\n        <van-cell-group inset>\r\n          <van-steps direction=\"vertical\" :active=\"logData.length - 1\">\r\n            <van-step v-for=\"(item, index) in logData\" :key=\"index\">\r\n              <h3>{{ item.taskName }}</h3>\r\n              <p>执行人：{{ item.createName }}</p>\r\n              <p>操作：{{ item.approvalType }}</p>\r\n              <p>审批意见：{{ item.comment }}</p>\r\n              <p>处理时间：{{ item.createTime }}</p>\r\n            </van-step>\r\n          </van-steps>\r\n        </van-cell-group>\r\n      </div>\r\n      <!-- <div v-if=\"add\">\r\n        <approveuser :auditUser=\"auditUser\" :flowKey=\"flowKey\"> </approveuser>\r\n      </div> -->\r\n      <div class=\"btn-con\">\r\n        <!-- <van-button type=\"default\" @click=\"cancel\">取消</van-button> -->\r\n        <van-button type=\"primary\" v-if=\"add\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n    <van-action-sheet v-model=\"showChangeType\" :actions=\"changeTypeList\" @select=\"onChangeTypeSelect\" />\r\n    <van-action-sheet v-model=\"showBeforePerson\" :actions=\"beforeUsers\" @select=\"onChangeBeforePerson\" />\r\n    <van-action-sheet v-model=\"showAfterPerson\" :actions=\"afterUsers\" @select=\"onChangeAfterPerson\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { getNowDate } from '@/utils/date.js'\r\nimport { getRoleInfoByUserId, getUserRoleAndCode, addPersonChange } from '@/api/project'\r\nimport { submitUserTask, listFlowTaskComment } from '@/api/quality'\r\nimport { lookUrl } from '@/utils/index'\r\nimport Upload from '@/components/common/Upload'\r\nimport approveuser from '@/views/common/approveuser.vue'\r\nexport default {\r\n  computed: {\r\n    ...mapGetters(['currentBiaoDuan', 'userinfo', 'curProject']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 85 + 'px'\r\n    }\r\n  },\r\n  components: {\r\n    Upload,\r\n    approveuser\r\n  },\r\n  data() {\r\n    return {\r\n      add: true,\r\n      formData: {},\r\n      showChangeType: false,\r\n      showBeforePerson: false,\r\n      showAfterPerson: false,\r\n      changeTypeList: [], //人员变更类型\r\n      beforeUsers: [], //变更前人员\r\n      afterUsers: [], //变更后人员\r\n\r\n      roleInfoList: [],\r\n\r\n      fileList: [],\r\n      picFiled: 'files',\r\n\r\n      // flowTypes: [\r\n      //   {\r\n      //     key: 'shigongjihe', //施工单位人员变更\r\n      //     flowKey: 'sgdwrybg'\r\n      //   },\r\n      //   {\r\n      //     key: 'jianlijihe', //监理单位合同人员报审\r\n      //     flowKey: 'jldwrybg'\r\n      //   },\r\n      //   {\r\n      //     key: 'quanzijihe', //监理单位合同人员报审\r\n      //     flowKey: 'qzdwrybg'\r\n      //   }\r\n      // ],\r\n      // userRoleParentCode: '',\r\n      logData: [],\r\n      auditUser: {},\r\n      flowKey: ''\r\n    }\r\n  },\r\n  created() {\r\n    if (!this.$route.params.flowKey) {\r\n      this.add = false\r\n      this.fileList = this.formatImgUrl(this.$route.params.files)\r\n      this.formData = Object.assign({}, this.$route.params)\r\n    }\r\n  },\r\n  mounted() {\r\n    if (!this.$route.params.flowKey) {\r\n      this.add = false\r\n      // this.formData = Object.assign({}, this.$route.params)\r\n      this.listFlowTaskComment()\r\n    } else {\r\n      this.flowKey = this.$route.params.flowKey\r\n      this.init()\r\n      this.initForm()\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      getRoleInfoByUserId({ projectid: this.currentBiaoDuan.id }).then(res => {\r\n        this.roleInfoList = res\r\n        this.changeTypeList = []\r\n        if (res && res.length > 0) {\r\n          let data = JSON.parse(JSON.stringify(res))\r\n          for (let i = 0; i < data.length; i++) {\r\n            for (let j = i + 1; j < data.length; j++) {\r\n              if (data[i].roleid === data[j].roleid) {\r\n                data.splice(j, 1)\r\n                j--\r\n              }\r\n            }\r\n          }\r\n          data.forEach(item => {\r\n            this.changeTypeList.push({\r\n              name: item.rolename,\r\n              roleid: item.roleid\r\n            })\r\n          })\r\n        }\r\n      })\r\n      //获取用户角色\r\n      // getUserRoleAndCode({ projectId: this.currentBiaoDuan.id }).then(res => {\r\n      //   if (res) {\r\n      //     this.userRoleParentCode = res.parentCode\r\n      //   }\r\n      // })\r\n    },\r\n    initForm() {\r\n      this.formData = {\r\n        afterCode: '', //变更后（执业）资格证书号\r\n        afterPerson: '', //变更后人员名\r\n        afterPersonId: null, //变更后人员id\r\n        beforeCode: '', //变更前（执业）资格证书号\r\n        beforePerson: '', //变更前人员名\r\n        beforePersonId: null, //变更前人员id\r\n        changePost: null, //变更岗位id\r\n        changePostName: '', //变更岗位名\r\n        changeReason: '', //变更原因\r\n        changeType: null, //角色id\r\n        changeTypeName: '', //角色名\r\n        changeUnit: this.userinfo.groupid, //组织id\r\n        changeUnitName: this.userinfo.groupname, //组织名\r\n        projectChildId: this.currentBiaoDuan.id, //项目标段id\r\n        projectChildName: this.currentBiaoDuan.name, //项目标段名\r\n        projectId: this.curProject.id, //项目id\r\n        projectName: this.curProject.name, //项目名\r\n        recordId: this.userinfo.id, //变更发起人id\r\n        recorder: this.userinfo.name, //变更发起人名\r\n        subDate: getNowDate() //变更发起时间\r\n      }\r\n    },\r\n    onChangeTypeSelect(item) {\r\n      this.showChangeType = false\r\n      this.formData.changeType = item.roleid\r\n      this.formData.changeTypeName = item.name\r\n\r\n      this.formData.changePost = item.roleid //变更岗位id\r\n      this.formData.changePostName = item.name //变更岗位名\r\n\r\n      this.beforeUsers = this.roleInfoList.filter(e => e.roleid === item.roleid)\r\n      this.afterUsers = this.roleInfoList.filter(e => e.roleid !== item.roleid)\r\n\r\n      this.formData.beforePerson = ''\r\n      this.formData.beforePersonId = null\r\n      this.formData.afterPerson = ''\r\n      this.formData.afterPersonId = null\r\n    },\r\n    onChangeBeforePerson(item) {\r\n      this.showBeforePerson = false\r\n      this.formData.beforePerson = item.name\r\n      this.formData.beforePersonId = item.id\r\n    },\r\n    onChangeAfterPerson(item) {\r\n      this.showAfterPerson = false\r\n      this.formData.afterPerson = item.name\r\n      this.formData.afterPersonId = item.id\r\n    },\r\n    onSubmit(values) {\r\n      // if (!this.userRoleParentCode) {\r\n      //   return this.$notify({ type: 'warning', message: '配置错误、无法获取审批流程，请联系管理员！' })\r\n      // }\r\n      // let flowObj = this.flowTypes.find(e => e.key === this.userRoleParentCode)\r\n      // if (!flowObj) {\r\n      //   return this.$notify({ type: 'warning', message: '配置错误、无法获取审批流程，请联系管理员！' })\r\n      // }\r\n      let temp = []\r\n      values[this.picFiled].forEach(item => {\r\n        item.url &&\r\n          temp.push({\r\n            fileName: item.file.name,\r\n            fileId: item.url,\r\n            uploadPerson: this.userinfo.name,\r\n            uploadPersonId: this.userinfo.id,\r\n            uploadTime: this.moment(new Date()).format('YYYY-MM-DD HH:mm:SS')\r\n          })\r\n      })\r\n\r\n      if (values[this.picFiled].length !== temp.length) {\r\n        return this.$notify({ type: 'warning', message: '请上传照片或等待照片上传完成！' })\r\n      }\r\n      let obj = Object.assign({}, this.formData)\r\n      if (temp.length > 0) {\r\n        obj.files = temp\r\n      }\r\n      obj.processDefinitionKey = this.flowKey\r\n      console.log(obj)\r\n      addPersonChange(obj).then(res => {\r\n        this.issueStep(res)\r\n      })\r\n    },\r\n    issueStep(data) {\r\n      let obj = {\r\n        copyData: {},\r\n        flowTaskCommentDto: {\r\n          approvalType: '',\r\n          comment: '',\r\n          delegateAssginee: ''\r\n        },\r\n        masterData: {},\r\n        processInstanceId: data,\r\n        slaveData: {},\r\n        taskId: '',\r\n        taskVariableData: {}\r\n      }\r\n      submitUserTask(obj).then(res1 => {\r\n        this.$router.go(-1)\r\n        return this.$notify({ type: 'success', message: '填报成功！' })\r\n      })\r\n    },\r\n    listFlowTaskComment() {\r\n      listFlowTaskComment({ processInstanceId: this.$route.params.processInstanceId }).then(res => {\r\n        this.logData = res.data\r\n      })\r\n    },\r\n    formatImgUrl(arr) {\r\n      let urls = []\r\n      arr &&\r\n        arr.forEach(item => {\r\n          urls.push({ url: lookUrl(item.fileId), isImage: true })\r\n        })\r\n      return urls\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/css/steps.scss';\r\n.info {\r\n  overflow: auto;\r\n  p.title {\r\n    font-size: 14px;\r\n    padding-left: 15px;\r\n  }\r\n  .btn-con {\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    padding: 10px 30px;\r\n    .van-button--normal {\r\n      padding: 0px 45px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}