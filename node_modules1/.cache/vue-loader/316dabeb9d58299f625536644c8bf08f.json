{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\ComponentSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\ComponentSelect.vue","mtime":1684246187875},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgY29uc3RhbnRGaWVsZCBmcm9tICdAL2FwaS9ob21lJw0KaW1wb3J0IHsgSW1hZ2VQcmV2aWV3IH0gZnJvbSAndmFudCcNCmltcG9ydCBQZGZQcmV2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9QZGZQcmV2aWV3Jw0KaW1wb3J0IHsgZm9ybWF0SVNPODYwMVRpbWUgfSBmcm9tICdAL3V0aWxzL2luZGV4Jw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgeyBnZXRDaGVja0RhdGFCeUNvbnBvbmVudElkLCBnZXRUcmVlIH0gZnJvbSAnQC9hcGkvcHJvamVjdC5qcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFBkZlByZXZpZXcsDQogICAgW0ltYWdlUHJldmlldy5Db21wb25lbnQubmFtZV06IEltYWdlUHJldmlldy5Db21wb25lbnQNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBvbkNvbXBvbmVudFNlbGVjdDogew0KICAgICAgdHlwZTogRnVuY3Rpb24NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgc2hvd0RldGFpbDogZmFsc2UsDQogICAgICB0eXBlSXRlbToge30sDQogICAgICBzaG93TG9jYXRpb25TZWxlY3Q6IGZhbHNlLA0KICAgICAgZmllbGROYW1lczogew0KICAgICAgICB0ZXh0OiAnbmFtZScsDQogICAgICAgIHZhbHVlOiAnaWQnLA0KICAgICAgICBjaGlsZHJlbjogJ2NoaWxkJw0KICAgICAgfSwNCiAgICAgIGZpZWxkVmFsdWU6ICcnLA0KICAgICAgY2FzY2FkZXJWYWx1ZTogJycsDQogICAgICBvcHRpb25zOiBbXSwNCg0KICAgICAgY29kZTogJycsDQogICAgICBhY3Rpb25zOiBbXSwNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KICAgICAgcmVmcmVzaGluZzogZmFsc2UsDQogICAgICBtYXA6IHt9LA0KICAgICAgZGV0YWlsTGlzdDogW10sDQogICAgICBkZXRhaWxOYW1lOiAnJywNCg0KICAgICAgY3VycmVudENvbXBvbmVudDogbnVsbCwNCiAgICAgIGZvcm1hdElTTzg2MDFUaW1lLA0KICAgICAgY2hlY2tEYXRhOiBudWxsLA0KICAgICAgcGRmVXJsOiAnJywNCiAgICAgIHNob3dQZGY6IGZhbHNlLA0KICAgICAgcGRmSGVpZ2h0OiAwLA0KDQogICAgICBnb25ncXVJdGVtOiB7fSwNCiAgICAgIHNob3dHb25nUXU6IGZhbHNlLA0KICAgICAgZ29uZ3F1QWN0aW9uczogW10sDQoNCiAgICAgIHByb2plY3RUeXBlczogY29uc3RhbnRGaWVsZC5wcm9qZWN0VHlwZXMsDQogICAgICBwcm9qZWN0VHlwZTogJycNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgcHJvamVjdFR5cGU6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5pbml0KCkNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRQcm9qZWN0JywgJ2N1clByb2plY3QnXSksDQogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDgxIC0gMTMwIC0gOTIgKyAncHgnDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucHJvamVjdFR5cGUgPSB0aGlzLnByb2plY3RUeXBlc1swXS52YWx1ZQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgZ2V0VHJlZSh7IHR5cGU6IHRoaXMucHJvamVjdFR5cGUsIHByb2plY3RJZDogdGhpcy5jdXJQcm9qZWN0LmNoaWxkWzBdLmlkIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY2hpbGQgJiYgZGF0YS5jaGlsZC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhhdC5nb25ncXVBY3Rpb25zID0gZGF0YS5jaGlsZCB8fCBbXQ0KICAgICAgICAgIHRoYXQuZ29uZ3F1QWN0aW9ucy5sZW5ndGggPiAwICYmIHRoYXQub25Hb25nUXVTZWxlY3QodGhhdC5nb25ncXVBY3Rpb25zWzBdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoYXQuZ29uZ3F1QWN0aW9ucyA9IFtdDQogICAgICAgICAgdGhhdC5hY3Rpb25zID0gW10NCiAgICAgICAgICB0aGF0Lm9wdGlvbnMgPSBbXQ0KICAgICAgICAgIHRoYXQubGlzdCA9IFtdDQoNCiAgICAgICAgICB0aGF0LmdvbmdxdUl0ZW0gPSB7fQ0KICAgICAgICAgIHRoYXQudHlwZUl0ZW0gPSB7fQ0KICAgICAgICAgIHRoYXQuZmllbGRWYWx1ZSA9ICcnDQogICAgICAgICAgdGhhdC5jYXNjYWRlclZhbHVlID0gJycNCiAgICAgICAgICB0aGF0LiR0b2FzdC5mYWlsKCfor6XnsbvlnovkuIvml6Dlr7nlupTmlbDmja7vvIEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgb25Hb25nUXVTZWxlY3QoZ29uZ3F1KSB7DQogICAgICB0aGlzLnNob3dHb25nUXUgPSBmYWxzZQ0KICAgICAgdGhpcy5nb25ncXVJdGVtID0gZ29uZ3F1DQogICAgICB0aGlzLmFjdGlvbnMgPSBnb25ncXUuY2hpbGQNCiAgICAgIGlmICh0aGlzLmFjdGlvbnMgJiYgdGhpcy5hY3Rpb25zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy50eXBlSXRlbSA9IHRoaXMuYWN0aW9uc1swXQ0KICAgICAgICB0aGlzLm9uU2VsZWN0KHRoaXMudHlwZUl0ZW0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnR5cGVJdGVtID0ge30NCiAgICAgICAgdGhpcy4kdG9hc3QuZmFpbCgn6K+l5bel5Yy65LiL5peg6aG555uu5pWw5o2u77yBJykNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU2VsZWN0KGl0ZW0pIHsNCiAgICAgIHRoaXMuc2hvdyA9IGZhbHNlDQogICAgICB0aGlzLnR5cGVJdGVtID0gaXRlbQ0KICAgICAgdGhpcy5nZXRwcm9qZWN0RGV0YWlsSW5mbygpDQogICAgfSwNCiAgICBnZXRwcm9qZWN0RGV0YWlsSW5mbygpIHsNCiAgICAgIHRoaXMuZmllbGRWYWx1ZSA9ICcnDQogICAgICB0aGlzLmNhc2NhZGVyVmFsdWUgPSAnJw0KICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy50eXBlSXRlbS5jaGlsZA0KICAgIH0sDQogICAgb25DaGFuZ2UoeyBzZWxlY3RlZE9wdGlvbnMgfSkgew0KICAgICAgdGhpcy5maWVsZFZhbHVlID0gc2VsZWN0ZWRPcHRpb25zLm1hcChvcHRpb24gPT4gb3B0aW9uLm5hbWUpLmpvaW4oJy8nKQ0KICAgICAgbGV0IGxhc3QgPSBzZWxlY3RlZE9wdGlvbnNbc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCAtIDFdDQogICAgICBpZiAobGFzdC5jb25wb25ldGNvZGUpIHsNCiAgICAgICAgdGhpcy5jdXJyZW50Q29tcG9uZW50ID0gbGFzdA0KICAgICAgICB0aGlzLm9uTG9hZCgpDQogICAgICB9DQogICAgICBpZiAoIWxhc3QuY2hpbGQgfHwgbGFzdC5jaGlsZC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgcmV0dXJuICh0aGlzLnNob3dMb2NhdGlvblNlbGVjdCA9IGZhbHNlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25Mb2FkKCkgew0KICAgICAgdGhpcy5jdXJyZW50Q29tcG9uZW50ICYmDQogICAgICAgIGdldENoZWNrRGF0YUJ5Q29ucG9uZW50SWQoeyBpZDogdGhpcy5jdXJyZW50Q29tcG9uZW50LmlkIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5saXN0ID0gZGF0YS5jaGVjaw0KICAgICAgICAgIHRoaXMuY2hlY2tEYXRhID0gZGF0YS5kYXRhDQogICAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgcHJldmlld1BpYyhpdGVtKSB7DQogICAgICB0aGlzLiRyZWZzWydwZGZQcmV2aWV3J10uc2hvd1BpYyhpdGVtLnJlY29yZGlkKQ0KICAgIH0sDQogICAgcHJldmlld1BkZihpdGVtKSB7DQogICAgICB0aGlzLiRyZWZzWydwZGZQcmV2aWV3J10uc2hvdyhpdGVtLnJlY29yZGlkKQ0KICAgIH0sDQogICAgaXRlbUNsaWNrKGl0ZW0sIGluZGV4KSB7DQogICAgICBsZXQgb2JqID0gbnVsbA0KICAgICAgaWYgKGluZGV4ICE9PSAwKSB7DQogICAgICAgIG9iaiA9IHRoaXMubGlzdFtpbmRleCAtIDFdDQogICAgICB9DQogICAgICBsZXQgeyBzdGF0dXMgfSA9IGl0ZW0NCg0KICAgICAgaWYgKG9iaiAmJiBvYmouc3RhdHVzICE9PSAxKSB7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+aKpeS4iuS4quW3peW6j+aIluiBlOezu+ebkeeQhuWuoeaguOS4iuS4quW3peW6jycsDQogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgICBpZiAoc3RhdHVzID09PSAwKSB7DQogICAgICAgIHRoaXMub25Db21wb25lbnRTZWxlY3QoaXRlbSwgdGhpcy5jaGVja0RhdGEpDQogICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gMSkgew0KICAgICAgICAvL+eKtuaAgeS4ujHvvIzlt6Xluo/lrqHmoLjlt7LlrozmiJANCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICBtZXNzYWdlOiAn5bel5bqP5bey5a6h5qC45a6M5oiQ77yM6K+35aGr5oql5LiL5LiA6YGT5bel5bqPJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSBpZihzdGF0dXMgPT09IDIpew0KICAgICAgICB0aGlzLm9uQ29tcG9uZW50U2VsZWN0KGl0ZW0sIHRoaXMuY2hlY2tEYXRhLHRydWUpDQogICAgICB9IGVsc2UgaWYoc3RhdHVzID09PSAzKXsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICBtZXNzYWdlOiAn6K+36IGU57O755uR55CG5a6h5qC4JywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIGl0ZW1DbGljayhpdGVtLCBpbmRleCkgew0KICAgIC8vICAgbGV0IG9iaiA9IG51bGwNCiAgICAvLyAgIGlmIChpbmRleCAhPT0gMCkgew0KICAgIC8vICAgICBvYmogPSB0aGlzLmxpc3RbaW5kZXggLSAxXQ0KICAgIC8vICAgfQ0KICAgIC8vICAgLy8wIOayoeWhq+aKpSAz5bey5aGr5oql5b6F5a6h5qC4IDHlt7Lnoa7orqQgMuWuoeaguOacqumAmui/hw0KICAgIC8vICAgbGV0IHsgc3RhdHVzIH0gPSBpdGVtDQoNCiAgICAvLyAgIGlmIChzdGF0dXMgPT09IDMpIHsNCiAgICAvLyAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAvLyAgICAgICBtZXNzYWdlOiAn6K+36IGU57O755uR55CG5a6h5qC4JywNCiAgICAvLyAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAvLyAgICAgfSkNCiAgICAvLyAgICAgcmV0dXJuDQogICAgLy8gICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gMikgew0KICAgIC8vICAgICB0aGlzLiRub3RpZnkoew0KICAgIC8vICAgICAgIG1lc3NhZ2U6ICflrqHmoLjmnKrpgJrov4fvvIzor7fogZTns7vnm5HnkIYnLA0KICAgIC8vICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgIC8vICAgICB9KQ0KICAgIC8vICAgICByZXR1cm4NCiAgICAvLyAgIH0NCiAgICAvLyAgIGlmIChvYmogJiYgb2JqLnN0YXR1cyAhPT0gMSkgew0KICAgIC8vICAgICB0aGlzLiRub3RpZnkoew0KICAgIC8vICAgICAgIG1lc3NhZ2U6ICfor7floavmiqXkuIrkuKrlt6Xluo/miJbogZTns7vnm5HnkIblrqHmoLjkuIrkuKrlt6Xluo8nLA0KICAgIC8vICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgIC8vICAgICB9KQ0KICAgIC8vICAgICByZXR1cm4NCiAgICAvLyAgIH0NCg0KICAgIC8vICAgLy8wIOayoeWhq+aKpSAz5bey5aGr5oql5b6F5a6h5qC4IDHlt7Lnoa7orqQgMuWuoeaguOacqumAmui/hw0KICAgIC8vICAgaWYgKGl0ZW0uc3RhdHVzID09PSAwKSB7DQogICAgLy8gICAgIHRoaXMub25Db21wb25lbnRTZWxlY3QoaXRlbSwgdGhpcy5jaGVja0RhdGEpDQogICAgLy8gICB9DQogICAgLy8gfQ0KICB9DQp9DQo="},{"version":3,"sources":["ComponentSelect.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ComponentSelect.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"component-select\">\r\n    <van-cell-group inset class=\"common-card\" style=\"margin-bottom: 0\">\r\n      <van-field label=\"类型\" label-width=\"40px\">\r\n        <template #input>\r\n          <van-radio-group v-model=\"projectType\" direction=\"horizontal\">\r\n            <van-radio :name=\"item.value\" v-for=\"(item, index) in projectTypes\" :key=\"index\">{{ item.name }}</van-radio>\r\n          </van-radio-group>\r\n        </template>\r\n      </van-field>\r\n      <van-field\r\n        class=\"condition\"\r\n        v-model=\"gongquItem.name\"\r\n        label=\"工区名称\"\r\n        readonly\r\n        @click=\"showGongQu = true\"\r\n        right-icon=\"arrow\"\r\n      />\r\n      <van-field\r\n        class=\"condition\"\r\n        v-model=\"typeItem.name\"\r\n        label=\"项目名称\"\r\n        readonly\r\n        @click=\"show = true\"\r\n        right-icon=\"arrow\"\r\n      />\r\n      <van-field\r\n        label=\"构件选择\"\r\n        v-model=\"fieldValue\"\r\n        is-link\r\n        readonly\r\n        placeholder=\"请选择构件\"\r\n        @click=\"showLocationSelect = true\"\r\n        :rules=\"[{ required: true, message: '请选择所在地区' }]\"\r\n      />\r\n    </van-cell-group>\r\n    <van-list\r\n      :finished=\"finished\"\r\n      finished-text=\"我也是有底线的~~\"\r\n      @load=\"onLoad\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n      class=\"common-list common-card\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === list.length - 1 ? 'last' : '')\"\r\n        @click=\"itemClick(item, index)\"\r\n      >\r\n        <div class=\"content\">\r\n          <span class=\"name\">工序名称：</span>\r\n          <span class=\"value\">{{ item.name }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">完成时间：</span>\r\n          <span class=\"value\">{{ item.finish || '未录入' }}</span>\r\n        </div>\r\n        <div class=\"content\" v-if=\"item.status === 2\">\r\n          <span class=\"name\">工序状态：</span>\r\n          <span class=\"value common-state-2\">{{ ['未填报','已通过','被驳回','待审核'][item.status] }}</span>\r\n        </div>\r\n        <div class=\"operate center-in-vertical\">\r\n          <van-button v-if=\"item.finish\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\"\r\n            >照片</van-button\r\n          >\r\n          <van-button v-if=\"item.finish\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\"\r\n            >PDF</van-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n    <van-action-sheet v-model=\"showGongQu\" :actions=\"gongquActions\" @select=\"onGongQuSelect\" />\r\n    <van-action-sheet v-model=\"show\" :actions=\"actions\" @select=\"onSelect\" />\r\n    <van-popup v-model=\"showLocationSelect\" round position=\"bottom\">\r\n      <van-cascader\r\n        v-model=\"cascaderValue\"\r\n        title=\"请选择构件\"\r\n        :options=\"options\"\r\n        @close=\"showLocationSelect = false\"\r\n        @change=\"onChange\"\r\n        :field-names=\"fieldNames\"\r\n      />\r\n    </van-popup>\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport constantField from '@/api/home'\r\nimport { ImagePreview } from 'vant'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport { mapGetters } from 'vuex'\r\nimport { getCheckDataByConponentId, getTree } from '@/api/project.js'\r\nexport default {\r\n  components: {\r\n    PdfPreview,\r\n    [ImagePreview.Component.name]: ImagePreview.Component\r\n  },\r\n  props: {\r\n    onComponentSelect: {\r\n      type: Function\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      showDetail: false,\r\n      typeItem: {},\r\n      showLocationSelect: false,\r\n      fieldNames: {\r\n        text: 'name',\r\n        value: 'id',\r\n        children: 'child'\r\n      },\r\n      fieldValue: '',\r\n      cascaderValue: '',\r\n      options: [],\r\n\r\n      code: '',\r\n      actions: [],\r\n      list: [],\r\n      finished: false,\r\n      refreshing: false,\r\n      map: {},\r\n      detailList: [],\r\n      detailName: '',\r\n\r\n      currentComponent: null,\r\n      formatISO8601Time,\r\n      checkData: null,\r\n      pdfUrl: '',\r\n      showPdf: false,\r\n      pdfHeight: 0,\r\n\r\n      gongquItem: {},\r\n      showGongQu: false,\r\n      gongquActions: [],\r\n\r\n      projectTypes: constantField.projectTypes,\r\n      projectType: ''\r\n    }\r\n  },\r\n  watch: {\r\n    projectType: function() {\r\n      this.init()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentProject', 'curProject']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 81 - 130 - 92 + 'px'\r\n    }\r\n  },\r\n  created() {\r\n    this.projectType = this.projectTypes[0].value\r\n  },\r\n  methods: {\r\n    init() {\r\n      let that = this\r\n      getTree({ type: this.projectType, projectId: this.curProject.child[0].id }).then(data => {\r\n        if (data && data.child && data.child.length > 0) {\r\n          that.gongquActions = data.child || []\r\n          that.gongquActions.length > 0 && that.onGongQuSelect(that.gongquActions[0])\r\n        } else {\r\n          that.gongquActions = []\r\n          that.actions = []\r\n          that.options = []\r\n          that.list = []\r\n\r\n          that.gongquItem = {}\r\n          that.typeItem = {}\r\n          that.fieldValue = ''\r\n          that.cascaderValue = ''\r\n          that.$toast.fail('该类型下无对应数据！')\r\n        }\r\n      })\r\n    },\r\n    onGongQuSelect(gongqu) {\r\n      this.showGongQu = false\r\n      this.gongquItem = gongqu\r\n      this.actions = gongqu.child\r\n      if (this.actions && this.actions.length > 0) {\r\n        this.typeItem = this.actions[0]\r\n        this.onSelect(this.typeItem)\r\n      } else {\r\n        this.typeItem = {}\r\n        this.$toast.fail('该工区下无项目数据！')\r\n      }\r\n    },\r\n    onSelect(item) {\r\n      this.show = false\r\n      this.typeItem = item\r\n      this.getprojectDetailInfo()\r\n    },\r\n    getprojectDetailInfo() {\r\n      this.fieldValue = ''\r\n      this.cascaderValue = ''\r\n      this.options = this.typeItem.child\r\n    },\r\n    onChange({ selectedOptions }) {\r\n      this.fieldValue = selectedOptions.map(option => option.name).join('/')\r\n      let last = selectedOptions[selectedOptions.length - 1]\r\n      if (last.conponetcode) {\r\n        this.currentComponent = last\r\n        this.onLoad()\r\n      }\r\n      if (!last.child || last.child.length === 0) {\r\n        return (this.showLocationSelect = false)\r\n      }\r\n    },\r\n    onLoad() {\r\n      this.currentComponent &&\r\n        getCheckDataByConponentId({ id: this.currentComponent.id }).then(data => {\r\n          this.list = data.check\r\n          this.checkData = data.data\r\n          this.refreshing = false\r\n          this.finished = true\r\n        })\r\n    },\r\n    previewPic(item) {\r\n      this.$refs['pdfPreview'].showPic(item.recordid)\r\n    },\r\n    previewPdf(item) {\r\n      this.$refs['pdfPreview'].show(item.recordid)\r\n    },\r\n    itemClick(item, index) {\r\n      let obj = null\r\n      if (index !== 0) {\r\n        obj = this.list[index - 1]\r\n      }\r\n      let { status } = item\r\n\r\n      if (obj && obj.status !== 1) {\r\n        this.$notify({\r\n          message: '请填报上个工序或联系监理审核上个工序',\r\n          type: 'warning'\r\n        })\r\n        return\r\n      }\r\n\r\n      if (status === 0) {\r\n        this.onComponentSelect(item, this.checkData)\r\n      } else if (status === 1) {\r\n        //状态为1，工序审核已完成\r\n        this.$notify({\r\n          message: '工序已审核完成，请填报下一道工序',\r\n          type: 'warning'\r\n        })\r\n      } else if(status === 2){\r\n        this.onComponentSelect(item, this.checkData,true)\r\n      } else if(status === 3){\r\n        this.$notify({\r\n          message: '请联系监理审核',\r\n          type: 'warning'\r\n        })\r\n      }\r\n    },\r\n    // itemClick(item, index) {\r\n    //   let obj = null\r\n    //   if (index !== 0) {\r\n    //     obj = this.list[index - 1]\r\n    //   }\r\n    //   //0 没填报 3已填报待审核 1已确认 2审核未通过\r\n    //   let { status } = item\r\n\r\n    //   if (status === 3) {\r\n    //     this.$notify({\r\n    //       message: '请联系监理审核',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   } else if (status === 2) {\r\n    //     this.$notify({\r\n    //       message: '审核未通过，请联系监理',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   }\r\n    //   if (obj && obj.status !== 1) {\r\n    //     this.$notify({\r\n    //       message: '请填报上个工序或联系监理审核上个工序',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   }\r\n\r\n    //   //0 没填报 3已填报待审核 1已确认 2审核未通过\r\n    //   if (item.status === 0) {\r\n    //     this.onComponentSelect(item, this.checkData)\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.component-select {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  .condition {\r\n    margin-top: 5px;\r\n  }\r\n  .van-field__control {\r\n    text-align: right !important;\r\n  }\r\n}\r\n</style>\r\n"]}]}