{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\deal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\deal.vue","mtime":1684246188006},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgVXBsb2FkIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vVXBsb2FkJw0KaW1wb3J0IHsgc3VibWl0RGVhbFdpdGhRdWFsaXR5RXZlbnQgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJw0KaW1wb3J0IHsgZm9ybWF0SVNPODYwMVRpbWUgfSBmcm9tICdAL3V0aWxzL2luZGV4Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgVXBsb2FkDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDkwICsgJ3B4Jw0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXJsTGlzdDogW10sDQogICAgICBtb2RpZnlyZW1hcms6ICcnLA0KICAgICAgbW9kaWZ5ZGF0ZTogJycsDQogICAgICBjdXJyZW50RGF0ZTogbmV3IERhdGUoKSwNCiAgICAgIHNob3dQaWNrZXI6IGZhbHNlLA0KICAgICAgZm9ybWF0SVNPODYwMVRpbWUNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ29uZmlybSh0aW1lKSB7DQogICAgICB0aGlzLnNob3dQaWNrZXIgPSBmYWxzZQ0KICAgICAgdGhpcy5tb2RpZnlkYXRlID0gdGhpcy5mb3JtYXRJU084NjAxVGltZShuZXcgRGF0ZSh0aW1lKS50b0pTT04oKSkNCiAgICB9LA0KICAgIGluaXQoKSB7fSwNCiAgICBvblN1Ym1pdCh2YWx1ZXMpIHsNCiAgICAgIGxldCB0ZW1wID0gW10NCiAgICAgIHZhbHVlcy5tb2RpZnl1cmwuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS51cmwgJiYgdGVtcC5wdXNoKGl0ZW0udXJsKQ0KICAgICAgfSkNCiAgICAgIGlmKHZhbHVlcy5tb2RpZnl1cmwubGVuZ3RoICE9PSB0ZW1wLmxlbmd0aCl7DQogICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+35LiK5Lyg5paH5Lu25oiW562J5b6F5paH5Lu25LiK5Lyg5a6M5oiQ77yBJyB9KQ0KICAgICAgfQ0KICAgICAgdmFsdWVzLm1vZGlmeXVybCA9IHRlbXAuam9pbignLCcpDQogICAgICB2YWx1ZXMuZXZlbnRpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmV2ZW50aWQNCiAgICAgIHN1Ym1pdERlYWxXaXRoUXVhbGl0eUV2ZW50KHZhbHVlcykudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldFJlYWx0aW1lTWVzc2FnZScpDQogICAgICAgIHRoaXMuJHRvYXN0KCflpITnkIbmiJDlip8nKQ0KICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["deal.vue"],"names":[],"mappings":";AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"deal.vue","sourceRoot":"src/views/project/quality","sourcesContent":["<template>\r\n  <div class=\"report-deal\">\r\n    <van-form @submit=\"onSubmit\" class=\"common-card\" :style=\"{ height: scrollerHeight }\">\r\n      <van-field\r\n        v-model=\"modifydate\"\r\n        is-link\r\n        readonly\r\n        name=\"modifydate\"\r\n        label=\"整改时间\"\r\n        placeholder=\"点击选择整改时间\"\r\n        @click=\"showPicker = true\"\r\n        :rules=\"[{ required: true, message: '请选择检查日期' }]\"\r\n      />\r\n      <upload\r\n        :fileList=\"[]\"\r\n        label=\"整改照片\"\r\n        name=\"modifyurl\"\r\n        :rules=\"[{ required: true, message: '请选择整改照片' }]\"\r\n      ></upload>\r\n      <van-field v-model=\"modifyremark\" name=\"modifyremark\" label=\"整改备注\" placeholder=\"整改备注\" />\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n    <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n      <van-datetime-picker v-model=\"currentDate\" type=\"datetime\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Upload from '@/components/common/Upload'\r\nimport { submitDealWithQualityEvent } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nexport default {\r\n  components: {\r\n    Upload\r\n  },\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 90 + 'px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      urlList: [],\r\n      modifyremark: '',\r\n      modifydate: '',\r\n      currentDate: new Date(),\r\n      showPicker: false,\r\n      formatISO8601Time\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    onConfirm(time) {\r\n      this.showPicker = false\r\n      this.modifydate = this.formatISO8601Time(new Date(time).toJSON())\r\n    },\r\n    init() {},\r\n    onSubmit(values) {\r\n      let temp = []\r\n      values.modifyurl.forEach(item => {\r\n        item.url && temp.push(item.url)\r\n      })\r\n      if(values.modifyurl.length !== temp.length){\r\n         return this.$notify({ type: 'warning', message: '请上传文件或等待文件上传完成！' })\r\n      }\r\n      values.modifyurl = temp.join(',')\r\n      values.eventid = this.$route.query.eventid\r\n      submitDealWithQualityEvent(values).then(data => {\r\n        this.$store.dispatch('getRealtimeMessage')\r\n        this.$toast('处理成功')\r\n        this.$router.go(-1)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}