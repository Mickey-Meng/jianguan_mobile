{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\menu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\menu\\index.vue","mtime":1684246188004},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgY29uc3RhbnRGaWVsZCBmcm9tICdAL2FwaS9ob21lJw0KaW1wb3J0IFRhYkJhciBmcm9tICdAL2NvbXBvbmVudHMvVGFiQmFyJw0KaW1wb3J0IHsgYXV0aE1lbnUgfSBmcm9tICdAL3V0aWxzL2luZGV4Jw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgQ29tbW9uSGVhZCBmcm9tICdAL2NvbXBvbmVudHMvaGVhZC9Db21tb25IZWFkJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhdXRoVGFibGVzOiBbXSwNCiAgICAgIHBhcmFtczogdGhpcy4kcm91dGUucGFyYW1zLA0KICAgICAgaXNSb3V0ZXJBbGl2ZTogdHJ1ZSwNCiAgICAgIHNob3dUYWJsZXM6IHRydWUsDQogICAgICBhdXRoTWVudSwNCiAgICAgIHRpdGxlOiAn5pm65oWn5bu6566hJywNCiAgICAgIHNjcm9sbGVySGVpZ2h0OiAnJw0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFRhYkJhciwNCiAgICBDb21tb25IZWFkDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgbWVudUNvb2tpZTogZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlcmluZm8uaWQNCiAgICB9LA0KICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgJ3F1YWxpdHlFdmVudENvdW50JywNCiAgICAgICdzYWZlRXZlbnRDb3VudCcsDQogICAgICAnYWdlbmN5dGFza0V2ZW50Q291bnQnLCAvLyDlvoXlip7ku7vliqENCiAgICAgICdjb3B5dGFza0V2ZW50Q291bnQnLCAvLyDmioTpgIHku7vliqENCiAgICAgICdkZWxheVF1YWxpdHlFdmVudENvdW50JywNCiAgICAgICdkZWxheVNhZmVFdmVudENvdW50JywNCiAgICAgICdkb1JlY3RpZmljYXRpb25RdWFsaXR5RXZlbnRDb3VudCcsDQogICAgICAnZG9SZWN0aWZpY2F0aW9uU2FmZUV2ZW50Q291bnQnLA0KICAgICAgJ3Byb2Nlc3NGaWxsaW5nQ291bnQnDQogICAgXSkNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBtZW51Q29va2llOiBmdW5jdGlvbihudikgew0KICAgICAgLy8gbnYgJiYgdGhpcy5pbml0KCkNCiAgICB9LA0KICAgIHF1YWxpdHlFdmVudENvdW50OiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgfSwNCiAgICBzYWZlRXZlbnRDb3VudDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmluaXQoKQ0KICAgIH0sDQogICAgLy8g5b6F5Yqe5Lu75YqhDQogICAgYWdlbmN5dGFza0V2ZW50Q291bnQ6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5pbml0KCkNCiAgICB9LA0KICAgIC8vIOaKhOmAgeS7u+WKoQ0KICAgIGNvcHl0YXNrRXZlbnRDb3VudDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmluaXQoKQ0KICAgIH0sDQogICAgZGVsYXlRdWFsaXR5RXZlbnRDb3VudDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmluaXQoKQ0KICAgIH0sDQogICAgZGVsYXlTYWZlRXZlbnRDb3VudDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmluaXQoKQ0KICAgIH0sDQogICAgZG9SZWN0aWZpY2F0aW9uUXVhbGl0eUV2ZW50Q291bnQ6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5pbml0KCkNCiAgICB9LA0KICAgIGRvUmVjdGlmaWNhdGlvblNhZmVFdmVudENvdW50OiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgfSwNCiAgICBwcm9jZXNzRmlsbGluZ0NvdW50OiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc2Nyb2xsZXJIZWlnaHQgPSB0aGlzLiRyZWZzLm1haW5NZW51Lm9mZnNldEhlaWdodCAtIHRoaXMuJHJlZnMuaGVhZC4kZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4Jw0KICAgIHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRQcm9qZWN0ID0gY29uc3RhbnRGaWVsZC5wcm9qZWN0VHlwZXNbMF0NCiAgICB0aGlzLmluaXQoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgaW5pdCgpIHsNCiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRSZWFsdGltZU1lc3NhZ2UnKQ0KICAgICAgbGV0IG1lbnVzID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlcmluZm8udXNlckF1dGgubWVudUNvb2tpZQ0KICAgICAgbGV0IG1lc3NhZ2VNYXAgPSB7DQogICAgICAgIHByb2Nlc3NBdWRpdDogdGhpcy5wcm9jZXNzRmlsbGluZ0NvdW50LA0KICAgICAgICBjaGVjazogdGhpcy5kZWxheVF1YWxpdHlFdmVudENvdW50LA0KICAgICAgICBtb2RpZnk6IHRoaXMucXVhbGl0eUV2ZW50Q291bnQsDQogICAgICAgIHZlcmlmeTogdGhpcy5kb1JlY3RpZmljYXRpb25RdWFsaXR5RXZlbnRDb3VudCwNCiAgICAgICAgc2VjdXJpdHlSZXBvcnQ6IHRoaXMuZGVsYXlTYWZlRXZlbnRDb3VudCwNCiAgICAgICAgc2VjdXJpdHlSZXBvcnRSZWNvcmQ6IHRoaXMuc2FmZUV2ZW50Q291bnQsDQogICAgICAgIGFnZW5jeXRhc2s6IHRoaXMuYWdlbmN5dGFza0V2ZW50Q291bnQsIC8vIOW+heWKnuS7u+WKoQ0KICAgICAgICBjb3B5dGFzazogdGhpcy5jb3B5dGFza0V2ZW50Q291bnQsIC8vIOaKhOmAgeS7u+WKoQ0KICAgICAgICBzZWN1cml0eURlYWxSZWNvcmQ6IHRoaXMuZG9SZWN0aWZpY2F0aW9uU2FmZUV2ZW50Q291bnQNCiAgICAgIH0NCiAgICAgIGxldCBhdXRoTWVudXMgPSBbXQ0KICAgICAgbWVudXMuZm9yRWFjaChtZW51ID0+IHsNCiAgICAgICAgaWYgKG1lbnU/LmNoaWxkcmVuPy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgbGV0IGF1dGhNZW51SXRlbSA9IHsNCiAgICAgICAgICAgIHRpdGxlOiBtZW51Lk5BTUUsDQogICAgICAgICAgICBzdWI6IFtdDQogICAgICAgICAgfQ0KICAgICAgICAgIG1lbnUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7DQogICAgICAgICAgICBsZXQgc3ViID0gew0KICAgICAgICAgICAgICBuYW1lOiBjaGlsZC5OQU1FLA0KICAgICAgICAgICAgICBwYXRoOiBjaGlsZC5VUkwsDQogICAgICAgICAgICAgIGljb246IHJlcXVpcmUoYEAvYXNzZXRzL2ltYWdlL21lbnUvJHtjaGlsZC5JQ09OfS5wbmdgKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWVzc2FnZU1hcFtjaGlsZC5NRU5VQ09ERV0gJiYgKHN1Yi5tZXNzYWdlID0gbWVzc2FnZU1hcFtjaGlsZC5NRU5VQ09ERV0pDQogICAgICAgICAgICBhdXRoTWVudUl0ZW0uc3ViLnB1c2goc3ViKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgYXV0aE1lbnVzLnB1c2goYXV0aE1lbnVJdGVtKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5hdXRoVGFibGVzID0gYXV0aE1lbnVzDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project/menu","sourcesContent":["<template>\r\n  <div class=\"main-menu\" ref=\"mainMenu\">\r\n    <common-head ref=\"head\" :title=\"title\" :left=\"false\"> </common-head>\r\n    <div :style=\"{ height: scrollerHeight, overflowY: 'auto' }\">\r\n      <div class=\"menu-container\" v-for=\"(item, index) in authTables\" :key=\"index\">\r\n        <div class=\"container-name\">{{ item.title }}</div>\r\n        <div class=\"menu-item\">\r\n          <van-grid :column-num=\"4\" :border=\"false\" icon-size=\"36px\">\r\n            <van-grid-item\r\n              v-for=\"(subItem, subIndex) in item.sub\"\r\n              :key=\"subIndex\"\r\n              :icon=\"subItem.icon\"\r\n              icon-prefix=\"iconfont\"\r\n              :text=\"subItem.name\"\r\n              :badge=\"subItem.message === 0 ? '' : subItem.message\"\r\n              :to=\"subItem.path\"\r\n            />\r\n          </van-grid>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport constantField from '@/api/home'\r\nimport TabBar from '@/components/TabBar'\r\nimport { authMenu } from '@/utils/index'\r\nimport { mapGetters } from 'vuex'\r\nimport CommonHead from '@/components/head/CommonHead'\r\nexport default {\r\n  data() {\r\n    return {\r\n      authTables: [],\r\n      params: this.$route.params,\r\n      isRouterAlive: true,\r\n      showTables: true,\r\n      authMenu,\r\n      title: '智慧建管',\r\n      scrollerHeight: ''\r\n    }\r\n  },\r\n  components: {\r\n    TabBar,\r\n    CommonHead\r\n  },\r\n  computed: {\r\n    menuCookie: function() {\r\n      return this.$store.state.userinfo.id\r\n    },\r\n    ...mapGetters([\r\n      'qualityEventCount',\r\n      'safeEventCount',\r\n      'agencytaskEventCount', // 待办任务\r\n      'copytaskEventCount', // 抄送任务\r\n      'delayQualityEventCount',\r\n      'delaySafeEventCount',\r\n      'doRectificationQualityEventCount',\r\n      'doRectificationSafeEventCount',\r\n      'processFillingCount'\r\n    ])\r\n  },\r\n  watch: {\r\n    menuCookie: function(nv) {\r\n      // nv && this.init()\r\n    },\r\n    qualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    safeEventCount: function() {\r\n      this.init()\r\n    },\r\n    // 待办任务\r\n    agencytaskEventCount: function() {\r\n      this.init()\r\n    },\r\n    // 抄送任务\r\n    copytaskEventCount: function() {\r\n      this.init()\r\n    },\r\n    delayQualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    delaySafeEventCount: function() {\r\n      this.init()\r\n    },\r\n    doRectificationQualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    doRectificationSafeEventCount: function() {\r\n      this.init()\r\n    },\r\n    processFillingCount: function() {\r\n      this.init()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.scrollerHeight = this.$refs.mainMenu.offsetHeight - this.$refs.head.$el.offsetHeight + 'px'\r\n    this.$store.state.currentProject = constantField.projectTypes[0]\r\n    this.init()\r\n  },\r\n  methods: {\r\n    async init() {\r\n      await this.$store.dispatch('getRealtimeMessage')\r\n      let menus = this.$store.state.userinfo.userAuth.menuCookie\r\n      let messageMap = {\r\n        processAudit: this.processFillingCount,\r\n        check: this.delayQualityEventCount,\r\n        modify: this.qualityEventCount,\r\n        verify: this.doRectificationQualityEventCount,\r\n        securityReport: this.delaySafeEventCount,\r\n        securityReportRecord: this.safeEventCount,\r\n        agencytask: this.agencytaskEventCount, // 待办任务\r\n        copytask: this.copytaskEventCount, // 抄送任务\r\n        securityDealRecord: this.doRectificationSafeEventCount\r\n      }\r\n      let authMenus = []\r\n      menus.forEach(menu => {\r\n        if (menu?.children?.length > 0) {\r\n          let authMenuItem = {\r\n            title: menu.NAME,\r\n            sub: []\r\n          }\r\n          menu.children.forEach(child => {\r\n            let sub = {\r\n              name: child.NAME,\r\n              path: child.URL,\r\n              icon: require(`@/assets/image/menu/${child.ICON}.png`)\r\n            }\r\n            messageMap[child.MENUCODE] && (sub.message = messageMap[child.MENUCODE])\r\n            authMenuItem.sub.push(sub)\r\n          })\r\n          authMenus.push(authMenuItem)\r\n        }\r\n      })\r\n      this.authTables = authMenus\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.main-menu {\r\n  height: 100%;\r\n  padding: 0 12px;\r\n  overflow: hidden;\r\n  .menu-container {\r\n    .container-name {\r\n      height: 24px;\r\n      font-size: 18px;\r\n      font-family: AlibabaPuHuiTiM;\r\n      color: #191919;\r\n      line-height: 24px;\r\n    }\r\n  }\r\n  .menu-item {\r\n    padding: 10px 0;\r\n    .van-grid-item__content {\r\n      background-color: transparent !important;\r\n      padding: 20px 0;\r\n    }\r\n    .van-grid-item__icon {\r\n      // background: linear-gradient(360deg, #5cccf2 0%, #6199f4 100%);\r\n      // padding: 7px;\r\n      // border-radius: 20px;\r\n      font-size: 26px;\r\n    }\r\n    .van-grid-item__text {\r\n      font-size: 13px;\r\n      font-family: AlibabaPuHuiTiR;\r\n      color: #191919;\r\n    }\r\n    .van-grid-item__icon + .van-grid-item__text {\r\n      margin-top: 0px;\r\n    }\r\n    .van-grid-item0 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #5cccf2 0%, #6199f4 100%);\r\n      }\r\n    }\r\n    .van-grid-item1 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #5cd8b4 0%, #22b984 100%);\r\n      }\r\n    }\r\n    .van-grid-item2 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(180deg, #8572e4 0%, #b0b0eb 100%);\r\n      }\r\n    }\r\n    .van-grid-item3 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #ecbb46 0%, #ef9145 100%);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}