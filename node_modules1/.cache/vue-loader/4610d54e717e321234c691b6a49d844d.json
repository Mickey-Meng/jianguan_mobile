{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue","mtime":1684246188044},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBnZXRBbGxSZXZlcnNlIH0gZnJvbSAnQC9hcGkvcHJvamVjdC5qcycNCmltcG9ydCB7IGZvcm1hdElTTzg2MDFUaW1lIH0gZnJvbSAnQC91dGlscy9pbmRleCcNCmltcG9ydCBQZGZQcmV2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9QZGZQcmV2aWV3Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgUGRmUHJldmlldw0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsaXN0OiBbXSwNCiAgICAgIGxpc3RUZW1wOiBbXSwNCiAgICAgIHJlZnJlc2hpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KICAgICAgZm9ybWF0SVNPODYwMVRpbWUsDQogICAgICBzY3JvbGxlckhlaWdodDogJycsDQogICAgICBxdWVyeUl0ZW06IHt9LA0KICAgICAgY29ucG9uZW50bmFtZTogJycsDQogICAgICBwcm9kdWNlbmFtZTogJycsDQogICAgICBzaG93U3RhdHVzU2VsZWN0OiBmYWxzZSwNCiAgICAgIHN0YXR1c0FjdGlvbnM6IFt7bmFtZTon5omA5pyJJyxzdGF0dXM6IC0xfSx7bmFtZTon5pyq5aGr5oqlJyxzdGF0dXM6IDB9LHtuYW1lOiflvoXlrqHmoLgnLHN0YXR1czogM30se25hbWU6J+W3sumAmui/hycsc3RhdHVzOiAxfSx7bmFtZTon5bey6amz5ZueJyxzdGF0dXM6IDJ9XQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBjb25wb25lbnRuYW1lOiBmdW5jdGlvbigpew0KICAgICAgdGhpcy5vblN0YXR1c1NlbGVjdCh0aGlzLnF1ZXJ5SXRlbSkNCiAgICB9LA0KICAgIHByb2R1Y2VuYW1lOiBmdW5jdGlvbigpew0KICAgICAgdGhpcy5vblN0YXR1c1NlbGVjdCh0aGlzLnF1ZXJ5SXRlbSkNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc2Nyb2xsZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDAgLSB0aGlzLiRyZWZzWydxdWVyeUdyb3VwJ10ub2Zmc2V0SGVpZ2h0ICsgJ3B4Jw0KICB9LA0KICBjcmVhdGVkKCkgew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgb25TdGF0dXNTZWxlY3QoaXRlbSkgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICB0aGlzLnNob3dTdGF0dXNTZWxlY3QgPSBmYWxzZQ0KICAgICAgdGhpcy5xdWVyeUl0ZW0gPSBpdGVtDQogICAgICBpZiAoaXRlbS5zdGF0dXMgPT09IC0xICYmIHRoYXQuY29ucG9uZW50bmFtZSA9PT0gJycgJiYgdGhhdC5wcm9kdWNlbmFtZSA9PT0gJycpIHsNCiAgICAgICAgdGhpcy5saXN0VGVtcCA9IHRoaXMubGlzdA0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGxldCB0ZW1wID0gW10NCiAgICAgIHRoaXMubGlzdC5mb3JFYWNoKF9pdGVtID0+IHsNCiAgICAgICAgX2l0ZW0uY29ucG9uZW50bmFtZSA9IF9pdGVtLmNvbnBvbmVudG5hbWUgfHwgJycNCiAgICAgICAgaWYgKChfaXRlbS5jaGVja3Jlc3VsdCA9PT0gaXRlbS5zdGF0dXMgfHwgaXRlbS5zdGF0dXMgPT09IC0xKSAmJg0KICAgICAgICBfaXRlbS5jb25wb25lbnRuYW1lLmluZGV4T2YodGhhdC5jb25wb25lbnRuYW1lKSAhPT0gLTEgJiYNCiAgICAgICAgX2l0ZW0ucHJvZHVjZW5hbWUuaW5kZXhPZih0aGF0LnByb2R1Y2VuYW1lKSAhPT0gLTEpIHsNCiAgICAgICAgICB0ZW1wLnB1c2goX2l0ZW0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmxpc3RUZW1wID0gdGVtcA0KICAgIH0sDQogICAgb25Mb2FkKCkgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBsZXQgcGFyYW1zID0ge30NCiAgICAgIGdldEFsbFJldmVyc2UocGFyYW1zKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGF0Lmxpc3QgPSBkYXRhDQogICAgICAgIHRoYXQubGlzdFRlbXAgPSB0aGF0Lmxpc3QNCiAgICAgICAgdGhhdC5yZWZyZXNoaW5nID0gZmFsc2UNCiAgICAgICAgdGhhdC5maW5pc2hlZCA9IHRydWUNCiAgICAgICAgdGhhdC5vblN0YXR1c1NlbGVjdChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdHVzQWN0aW9uc1swXSkpKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHByZXZpZXdQaWMoaXRlbSwgZmllbGQpIHsNCiAgICAgIHRoaXMuJHJlZnNbJ3BkZlByZXZpZXcnXS5zaG93UGljKGl0ZW0ucmVjb2RlaWQsIGZpZWxkKQ0KICAgIH0sDQogICAgcHJldmlld1BkZihpdGVtLCBmaWVsZCkgew0KICAgICAgdGhpcy4kcmVmc1sncGRmUHJldmlldyddLnNob3coaXRlbS5yZWNvZGVpZCwgZmllbGQpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["produceRecord.vue"],"names":[],"mappings":";AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"produceRecord.vue","sourceRoot":"src/views/project/quality","sourcesContent":["<template>\r\n  <div class=\"report-record\">\r\n    <van-cell-group inset class=\"common-card\" style=\"margin-bottom: 0\" ref=\"queryGroup\">\r\n      <van-field\r\n        label=\"状态\"\r\n        v-model=\"queryItem.name\"\r\n        is-link\r\n        readonly\r\n        placeholder=\"请选择状态\"\r\n        @click=\"showStatusSelect = true\"\r\n      />\r\n      <van-field\r\n        label=\"构件名称\"\r\n        v-model=\"conponentname\"\r\n        placeholder=\"请输入构件名称\"\r\n        clearable\r\n      />\r\n      <van-field\r\n        label=\"工序名称\"\r\n        v-model=\"producename\"\r\n        placeholder=\"请输入工序名称\"\r\n        clearable\r\n      />\r\n    </van-cell-group>\r\n    <van-list\r\n      :finished=\"finished\"\r\n      finished-text=\"我也是有底线的~~\"\r\n      @load=\"onLoad\"\r\n      class=\"common-list common-card\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in listTemp\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === listTemp.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件编码：</span>\r\n          <span class=\"value\">{{ item.conponentcode }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件名称：</span>\r\n          <span class=\"value\">{{ item.conponentname }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">工序名称：</span>\r\n          <span class=\"value\">{{ item.producename }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">审核人：</span>\r\n          <span class=\"value\">{{ item.checkusername }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">填报人：</span>\r\n          <span class=\"value\">{{ item.updateusername }}</span>\r\n        </div>\r\n        <div v-if=\"item.updatetime\" class=\"content\">\r\n          <span class=\"name\">系统录入：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.updatetime) }}</span>\r\n        </div>\r\n        <div v-if=\"item.stime\" class=\"content\">\r\n          <span class=\"name\">工序填报：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.stime) }}</span>\r\n        </div>\r\n        <div class=\"content\" style=\"text-align: center;\">\r\n          <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\">举牌照片</van-button>\r\n          <van-button style=\"margin-left:10px\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\"\r\n            >PDF</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPic(item, 'testurl')\"\r\n            >审核照片</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPdf(item, 'standbyrecode')\"\r\n            >审核PDF</van-button\r\n          >\r\n        </div>\r\n        <div class=\"operate center-in-vertical\">\r\n          <img v-if=\"item.checkresult === 3\" :src=\"require(`assets/image/待审核.png`)\" />\r\n          <img v-if=\"item.checkresult === 1\" :src=\"require(`assets/image/已通过.png`)\" />\r\n          <img v-if=\"item.checkresult === 2\" :src=\"require(`assets/image/已驳回.png`)\" />\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n    <van-action-sheet v-model=\"showStatusSelect\" :actions=\"statusActions\" @select=\"onStatusSelect\" />\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getAllReverse } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nexport default {\r\n  components: {\r\n    PdfPreview\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      listTemp: [],\r\n      refreshing: false,\r\n      finished: false,\r\n      formatISO8601Time,\r\n      scrollerHeight: '',\r\n      queryItem: {},\r\n      conponentname: '',\r\n      producename: '',\r\n      showStatusSelect: false,\r\n      statusActions: [{name:'所有',status: -1},{name:'未填报',status: 0},{name:'待审核',status: 3},{name:'已通过',status: 1},{name:'已驳回',status: 2}]\r\n    }\r\n  },\r\n  watch: {\r\n    conponentname: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n    producename: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.scrollerHeight = window.innerHeight - 100 - this.$refs['queryGroup'].offsetHeight + 'px'\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    onStatusSelect(item) {\r\n      let that = this\r\n      this.showStatusSelect = false\r\n      this.queryItem = item\r\n      if (item.status === -1 && that.conponentname === '' && that.producename === '') {\r\n        this.listTemp = this.list\r\n        return\r\n      }\r\n      let temp = []\r\n      this.list.forEach(_item => {\r\n        _item.conponentname = _item.conponentname || ''\r\n        if ((_item.checkresult === item.status || item.status === -1) &&\r\n        _item.conponentname.indexOf(that.conponentname) !== -1 &&\r\n        _item.producename.indexOf(that.producename) !== -1) {\r\n          temp.push(_item)\r\n        }\r\n      })\r\n      this.listTemp = temp\r\n    },\r\n    onLoad() {\r\n      let that = this\r\n      let params = {}\r\n      getAllReverse(params).then(data => {\r\n        that.list = data\r\n        that.listTemp = that.list\r\n        that.refreshing = false\r\n        that.finished = true\r\n        that.onStatusSelect(JSON.parse(JSON.stringify(this.statusActions[0])))\r\n      })\r\n    },\r\n    previewPic(item, field) {\r\n      this.$refs['pdfPreview'].showPic(item.recodeid, field)\r\n    },\r\n    previewPdf(item, field) {\r\n      this.$refs['pdfPreview'].show(item.recodeid, field)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.report-record {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n"]}]}