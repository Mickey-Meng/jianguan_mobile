{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\menu\\index.vue?vue&type=style&index=0&id=59a52472&lang=scss&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\menu\\index.vue","mtime":1684246188004},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1684411443176},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1684411446724},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1684411443221},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1684411446938},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubWFpbi1tZW51IHsNCiAgaGVpZ2h0OiAxMDAlOw0KICBwYWRkaW5nOiAwIDEycHg7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIC5tZW51LWNvbnRhaW5lciB7DQogICAgLmNvbnRhaW5lci1uYW1lIHsNCiAgICAgIGhlaWdodDogMjRweDsNCiAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgIGZvbnQtZmFtaWx5OiBBbGliYWJhUHVIdWlUaU07DQogICAgICBjb2xvcjogIzE5MTkxOTsNCiAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4Ow0KICAgIH0NCiAgfQ0KICAubWVudS1pdGVtIHsNCiAgICBwYWRkaW5nOiAxMHB4IDA7DQogICAgLnZhbi1ncmlkLWl0ZW1fX2NvbnRlbnQgew0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsNCiAgICAgIHBhZGRpbmc6IDIwcHggMDsNCiAgICB9DQogICAgLnZhbi1ncmlkLWl0ZW1fX2ljb24gew0KICAgICAgLy8gYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDM2MGRlZywgIzVjY2NmMiAwJSwgIzYxOTlmNCAxMDAlKTsNCiAgICAgIC8vIHBhZGRpbmc6IDdweDsNCiAgICAgIC8vIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICBmb250LXNpemU6IDI2cHg7DQogICAgfQ0KICAgIC52YW4tZ3JpZC1pdGVtX190ZXh0IHsNCiAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgIGZvbnQtZmFtaWx5OiBBbGliYWJhUHVIdWlUaVI7DQogICAgICBjb2xvcjogIzE5MTkxOTsNCiAgICB9DQogICAgLnZhbi1ncmlkLWl0ZW1fX2ljb24gKyAudmFuLWdyaWQtaXRlbV9fdGV4dCB7DQogICAgICBtYXJnaW4tdG9wOiAwcHg7DQogICAgfQ0KICAgIC52YW4tZ3JpZC1pdGVtMCB7DQogICAgICAudmFuLWdyaWQtaXRlbV9faWNvbiB7DQogICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgzNjBkZWcsICM1Y2NjZjIgMCUsICM2MTk5ZjQgMTAwJSk7DQogICAgICB9DQogICAgfQ0KICAgIC52YW4tZ3JpZC1pdGVtMSB7DQogICAgICAudmFuLWdyaWQtaXRlbV9faWNvbiB7DQogICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgzNjBkZWcsICM1Y2Q4YjQgMCUsICMyMmI5ODQgMTAwJSk7DQogICAgICB9DQogICAgfQ0KICAgIC52YW4tZ3JpZC1pdGVtMiB7DQogICAgICAudmFuLWdyaWQtaXRlbV9faWNvbiB7DQogICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxODBkZWcsICM4NTcyZTQgMCUsICNiMGIwZWIgMTAwJSk7DQogICAgICB9DQogICAgfQ0KICAgIC52YW4tZ3JpZC1pdGVtMyB7DQogICAgICAudmFuLWdyaWQtaXRlbV9faWNvbiB7DQogICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgzNjBkZWcsICNlY2JiNDYgMCUsICNlZjkxNDUgMTAwJSk7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project/menu","sourcesContent":["<template>\r\n  <div class=\"main-menu\" ref=\"mainMenu\">\r\n    <common-head ref=\"head\" :title=\"title\" :left=\"false\"> </common-head>\r\n    <div :style=\"{ height: scrollerHeight, overflowY: 'auto' }\">\r\n      <div class=\"menu-container\" v-for=\"(item, index) in authTables\" :key=\"index\">\r\n        <div class=\"container-name\">{{ item.title }}</div>\r\n        <div class=\"menu-item\">\r\n          <van-grid :column-num=\"4\" :border=\"false\" icon-size=\"36px\">\r\n            <van-grid-item\r\n              v-for=\"(subItem, subIndex) in item.sub\"\r\n              :key=\"subIndex\"\r\n              :icon=\"subItem.icon\"\r\n              icon-prefix=\"iconfont\"\r\n              :text=\"subItem.name\"\r\n              :badge=\"subItem.message === 0 ? '' : subItem.message\"\r\n              :to=\"subItem.path\"\r\n            />\r\n          </van-grid>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport constantField from '@/api/home'\r\nimport TabBar from '@/components/TabBar'\r\nimport { authMenu } from '@/utils/index'\r\nimport { mapGetters } from 'vuex'\r\nimport CommonHead from '@/components/head/CommonHead'\r\nexport default {\r\n  data() {\r\n    return {\r\n      authTables: [],\r\n      params: this.$route.params,\r\n      isRouterAlive: true,\r\n      showTables: true,\r\n      authMenu,\r\n      title: '智慧建管',\r\n      scrollerHeight: ''\r\n    }\r\n  },\r\n  components: {\r\n    TabBar,\r\n    CommonHead\r\n  },\r\n  computed: {\r\n    menuCookie: function() {\r\n      return this.$store.state.userinfo.id\r\n    },\r\n    ...mapGetters([\r\n      'qualityEventCount',\r\n      'safeEventCount',\r\n      'agencytaskEventCount', // 待办任务\r\n      'copytaskEventCount', // 抄送任务\r\n      'delayQualityEventCount',\r\n      'delaySafeEventCount',\r\n      'doRectificationQualityEventCount',\r\n      'doRectificationSafeEventCount',\r\n      'processFillingCount'\r\n    ])\r\n  },\r\n  watch: {\r\n    menuCookie: function(nv) {\r\n      // nv && this.init()\r\n    },\r\n    qualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    safeEventCount: function() {\r\n      this.init()\r\n    },\r\n    // 待办任务\r\n    agencytaskEventCount: function() {\r\n      this.init()\r\n    },\r\n    // 抄送任务\r\n    copytaskEventCount: function() {\r\n      this.init()\r\n    },\r\n    delayQualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    delaySafeEventCount: function() {\r\n      this.init()\r\n    },\r\n    doRectificationQualityEventCount: function() {\r\n      this.init()\r\n    },\r\n    doRectificationSafeEventCount: function() {\r\n      this.init()\r\n    },\r\n    processFillingCount: function() {\r\n      this.init()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.scrollerHeight = this.$refs.mainMenu.offsetHeight - this.$refs.head.$el.offsetHeight + 'px'\r\n    this.$store.state.currentProject = constantField.projectTypes[0]\r\n    this.init()\r\n  },\r\n  methods: {\r\n    async init() {\r\n      await this.$store.dispatch('getRealtimeMessage')\r\n      let menus = this.$store.state.userinfo.userAuth.menuCookie\r\n      let messageMap = {\r\n        processAudit: this.processFillingCount,\r\n        check: this.delayQualityEventCount,\r\n        modify: this.qualityEventCount,\r\n        verify: this.doRectificationQualityEventCount,\r\n        securityReport: this.delaySafeEventCount,\r\n        securityReportRecord: this.safeEventCount,\r\n        agencytask: this.agencytaskEventCount, // 待办任务\r\n        copytask: this.copytaskEventCount, // 抄送任务\r\n        securityDealRecord: this.doRectificationSafeEventCount\r\n      }\r\n      let authMenus = []\r\n      menus.forEach(menu => {\r\n        if (menu?.children?.length > 0) {\r\n          let authMenuItem = {\r\n            title: menu.NAME,\r\n            sub: []\r\n          }\r\n          menu.children.forEach(child => {\r\n            let sub = {\r\n              name: child.NAME,\r\n              path: child.URL,\r\n              icon: require(`@/assets/image/menu/${child.ICON}.png`)\r\n            }\r\n            messageMap[child.MENUCODE] && (sub.message = messageMap[child.MENUCODE])\r\n            authMenuItem.sub.push(sub)\r\n          })\r\n          authMenus.push(authMenuItem)\r\n        }\r\n      })\r\n      this.authTables = authMenus\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.main-menu {\r\n  height: 100%;\r\n  padding: 0 12px;\r\n  overflow: hidden;\r\n  .menu-container {\r\n    .container-name {\r\n      height: 24px;\r\n      font-size: 18px;\r\n      font-family: AlibabaPuHuiTiM;\r\n      color: #191919;\r\n      line-height: 24px;\r\n    }\r\n  }\r\n  .menu-item {\r\n    padding: 10px 0;\r\n    .van-grid-item__content {\r\n      background-color: transparent !important;\r\n      padding: 20px 0;\r\n    }\r\n    .van-grid-item__icon {\r\n      // background: linear-gradient(360deg, #5cccf2 0%, #6199f4 100%);\r\n      // padding: 7px;\r\n      // border-radius: 20px;\r\n      font-size: 26px;\r\n    }\r\n    .van-grid-item__text {\r\n      font-size: 13px;\r\n      font-family: AlibabaPuHuiTiR;\r\n      color: #191919;\r\n    }\r\n    .van-grid-item__icon + .van-grid-item__text {\r\n      margin-top: 0px;\r\n    }\r\n    .van-grid-item0 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #5cccf2 0%, #6199f4 100%);\r\n      }\r\n    }\r\n    .van-grid-item1 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #5cd8b4 0%, #22b984 100%);\r\n      }\r\n    }\r\n    .van-grid-item2 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(180deg, #8572e4 0%, #b0b0eb 100%);\r\n      }\r\n    }\r\n    .van-grid-item3 {\r\n      .van-grid-item__icon {\r\n        background: linear-gradient(360deg, #ecbb46 0%, #ef9145 100%);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}