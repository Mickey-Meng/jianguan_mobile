{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\copytask.vue?vue&type=style&index=0&id=fcc18bcc&scoped=true&lang=scss&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\copytask.vue","mtime":1684246188055},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1684411443176},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1684411446724},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1684411443221},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1684411446938},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY29udGFpbmVyLWJveCB7DQogIGNvbG9yOiAjMDAwMDAwOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhOw0KICBoZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiBjYWxjKDEwMCUgKyAxcHgpOw0KICBvdmVyZmxvdy15OiBhdXRvOw0KICAudmFuLWxpc3Qgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC5saXN0IHsNCiAgICAgIC5pdGVtIHsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIG1hcmdpbjogNXB4Ow0KICAgICAgICBib3gtc2hhZG93OiAwcHggMXB4IDJweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICAuYmxvY2sgew0KICAgICAgICAgIC5ibG9jay12YWx1ZSB7DQogICAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLnZhbi1idXR0b24gew0KICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["copytask.vue"],"names":[],"mappings":";AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"copytask.vue","sourceRoot":"src/views/task","sourcesContent":["<!--\r\n * @Descripttion:监理巡视\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:15:44\r\n * @LastEditors: WangHarry\r\n * @LastEditTime: 2022-05-09 14:15:51\r\n-->\r\n<template>\r\n  <el-container class=\"container-box\">\r\n    <van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n      <van-swipe-cell\r\n        class=\"list\"\r\n        v-for=\"(item, index) in tableData\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"item\" style=\"\" @click=\"gotoHandle(item)\">\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">流程名称:</span>\r\n            <span class=\"block-value\">{{ item.processDefinitionName }}</span>\r\n          </div>\r\n          <!-- <div class=\"block\">\r\n            <span class=\"block-name\">流程标识:</span>\r\n            <span class=\"block-value\">{{ item.processDefinitionKey }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务名称:</span>\r\n            <span class=\"block-value\">{{ item.name }}</span>\r\n          </div> -->\r\n          <!-- <div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">执行操作</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.approvalType }}</span>\r\n\t\t\t\t\t\t</div> -->\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起人:</span>\r\n            <span class=\"block-value\">{{ item.createUsername }}</span>\r\n          </div>\r\n          <div class=\"block\">\r\n            <span class=\"block-name\">任务发起时间:</span>\r\n            <span class=\"block-value\">{{ item.createTime }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"gotoHandle(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n      </van-swipe-cell>\r\n    </van-list>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport * as api from '@/api/quality'\r\nimport { mapGetters } from 'vuex'\r\nimport { constantRouterMap } from '@/router/router.project.js'\r\nimport { setToken } from '@/utils/auth'\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: false,\r\n      finished: false,\r\n      queryData: {\r\n        // processDefinitionName:'',\r\n        // beginDate:'2021-05-15',\r\n        // endDate:'2022-05-15',\r\n        // taskHandleStatus:3,\r\n        orderParam: [{ fieldName: 'createTime', asc: 1 }],\r\n        pageParam: {\r\n          pageNum: 1,\r\n          totalPage: 1,\r\n          pageSize: 10\r\n        },\r\n        read: false\r\n      },\r\n      routes: null,\r\n      detailRouters: []\r\n    }\r\n  },\r\n  created() {\r\n    this.routes = this.menus\r\n    let detailRouter = constantRouterMap.find(e => e.name === 'handlerFlowTask')\r\n    this.detailRouters = detailRouter?.children\r\n  },\r\n  components: {},\r\n  computed: {\r\n    ...mapGetters(['menus']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 91 + 'px'\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.query();\r\n  },\r\n  methods: {\r\n    query() {\r\n      api.listCopyMessage(this.queryData).then(res => {\r\n        this.allData = res.data || {}\r\n        this.tableData = [...this.tableData, ...(this.allData['list'] || [])]\r\n\r\n        this.queryData.pageParam.pageNum = res.data.pageNum + 1\r\n        this.queryData.pageParam.totalPage = res.data.total || 1\r\n        this.queryData.pageParam.pageSize = res.data.pageSize || 10\r\n\r\n        // 加载状态结束\r\n        this.loading = false\r\n        // 数据全部加载完成\r\n        if (this.tableData.length >= res.data.total) {\r\n          this.finished = true\r\n        }\r\n      })\r\n    },\r\n    handleCurrentChange(page) {\r\n      this.queryData.pageParam.pageNum = page\r\n      this.query()\r\n    },\r\n    gotoHandle(row) {\r\n      // row['formKey'] = (typeof row['formKey']) == 'string' ? JSON.parse(row['formKey']) : row['formKey'];\r\n      let key = row['processDefinitionKey']\r\n      let router = this.detailRouters.find(e => e.code.indexOf(key) !== -1)\r\n      let hiddenEdit = [\r\n        'sgdwhtrybs',\r\n        'jldwhtrybs',\r\n        'qzdwhtrybs',\r\n        'sgdwrybg',\r\n        'jldwrybg',\r\n        'qzdwrybg',\r\n        'sgdwryqj',\r\n        'jldwryqj',\r\n        'qzdwryqj'\r\n      ]\r\n      if (router) {\r\n        setToken('taskType', 4)\r\n        this.$router.push({\r\n          path: router.path,\r\n          query: {\r\n            taskId: row.taskId,\r\n            taskKey: row.taskKey,\r\n            businessKey: row.businessKey,\r\n            processDefinitionKey: row.processDefinitionKey,\r\n            processInstanceId: row.processInstanceId,\r\n            processDefinitionId: row.processDefinitionId,\r\n            taskName: row.taskName,\r\n            flowEntryName: row.processDefinitionName,\r\n            processInstanceInitiator: row.processInstanceInitiator,\r\n            isHiddenEdit: hiddenEdit.includes(key),\r\n            flowKey: hiddenEdit.includes(key) ? key : ''\r\n          }\r\n        })\r\n      }\r\n      // this.routes.forEach(parent=>{\r\n      // \tparent['children'].forEach(child=>{\r\n      // \t\tif(child['meta']['code']==row['formKey']['routerName']){\r\n      // \t\t\tthis.$router.push({\r\n      // \t\t\t\tpath:child['path']+'_detail',\r\n      // \t\t\t\tquery:{\r\n      // \t\t\t\t\ttaskId: row.executionId,\r\n      // \t\t\t\t\tbusinessKey:row.businessKey,\r\n      // \t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n      // \t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n      // \t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n      // \t\t\t\t\ttaskName: row.taskName,\r\n      // \t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n      // \t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n      // \t\t\t\t}\r\n      // \t\t\t});\r\n      // \t\t}\r\n      // \t})\r\n      // })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.container-box {\r\n  color: #000000;\r\n  background-color: #fafafa;\r\n  height: 100%;\r\n  width: calc(100% + 1px);\r\n  overflow-y: auto;\r\n  .van-list {\r\n    width: 100%;\r\n    .list {\r\n      .item {\r\n        padding: 10px;\r\n        border: 1px solid rgba(0, 0, 0, 0.1);\r\n        border-radius: 5px;\r\n        margin: 5px;\r\n        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n        .block {\r\n          .block-value {\r\n            margin-left: 5px;\r\n          }\r\n        }\r\n      }\r\n      .van-button {\r\n        height: 100%;\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}