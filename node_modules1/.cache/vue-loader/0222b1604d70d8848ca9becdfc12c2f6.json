{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\historicaltask.vue?vue&type=style&index=0&id=55184722&scoped=true&lang=scss&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\task\\historicaltask.vue","mtime":1684246188057},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1684411443176},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1684411446724},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1684411443221},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1684411446938},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgkuY29udGFpbmVyLWJveCB7CgkJY29sb3I6ICMwMDAwMDA7CgkJYmFja2dyb3VuZC1jb2xvcjogI0ZBRkFGQTsKCQloZWlnaHQ6IDEwMCU7CgkJd2lkdGg6IGNhbGMoMTAwJSArIDFweCk7CiAgCQlvdmVyZmxvdy15OiBhdXRvOwoJCS52YW4tbGlzdHsKCQkJd2lkdGg6IDEwMCU7CgkJCS5saXN0IHsKCQkJCS5pdGVtewoJCQkJCXBhZGRpbmc6IDEwcHg7CgkJCQkJYm9yZGVyOjFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7CgkJCQkJYm9yZGVyLXJhZGl1czo1cHg7CgkJCQkJbWFyZ2luOjVweDsKCQkJCQlib3gtc2hhZG93OiAwcHggMXB4IDJweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwoJCQkJCS5ibG9jayB7CgkJCQkJCS5ibG9jay12YWx1ZSB7CgkJCQkJCQltYXJnaW4tbGVmdDogNXB4OwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJLnZhbi1idXR0b24gewoJCQkJCWhlaWdodDogMTAwJTsKCQkJCQlib3JkZXItcmFkaXVzOiA1cHg7CgkJCQl9CgkJCX0KCQl9Cgl9Cg=="},{"version":3,"sources":["historicaltask.vue"],"names":[],"mappings":";AAmMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"historicaltask.vue","sourceRoot":"src/views/task","sourcesContent":["<!--\r\n * @Descripttion:监理旁站\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:12:51\r\n * @LastEditors: WangHarry\r\n * @LastEditTime: 2022-05-09 14:15:22\r\n-->\r\n<template>\r\n\t<el-container class=\"container-box\">\r\n\t\t<van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n\t\t\t\t<van-swipe-cell class=\"list\" v-for=\"(item, index) in tableData\" :key=\"index\" :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\">\r\n\t\t\t\t\t<div class=\"item\" style=\"\" @click=\"gotoHandle(item)\">\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">流程名称</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.processDefinitionName }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">流程标识</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.processDefinitionKey }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务名称</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.name }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- <div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">执行操作</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.approvalType }}</span>\r\n\t\t\t\t\t\t</div> -->\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务发起人</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.startUserName }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<span class=\"block-name\">任务发起时间</span>\r\n\t\t\t\t\t\t\t<span class=\"block-value\">{{ item.createTime }}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"gotoHandle(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</van-swipe-cell>\r\n\t\t</van-list>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n\timport * as api from \"@/api/quality\";\r\n\timport {\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\timport { constantRouterMap } from '@/router/router.project.js'\r\n\timport {\r\n\t\tsetToken\r\n\t} from \"@/utils/auth\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\tqueryData: {\r\n\t\t\t\t\t// processDefinitionName:'',\r\n\t\t\t\t\t// beginDate:'2021-05-15',\r\n\t\t\t\t\t// endDate:'2022-05-15',\r\n\t\t\t\t\tpageParam: {\r\n\t\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\troutes: null,\r\n\t\t\t\tdetailRouters: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.routes = this.menus;\r\n\t\t\tlet detailRouter = constantRouterMap.find(e => e.name === \"handlerFlowTask\");\r\n\t\t\tthis.detailRouters = detailRouter?.children;\r\n\t\t},\r\n\t\tcomponents: {},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters([\"menus\"]),\r\n\t\t\tscrollerHeight: function() {\r\n\t\t\t\treturn window.innerHeight - 91 + 'px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.query();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tquery() {\r\n\t\t\t\tapi.listHistoricProcessInstance(this.queryData).then((res) => {\r\n\t\t\t\t\tthis.allData = res.data || {};\r\n\t\t\t\t\tthis.tableData = [...this.tableData,...this.allData['list']||[]]\r\n\t\t\t\t\tthis.queryData.pageParam.pageNum = res.data.pageNum + 1;\r\n\t\t\t\t\tthis.queryData.pageParam.totalPage = res.data.total;\r\n\t\t\t\t\tthis.queryData.pageParam.pageSize = res.data.pageSize;\r\n\r\n\t\t\t\t\t// 加载状态结束\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t// 数据全部加载完成\r\n\t\t\t\t\tif (this.tableData.length >= res.data.total) {\r\n\t\t\t\t\t\tthis.finished = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(page) {\r\n\t\t\t\tthis.queryData.pageParam.pageNum = page\r\n\t\t\t\tthis.query()\r\n\t\t\t},\r\n\t\t\tgotoHandle(row) {\r\n\t\t\t\t//row['taskFormKey']=(typeof row['taskFormKey'])=='string'?JSON.parse(row['taskFormKey']):row['taskFormKey'];\r\n\t\t\t\tlet key = row[\"processDefinitionKey\"];\r\n\t\t\t\tlet router = this.detailRouters.find(e => e.code.indexOf(key) !== -1);\r\n\t\t\t\tlet hiddenEdit = [\"sgdwhtrybs\", \"jldwhtrybs\", \"qzdwhtrybs\", \"sgdwrybg\", \"jldwrybg\", \"qzdwrybg\", \"sgdwryqj\",\r\n\t\t\t\t\t\"jldwryqj\", \"qzdwryqj\"\r\n\t\t\t\t];\r\n\t\t\t\tif (router) {\r\n\t\t\t\t\tsetToken(\"taskType\", 3);\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath: router.path,\r\n\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t// taskId: row.deploymentId,\r\n\t\t\t\t\t\t\ttaskKey: row.taskKey,\r\n\t\t\t\t\t\t\tbusinessKey: row.businessKey,\r\n\t\t\t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n\t\t\t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n\t\t\t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n\t\t\t\t\t\t\ttaskName: row.taskName,\r\n\t\t\t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n\t\t\t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n\t\t\t\t\t\t\tisHiddenEdit: hiddenEdit.includes(key),\r\n\t\t\t\t\t\t\tflowKey: hiddenEdit.includes(key) ? key : \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// this.routes.forEach(parent=>{\r\n\t\t\t\t// \tparent['children'].forEach(child=>{\r\n\t\t\t\t// \t\tif(child['meta']['code']==row['processDefinitionKey']){\r\n\t\t\t\t// \t\t\tthis.$router.push({\r\n\t\t\t\t// \t\t\t\tpath:child['path']+'_detail',\r\n\t\t\t\t// \t\t\t\tquery:{\r\n\t\t\t\t// \t\t\t\t\ttaskId: row.deploymentId,\r\n\t\t\t\t// \t\t\t\t\tbusinessKey:row.businessKey,\r\n\t\t\t\t// \t\t\t\t\tprocessDefinitionKey: row.processDefinitionKey,\r\n\t\t\t\t// \t\t\t\t\tprocessInstanceId: row.processInstanceId,\r\n\t\t\t\t// \t\t\t\t\tprocessDefinitionId: row.processDefinitionId,\r\n\t\t\t\t// \t\t\t\t\ttaskName: row.taskName,\r\n\t\t\t\t// \t\t\t\t\tflowEntryName: row.processDefinitionName,\r\n\t\t\t\t// \t\t\t\t\tprocessInstanceInitiator: row.processInstanceInitiator,\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t});\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.container-box {\r\n\t\tcolor: #000000;\r\n\t\tbackground-color: #FAFAFA;\r\n\t\theight: 100%;\r\n\t\twidth: calc(100% + 1px);\r\n  \t\toverflow-y: auto;\r\n\t\t.van-list{\r\n\t\t\twidth: 100%;\r\n\t\t\t.list {\r\n\t\t\t\t.item{\r\n\t\t\t\t\tpadding: 10px;\r\n\t\t\t\t\tborder:1px solid rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\tborder-radius:5px;\r\n\t\t\t\t\tmargin:5px;\r\n\t\t\t\t\tbox-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\t.block {\r\n\t\t\t\t\t\t.block-value {\r\n\t\t\t\t\t\t\tmargin-left: 5px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.van-button {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"]}]}