{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\contract\\takeVacationAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\contract\\takeVacationAdd.vue","mtime":1684246188002},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IGdldERpYyB9IGZyb20gJ0AvYXBpL3VzZXJhdXRoJw0KaW1wb3J0IHsgZ2V0Um9sZUluZm9CeVVzZXJJZCwgZ2V0VXNlclJvbGVBbmRDb2RlLCBzdWJtaXRMZWF2ZSB9IGZyb20gJ0AvYXBpL3Byb2plY3QnDQppbXBvcnQgeyBnZXRGbG93QXVkaXRFbnRyeSwgc3VibWl0VXNlclRhc2ssIGxpc3RGbG93VGFza0NvbW1lbnQgfSBmcm9tICdAL2FwaS9xdWFsaXR5Jw0KaW1wb3J0IHsgZGlmZiwgZ2V0VG90YWwsIGdldE5vd0RhdGUgfSBmcm9tICdAL3V0aWxzL2RhdGUnDQppbXBvcnQgeyBmb3JtYXRJU084NjAxVGltZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnDQppbXBvcnQgYXBwcm92ZXVzZXIgZnJvbSAnQC92aWV3cy9jb21tb24vYXBwcm92ZXVzZXIudnVlJw0KaW1wb3J0IGZsb3dTdGVwIGZyb20gJ0Avdmlld3MvY29tbW9uL2Zsb3dTdGVwLnZ1ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsndXNlcmluZm8nLCAnY3VycmVudEJpYW9EdWFuJywgJ2N1clByb2plY3QnXSksDQogICAgc2Nyb2xsZXJIZWlnaHQoKSB7DQogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gODUgKyAncHgnDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgYXBwcm92ZXVzZXIsDQogICAgZmxvd1N0ZXANCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWRkOiB0cnVlLA0KICAgICAgZm9ybURhdGE6IFtdLA0KICAgICAgaGFuZG9mZlBlcnNvbjogW10sIC8v5bel5L2c5Lqk5o6l5Y+v6YCJ5Lq6DQogICAgICBldmVudFR5cGU6IFtdLA0KICAgICAgdXNlclJvbGVQYXJlbnRDb2RlOiAnJywNCiAgICAgIGZsb3dUeXBlczogWw0KICAgICAgICB7DQogICAgICAgICAga2V5OiAnc2hpZ29uZ2ppaGUnLCAvL+aWveW3peWNleS9jeS6uuWRmOivt+WBhw0KICAgICAgICAgIGZsb3dLZXk6ICdzZ2R3cnlxaicNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ2ppYW5saWppaGUnLCAvL+ebkeeQhuWNleS9jeS6uuWRmOivt+WBhw0KICAgICAgICAgIGZsb3dLZXk6ICdqbGR3cnlxaicNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ3F1YW56aWppaGUnLCAvL+WFqOWSqOWNleS9jeS6uuWRmOivt+WBhw0KICAgICAgICAgIGZsb3dLZXk6ICdxemR3cnlxaicNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHNob3dMZWF2ZXJUeXBlOiBmYWxzZSwNCiAgICAgIHNob3doYW5kb2ZmUGVyc29uOiBmYWxzZSwNCiAgICAgIGN1cnJlbnREYXRlOiBuZXcgRGF0ZSgpLA0KICAgICAgc2hvd0JlZ2luUGlja2VyOiBmYWxzZSwNCiAgICAgIHNob3dFbmRQaWNrZXI6IGZhbHNlLA0KDQogICAgICBsb2dEYXRhOiBbXSwNCg0KICAgICAgYXVkaXRVc2VyOiB7fSwNCg0KICAgICAgd29ya1RpbWU6IHsNCiAgICAgICAgc3RhcnRXb3JrVGltZTogOC41LCAvL+S4iuePreaXtumXtA0KICAgICAgICBlbmRXb3JrVGltZTogMTgsIC8v5LiL54+t5pe26Ze0DQogICAgICAgIHN0YXJ0RnJlZVRpbWU6IDEyLCAvL+WNiOS8keW8gOWni+aXtumXtA0KICAgICAgICBlbmRGcmVlVGltZTogMTMuNSwgLy/ljYjkvJHnu5PmnZ/ml7bpl7QNCiAgICAgICAgZXhjbHVkZUZyZWVUaW1lOiB0cnVlLCAvL+aYr+WQpuWOu+mZpOWNiOS8keaXtumXtA0KICAgICAgICBleGNsdWRlRGF0ZXM6IFtdIC8v5YmU6Zmk5pel5pyf5pWw57uEDQogICAgICB9LA0KICAgICAgZmxvd0tleTogJycsDQogICAgICBmbG93U3RlcDogMA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMpDQogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5mbG93S2V5KSB7DQogICAgICB0aGlzLmZsb3dLZXkgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZmxvd0tleQ0KICAgICAgdGhpcy5pbml0KCkNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5hZGQgPSBmYWxzZQ0KICAgICAgdGhpcy5mb3JtRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuJHJvdXRlLnBhcmFtcykNCiAgICAgIHRoaXMubGlzdEZsb3dUYXNrQ29tbWVudCgpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIGdldERpYygncWpseCcpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuZXZlbnRUeXBlID0gZGF0YS5xamx4DQogICAgICB9KQ0KICAgICAgZ2V0Um9sZUluZm9CeVVzZXJJZCh7IHByb2plY3RpZDogdGhpcy5jdXJyZW50Qmlhb0R1YW4uaWQgfSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5oYW5kb2ZmUGVyc29uID0gZGF0YS5maWx0ZXIoZSA9PiBlLmlkICE9PSB0aGlzLnVzZXJpbmZvLmlkKQ0KICAgICAgfSkNCiAgICAgIC8v6I635Y+W55So5oi36KeS6ImyDQogICAgICAvLyBnZXRVc2VyUm9sZUFuZENvZGUoeyBwcm9qZWN0SWQ6IHRoaXMuY3VycmVudEJpYW9EdWFuLmlkIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAvLyAgIGlmIChkYXRhKSB7DQogICAgICAvLyAgICAgdGhpcy51c2VyUm9sZVBhcmVudENvZGUgPSBkYXRhLnBhcmVudENvZGUNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfSkNCiAgICAgIHRoaXMuaW5pdEZvcm0oKQ0KICAgIH0sDQogICAgaW5pdEZvcm0oKSB7DQogICAgICB0aGlzLmZvcm1EYXRhID0gew0KICAgICAgICBzdGFydFRpbWU6ICcnLCAvL+W8gOWni+aXtumXtA0KICAgICAgICBlbmRUaW1lOiAnJywgLy/nu5PmnZ/ml7bpl7QNCiAgICAgICAgaGFuZG9mZlBlcnNvbjogJycsIC8v5bel5L2c5Lqk5o6l5Lq6DQogICAgICAgIGhhbmRvZmZQZXJzb25JZDogbnVsbCwgLy/kuqTmjqXkurpJRA0KICAgICAgICBsZWF2ZURheTogbnVsbCwgLy/or7flgYflpKnmlbANCiAgICAgICAgbGVhdmVQZXJzb25JZDogdGhpcy51c2VyaW5mby5pZCwgLy9sZWF2ZVBlcnNvbklkDQogICAgICAgIGxlYXZlclBlcnNvbk5hbWU6IHRoaXMudXNlcmluZm8ubmFtZSwgLy9sZWF2ZXJQZXJzb25OYW1lDQogICAgICAgIGxlYXZlUmVhc29uOiAnJywgLy9sZWF2ZVJlYXNvbg0KICAgICAgICBsZWF2ZXJUeXBlOiAnJywgLy/or7flgYfnsbvlnotpZA0KICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuY3VycmVudEJpYW9EdWFuLmlkLCAvL+mhueebrmlkDQogICAgICAgIHJlbWFyazogJycsIC8v5aSH5rOoDQogICAgICAgIHN1YkRhdGU6ICcnIC8v5aGr5oql5pe26Ze0DQogICAgICB9DQogICAgfSwNCiAgICBvbkxlYXZlclR5cGVTZWxlY3QoaXRlbSkgew0KICAgICAgdGhpcy5zaG93TGVhdmVyVHlwZSA9IGZhbHNlDQogICAgICB0aGlzLmZvcm1EYXRhLmxlYXZlclR5cGUgPSBpdGVtLm5hbWUNCiAgICB9LA0KICAgIG9uaGFuZG9mZlBlcnNvblNlbGVjdChpdGVtKSB7DQogICAgICB0aGlzLnNob3doYW5kb2ZmUGVyc29uID0gZmFsc2UNCiAgICAgIHRoaXMuZm9ybURhdGEuaGFuZG9mZlBlcnNvbiA9IGl0ZW0ubmFtZQ0KICAgICAgdGhpcy5mb3JtRGF0YS5oYW5kb2ZmUGVyc29uSWQgPSBpdGVtLmlkDQogICAgfSwNCiAgICBiZWdpbkNvbmZpcm0odGltZSkgew0KICAgICAgdGhpcy5zaG93QmVnaW5QaWNrZXIgPSBmYWxzZQ0KICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydFRpbWUgPSBmb3JtYXRJU084NjAxVGltZShuZXcgRGF0ZSh0aW1lKS50b0pTT04oKSkNCiAgICAgIHRoaXMuY2FsY0xlYXZlRGF5KCkNCiAgICB9LA0KICAgIGVuZENvbmZpcm0odGltZSkgew0KICAgICAgdGhpcy5zaG93RW5kUGlja2VyID0gZmFsc2UNCiAgICAgIHRoaXMuZm9ybURhdGEuZW5kVGltZSA9IGZvcm1hdElTTzg2MDFUaW1lKG5ldyBEYXRlKHRpbWUpLnRvSlNPTigpKQ0KICAgICAgdGhpcy5jYWxjTGVhdmVEYXkoKQ0KICAgIH0sDQogICAgLy8g6K6h566X6K+35YGH5aSp5pWwDQogICAgY2FsY0xlYXZlRGF5KCkgew0KICAgICAgaWYgKHRoaXMuZm9ybURhdGEuc3RhcnRUaW1lICE9PSAnJyAmJiB0aGlzLmZvcm1EYXRhLmVuZFRpbWUgIT09ICcnKSB7DQogICAgICAgIGxldCBoID0gZGlmZih0aGlzLmZvcm1EYXRhLmVuZFRpbWUsIHRoaXMuZm9ybURhdGEuc3RhcnRUaW1lKSAvL+aXtumXtOW3rg0KICAgICAgICBpZiAoaCA8PSAwKSB7DQogICAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRUaW1lID0gJycNCiAgICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn57uT5p2f5pe26Ze06ZyA5aSn5LqO5byA5aeL5pe26Ze0IScgfSkNCiAgICAgICAgfQ0KICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy53b3JrVGltZSkNCiAgICAgICAgb2JqLmJlZ2luQXQgPSB0aGlzLmZvcm1EYXRhLnN0YXJ0VGltZQ0KICAgICAgICBvYmouZW5kQXQgPSB0aGlzLmZvcm1EYXRhLmVuZFRpbWUNCiAgICAgICAgbGV0IGxlYXZlSG91cnMgPSBnZXRUb3RhbChvYmopDQoNCiAgICAgICAgbGV0IHdob2xlV29ya1RpbWUgPQ0KICAgICAgICAgIHRoaXMud29ya1RpbWUuc3RhcnRGcmVlVGltZSAtDQogICAgICAgICAgdGhpcy53b3JrVGltZS5zdGFydFdvcmtUaW1lICsNCiAgICAgICAgICB0aGlzLndvcmtUaW1lLmVuZFdvcmtUaW1lIC0NCiAgICAgICAgICB0aGlzLndvcmtUaW1lLmVuZEZyZWVUaW1lDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCLkuIrnj63mgLvml7bplb/vvJoiK3dob2xlV29ya1RpbWUpOw0KICAgICAgICBsZXQgZGF5ID0gbGVhdmVIb3VycyAvIHdob2xlV29ya1RpbWUNCiAgICAgICAgbGV0IGFyckRheSA9IGRheS50b1N0cmluZygpLnNwbGl0KCcuJykNCiAgICAgICAgaWYgKGFyckRheVswXSA+IDApIHsNCiAgICAgICAgICBsZXQgeHMgPSBkYXkgLSBhcnJEYXlbMF0NCiAgICAgICAgICAvLyB4cyA9cGFyc2VGbG9hdCgnMC4nK3hzKQ0KICAgICAgICAgIGlmICh4cyA+IDAgJiYgeHMgPCAwLjUpIHsNCiAgICAgICAgICAgIGRheSA9IHBhcnNlSW50KGFyckRheVswXSkgKyAwLjUNCiAgICAgICAgICB9IGVsc2UgaWYgKHhzID4gMC41KSB7DQogICAgICAgICAgICBkYXkgPSBwYXJzZUludChhcnJEYXlbMF0pICsgMQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoZGF5ID4gMCAmJiBkYXkgPCAwLjUpIHsNCiAgICAgICAgICAgIGRheSA9IDAuNQ0KICAgICAgICAgIH0gZWxzZSBpZiAoZGF5ID4gMC41KSB7DQogICAgICAgICAgICBkYXkgPSAxDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZm9ybURhdGEubGVhdmVEYXkgPSBkYXkgKyAnJw0KICAgICAgfQ0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICAvLyBpZiAoIXRoaXMudXNlclJvbGVQYXJlbnRDb2RlKSB7DQogICAgICAvLyAgIHJldHVybiB0aGlzLiRub3RpZnkoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6ICfphY3nva7plJnor6/jgIHml6Dms5Xojrflj5blrqHmibnmtYHnqIvvvIzor7fogZTns7vnrqHnkIblkZjvvIEnIH0pDQogICAgICAvLyB9DQogICAgICAvLyBsZXQgZmxvd09iaiA9IHRoaXMuZmxvd1R5cGVzLmZpbmQoZSA9PiBlLmtleSA9PT0gdGhpcy51c2VyUm9sZVBhcmVudENvZGUpDQogICAgICAvLyBpZiAoIWZsb3dPYmopIHsNCiAgICAgIC8vICAgcmV0dXJuIHRoaXMuJG5vdGlmeSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+mFjee9rumUmeivr+OAgeaXoOazleiOt+WPluWuoeaJuea1geeoi++8jOivt+iBlOezu+euoeeQhuWRmO+8gScgfSkNCiAgICAgIC8vIH0NCiAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmZvcm1EYXRhKQ0KICAgICAgb2JqLnN1YkRhdGUgPSBnZXROb3dEYXRlKCkNCiAgICAgIG9iai5wcm9jZXNzRGVmaW5pdGlvbktleSA9IHRoaXMuZmxvd0tleQ0KICAgICAgc3VibWl0TGVhdmUob2JqKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLmlzc3VlU3RlcChkYXRhKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGlzc3VlU3RlcChwYXJhbXMpIHsNCiAgICAgIGdldEZsb3dBdWRpdEVudHJ5KHsNCiAgICAgICAgZmxvd0tleTogdGhpcy5mbG93S2V5LA0KICAgICAgICBidWlsZFNlY3Rpb246IHRoaXMuY3VycmVudEJpYW9EdWFuLmlkLA0KICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuY3VyUHJvamVjdC5pZA0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICBsZXQgYXJyID0gW10NCiAgICAgICAgbGV0IHsgZGF0YSB9ID0gcmVzDQogICAgICAgIGZvciAobGV0IGkgaW4gZGF0YSkgew0KICAgICAgICAgIGFyciA9IGFyci5jb25jYXQoZGF0YVtpXSkNCiAgICAgICAgfQ0KICAgICAgICBsZXQgdXNlck1hcCA9IHt9DQogICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGxldCB2YWx1ZSA9IGl0ZW0uZW50cnlVc2VyVmFyaWFibGUNCiAgICAgICAgICB1c2VyTWFwW3ZhbHVlXSA9IGl0ZW0udXNlck5hbWVzLnRvU3RyaW5nKCkNCiAgICAgICAgfSkNCiAgICAgICAgdXNlck1hcC5zdGFydFVzZXJOYW1lID0gdGhpcy51c2VyaW5mby5uYW1lDQogICAgICAgIGxldCBvYmogPSB7DQogICAgICAgICAgY29weURhdGE6IHt9LA0KICAgICAgICAgIGZsb3dUYXNrQ29tbWVudER0bzogew0KICAgICAgICAgICAgYXBwcm92YWxUeXBlOiAnJywNCiAgICAgICAgICAgIGNvbW1lbnQ6ICcnLA0KICAgICAgICAgICAgZGVsZWdhdGVBc3NnaW5lZTogJycNCiAgICAgICAgICB9LA0KICAgICAgICAgIG1hc3RlckRhdGE6IHt9LA0KICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiBwYXJhbXMsDQogICAgICAgICAgc2xhdmVEYXRhOiB7fSwNCiAgICAgICAgICB0YXNrSWQ6ICcnLA0KICAgICAgICAgIHRhc2tWYXJpYWJsZURhdGE6IHVzZXJNYXANCiAgICAgICAgfQ0KICAgICAgICBzdWJtaXRVc2VyVGFzayhvYmopLnRoZW4ocmVzMSA9PiB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgIHJldHVybiB0aGlzLiRub3RpZnkoeyB0eXBlOiAnc3VjY2VzcycsIG1lc3NhZ2U6ICfloavmiqXmiJDlip/vvIEnIH0pDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgbGlzdEZsb3dUYXNrQ29tbWVudCgpIHsNCiAgICAgIGxpc3RGbG93VGFza0NvbW1lbnQoeyBwcm9jZXNzSW5zdGFuY2VJZDogdGhpcy4kcm91dGUucGFyYW1zLnByb2Nlc3NJbnN0YW5jZUlkIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5sb2dEYXRhID0gcmVzLmRhdGENCiAgICAgICAgdGhpcy5mbG93U3RlcCA9IHRoaXMubG9nRGF0YS5sZW5ndGggPiAwID8gdGhpcy5sb2dEYXRhLmxlbmd0aCAtIDEgOiAwDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["takeVacationAdd.vue"],"names":[],"mappings":";AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"takeVacationAdd.vue","sourceRoot":"src/views/project/contract","sourcesContent":["<template>\r\n  <div :style=\"{ height: scrollerHeight }\" class=\"info\">\r\n    <van-form @submit=\"onSubmit\" :v-model=\"formData\">\r\n      <div class=\"head\">\r\n        <span>基本信息</span>\r\n        <van-button class=\"operate\" type=\"primary\" size=\"mini\" v-if=\"add\">提交</van-button>\r\n      </div>\r\n      <van-cell-group inset>\r\n        <van-field v-model=\"formData.leaverPersonName\" label=\"请假人\" readonly />\r\n        <van-field\r\n          label=\"请假类型\"\r\n          v-model=\"formData.leaverType\"\r\n          is-link\r\n          readonly\r\n          placeholder=\"请选择\"\r\n          @click=\"showLeaverType = true\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.leaverType\" label=\"请假类型\" readonly />\r\n        <van-field\r\n          v-model=\"formData.startTime\"\r\n          is-link\r\n          readonly\r\n          name=\"calendar\"\r\n          label=\"开始时间\"\r\n          placeholder=\"点击选择日期\"\r\n          @click=\"showBeginPicker = true\"\r\n          :rules=\"[{ required: true, message: '请选择开始时间' }]\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.startTime\" label=\"开始时间\" readonly />\r\n\r\n        <van-field\r\n          v-model=\"formData.endTime\"\r\n          is-link\r\n          readonly\r\n          name=\"calendar\"\r\n          label=\"结束时间\"\r\n          placeholder=\"点击选择日期\"\r\n          @click=\"showEndPicker = true\"\r\n          :rules=\"[{ required: true, message: '请选择结束时间' }]\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.endTime\" label=\"结束时间\" readonly />\r\n\r\n        <van-field v-model=\"formData.leaveDay\" label=\"请假天数\" readonly />\r\n        <van-field\r\n          label=\"工作交接人\"\r\n          v-model=\"formData.handoffPerson\"\r\n          is-link\r\n          readonly\r\n          placeholder=\"请选择\"\r\n          @click=\"showhandoffPerson = true\"\r\n          v-if=\"add\"\r\n        />\r\n        <van-field v-else v-model=\"formData.handoffPerson\" label=\"工作交接人\" readonly />\r\n        <van-field\r\n          v-model=\"formData.leaveReason\"\r\n          label=\"请假原因\"\r\n          :readonly=\"!add\"\r\n          :rules=\"[{ required: true, message: '请输入请假原因' }]\"\r\n        />\r\n        <van-field v-model=\"formData.remark\" label=\"备注\" :readonly=\"!add\" />\r\n      </van-cell-group>\r\n      <!-- <div v-if=\"add\">\r\n        <approveuser :auditUser=\"auditUser\" :flowKey=\"flowKey\"> </approveuser>\r\n      </div> -->\r\n      <!-- <div class=\"btn-con\">\r\n        <van-button type=\"primary\" v-if=\"add\">提交</van-button>\r\n      </div> -->\r\n    </van-form>\r\n    <flowStep :flowTypes=\"flowTypes\" :step=\"flowStep\"></flowStep>\r\n    <div v-if=\"!add\">\r\n      <p class=\"title\">审批记录</p>\r\n      <van-cell-group inset>\r\n        <van-steps direction=\"vertical\" :active=\"logData.length - 1\">\r\n          <van-step v-for=\"(item, index) in logData\" :key=\"index\">\r\n            <h3>{{ item.taskName }}</h3>\r\n            <p>执行人：{{ item.createName }}</p>\r\n            <p>操作：{{ item.approvalType }}</p>\r\n            <p>审批意见：{{ item.comment }}</p>\r\n            <p>处理时间：{{ item.createTime }}</p>\r\n          </van-step>\r\n        </van-steps>\r\n      </van-cell-group>\r\n    </div>\r\n    <van-action-sheet v-model=\"showLeaverType\" :actions=\"eventType\" @select=\"onLeaverTypeSelect\" />\r\n    <van-action-sheet v-model=\"showhandoffPerson\" :actions=\"handoffPerson\" @select=\"onhandoffPersonSelect\" />\r\n    <van-popup v-model=\"showBeginPicker\" position=\"bottom\">\r\n      <van-datetime-picker\r\n        v-model=\"currentDate\"\r\n        type=\"datetime\"\r\n        @confirm=\"beginConfirm\"\r\n        @cancel=\"showBeginPicker = false\"\r\n      />\r\n    </van-popup>\r\n    <van-popup v-model=\"showEndPicker\" position=\"bottom\">\r\n      <van-datetime-picker\r\n        v-model=\"currentDate\"\r\n        type=\"datetime\"\r\n        @confirm=\"endConfirm\"\r\n        @cancel=\"showEndPicker = false\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { getDic } from '@/api/userauth'\r\nimport { getRoleInfoByUserId, getUserRoleAndCode, submitLeave } from '@/api/project'\r\nimport { getFlowAuditEntry, submitUserTask, listFlowTaskComment } from '@/api/quality'\r\nimport { diff, getTotal, getNowDate } from '@/utils/date'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport approveuser from '@/views/common/approveuser.vue'\r\nimport flowStep from '@/views/common/flowStep.vue'\r\nexport default {\r\n  computed: {\r\n    ...mapGetters(['userinfo', 'currentBiaoDuan', 'curProject']),\r\n    scrollerHeight() {\r\n      return window.innerHeight - 85 + 'px'\r\n    }\r\n  },\r\n  components: {\r\n    approveuser,\r\n    flowStep\r\n  },\r\n  data() {\r\n    return {\r\n      add: true,\r\n      formData: [],\r\n      handoffPerson: [], //工作交接可选人\r\n      eventType: [],\r\n      userRoleParentCode: '',\r\n      flowTypes: [\r\n        {\r\n          key: 'shigongjihe', //施工单位人员请假\r\n          flowKey: 'sgdwryqj'\r\n        },\r\n        {\r\n          key: 'jianlijihe', //监理单位人员请假\r\n          flowKey: 'jldwryqj'\r\n        },\r\n        {\r\n          key: 'quanzijihe', //全咨单位人员请假\r\n          flowKey: 'qzdwryqj'\r\n        }\r\n      ],\r\n      showLeaverType: false,\r\n      showhandoffPerson: false,\r\n      currentDate: new Date(),\r\n      showBeginPicker: false,\r\n      showEndPicker: false,\r\n\r\n      logData: [],\r\n\r\n      auditUser: {},\r\n\r\n      workTime: {\r\n        startWorkTime: 8.5, //上班时间\r\n        endWorkTime: 18, //下班时间\r\n        startFreeTime: 12, //午休开始时间\r\n        endFreeTime: 13.5, //午休结束时间\r\n        excludeFreeTime: true, //是否去除午休时间\r\n        excludeDates: [] //剔除日期数组\r\n      },\r\n      flowKey: '',\r\n      flowStep: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(this.$route.params)\r\n    if (this.$route.params.flowKey) {\r\n      this.flowKey = this.$route.params.flowKey\r\n      this.init()\r\n    } else {\r\n      this.add = false\r\n      this.formData = Object.assign({}, this.$route.params)\r\n      this.listFlowTaskComment()\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      getDic('qjlx').then(data => {\r\n        this.eventType = data.qjlx\r\n      })\r\n      getRoleInfoByUserId({ projectid: this.currentBiaoDuan.id }).then(data => {\r\n        this.handoffPerson = data.filter(e => e.id !== this.userinfo.id)\r\n      })\r\n      //获取用户角色\r\n      // getUserRoleAndCode({ projectId: this.currentBiaoDuan.id }).then(data => {\r\n      //   if (data) {\r\n      //     this.userRoleParentCode = data.parentCode\r\n      //   }\r\n      // })\r\n      this.initForm()\r\n    },\r\n    initForm() {\r\n      this.formData = {\r\n        startTime: '', //开始时间\r\n        endTime: '', //结束时间\r\n        handoffPerson: '', //工作交接人\r\n        handoffPersonId: null, //交接人ID\r\n        leaveDay: null, //请假天数\r\n        leavePersonId: this.userinfo.id, //leavePersonId\r\n        leaverPersonName: this.userinfo.name, //leaverPersonName\r\n        leaveReason: '', //leaveReason\r\n        leaverType: '', //请假类型id\r\n        projectId: this.currentBiaoDuan.id, //项目id\r\n        remark: '', //备注\r\n        subDate: '' //填报时间\r\n      }\r\n    },\r\n    onLeaverTypeSelect(item) {\r\n      this.showLeaverType = false\r\n      this.formData.leaverType = item.name\r\n    },\r\n    onhandoffPersonSelect(item) {\r\n      this.showhandoffPerson = false\r\n      this.formData.handoffPerson = item.name\r\n      this.formData.handoffPersonId = item.id\r\n    },\r\n    beginConfirm(time) {\r\n      this.showBeginPicker = false\r\n      this.formData.startTime = formatISO8601Time(new Date(time).toJSON())\r\n      this.calcLeaveDay()\r\n    },\r\n    endConfirm(time) {\r\n      this.showEndPicker = false\r\n      this.formData.endTime = formatISO8601Time(new Date(time).toJSON())\r\n      this.calcLeaveDay()\r\n    },\r\n    // 计算请假天数\r\n    calcLeaveDay() {\r\n      if (this.formData.startTime !== '' && this.formData.endTime !== '') {\r\n        let h = diff(this.formData.endTime, this.formData.startTime) //时间差\r\n        if (h <= 0) {\r\n          this.formData.endTime = ''\r\n          return this.$notify({ type: 'warning', message: '结束时间需大于开始时间!' })\r\n        }\r\n        let obj = Object.assign({}, this.workTime)\r\n        obj.beginAt = this.formData.startTime\r\n        obj.endAt = this.formData.endTime\r\n        let leaveHours = getTotal(obj)\r\n\r\n        let wholeWorkTime =\r\n          this.workTime.startFreeTime -\r\n          this.workTime.startWorkTime +\r\n          this.workTime.endWorkTime -\r\n          this.workTime.endFreeTime\r\n        // console.log(\"上班总时长：\"+wholeWorkTime);\r\n        let day = leaveHours / wholeWorkTime\r\n        let arrDay = day.toString().split('.')\r\n        if (arrDay[0] > 0) {\r\n          let xs = day - arrDay[0]\r\n          // xs =parseFloat('0.'+xs)\r\n          if (xs > 0 && xs < 0.5) {\r\n            day = parseInt(arrDay[0]) + 0.5\r\n          } else if (xs > 0.5) {\r\n            day = parseInt(arrDay[0]) + 1\r\n          }\r\n        } else {\r\n          if (day > 0 && day < 0.5) {\r\n            day = 0.5\r\n          } else if (day > 0.5) {\r\n            day = 1\r\n          }\r\n        }\r\n        this.formData.leaveDay = day + ''\r\n      }\r\n    },\r\n    onSubmit() {\r\n      // if (!this.userRoleParentCode) {\r\n      //   return this.$notify({ type: 'warning', message: '配置错误、无法获取审批流程，请联系管理员！' })\r\n      // }\r\n      // let flowObj = this.flowTypes.find(e => e.key === this.userRoleParentCode)\r\n      // if (!flowObj) {\r\n      //   return this.$notify({ type: 'warning', message: '配置错误、无法获取审批流程，请联系管理员！' })\r\n      // }\r\n      let obj = Object.assign({}, this.formData)\r\n      obj.subDate = getNowDate()\r\n      obj.processDefinitionKey = this.flowKey\r\n      submitLeave(obj).then(data => {\r\n        this.issueStep(data)\r\n      })\r\n    },\r\n    issueStep(params) {\r\n      getFlowAuditEntry({\r\n        flowKey: this.flowKey,\r\n        buildSection: this.currentBiaoDuan.id,\r\n        projectId: this.curProject.id\r\n      }).then(res => {\r\n        let arr = []\r\n        let { data } = res\r\n        for (let i in data) {\r\n          arr = arr.concat(data[i])\r\n        }\r\n        let userMap = {}\r\n        arr.forEach(item => {\r\n          let value = item.entryUserVariable\r\n          userMap[value] = item.userNames.toString()\r\n        })\r\n        userMap.startUserName = this.userinfo.name\r\n        let obj = {\r\n          copyData: {},\r\n          flowTaskCommentDto: {\r\n            approvalType: '',\r\n            comment: '',\r\n            delegateAssginee: ''\r\n          },\r\n          masterData: {},\r\n          processInstanceId: params,\r\n          slaveData: {},\r\n          taskId: '',\r\n          taskVariableData: userMap\r\n        }\r\n        submitUserTask(obj).then(res1 => {\r\n          this.$router.go(-1)\r\n          return this.$notify({ type: 'success', message: '填报成功！' })\r\n        })\r\n      })\r\n    },\r\n    listFlowTaskComment() {\r\n      listFlowTaskComment({ processInstanceId: this.$route.params.processInstanceId }).then(res => {\r\n        this.logData = res.data\r\n        this.flowStep = this.logData.length > 0 ? this.logData.length - 1 : 0\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/css/steps.scss';\r\n.info {\r\n  overflow: auto;\r\n  .head {\r\n    height: 36px;\r\n    line-height: 36px;\r\n    padding: 0 20px;\r\n    .operate {\r\n      float: right;\r\n      margin-top: 5px;\r\n      width: 80px;\r\n    }\r\n  }\r\n  .title {\r\n    margin-left: 20px;\r\n  }\r\n  .btn-con {\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    padding: 10px 30px;\r\n    .van-button--normal {\r\n      padding: 0px 45px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}