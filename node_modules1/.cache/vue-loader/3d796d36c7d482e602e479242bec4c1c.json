{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue?vue&type=style&index=0&id=8f4e66be&lang=scss&scoped=true&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue","mtime":1684246188044},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1684411443176},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1684411446724},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1684411443221},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1684411446938},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucmVwb3J0LXJlY29yZCB7DQogIGhlaWdodDogMTAwJTsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCn0NCg=="},{"version":3,"sources":["produceRecord.vue"],"names":[],"mappings":";AA8KA;AACA;AACA;AACA","file":"produceRecord.vue","sourceRoot":"src/views/project/quality","sourcesContent":["<template>\r\n  <div class=\"report-record\">\r\n    <van-cell-group inset class=\"common-card\" style=\"margin-bottom: 0\" ref=\"queryGroup\">\r\n      <van-field\r\n        label=\"状态\"\r\n        v-model=\"queryItem.name\"\r\n        is-link\r\n        readonly\r\n        placeholder=\"请选择状态\"\r\n        @click=\"showStatusSelect = true\"\r\n      />\r\n      <van-field\r\n        label=\"构件名称\"\r\n        v-model=\"conponentname\"\r\n        placeholder=\"请输入构件名称\"\r\n        clearable\r\n      />\r\n      <van-field\r\n        label=\"工序名称\"\r\n        v-model=\"producename\"\r\n        placeholder=\"请输入工序名称\"\r\n        clearable\r\n      />\r\n    </van-cell-group>\r\n    <van-list\r\n      :finished=\"finished\"\r\n      finished-text=\"我也是有底线的~~\"\r\n      @load=\"onLoad\"\r\n      class=\"common-list common-card\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in listTemp\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === listTemp.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件编码：</span>\r\n          <span class=\"value\">{{ item.conponentcode }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件名称：</span>\r\n          <span class=\"value\">{{ item.conponentname }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">工序名称：</span>\r\n          <span class=\"value\">{{ item.producename }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">审核人：</span>\r\n          <span class=\"value\">{{ item.checkusername }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">填报人：</span>\r\n          <span class=\"value\">{{ item.updateusername }}</span>\r\n        </div>\r\n        <div v-if=\"item.updatetime\" class=\"content\">\r\n          <span class=\"name\">系统录入：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.updatetime) }}</span>\r\n        </div>\r\n        <div v-if=\"item.stime\" class=\"content\">\r\n          <span class=\"name\">工序填报：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.stime) }}</span>\r\n        </div>\r\n        <div class=\"content\" style=\"text-align: center;\">\r\n          <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\">举牌照片</van-button>\r\n          <van-button style=\"margin-left:10px\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\"\r\n            >PDF</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPic(item, 'testurl')\"\r\n            >审核照片</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPdf(item, 'standbyrecode')\"\r\n            >审核PDF</van-button\r\n          >\r\n        </div>\r\n        <div class=\"operate center-in-vertical\">\r\n          <img v-if=\"item.checkresult === 3\" :src=\"require(`assets/image/待审核.png`)\" />\r\n          <img v-if=\"item.checkresult === 1\" :src=\"require(`assets/image/已通过.png`)\" />\r\n          <img v-if=\"item.checkresult === 2\" :src=\"require(`assets/image/已驳回.png`)\" />\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n    <van-action-sheet v-model=\"showStatusSelect\" :actions=\"statusActions\" @select=\"onStatusSelect\" />\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getAllReverse } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nexport default {\r\n  components: {\r\n    PdfPreview\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      listTemp: [],\r\n      refreshing: false,\r\n      finished: false,\r\n      formatISO8601Time,\r\n      scrollerHeight: '',\r\n      queryItem: {},\r\n      conponentname: '',\r\n      producename: '',\r\n      showStatusSelect: false,\r\n      statusActions: [{name:'所有',status: -1},{name:'未填报',status: 0},{name:'待审核',status: 3},{name:'已通过',status: 1},{name:'已驳回',status: 2}]\r\n    }\r\n  },\r\n  watch: {\r\n    conponentname: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n    producename: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.scrollerHeight = window.innerHeight - 100 - this.$refs['queryGroup'].offsetHeight + 'px'\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    onStatusSelect(item) {\r\n      let that = this\r\n      this.showStatusSelect = false\r\n      this.queryItem = item\r\n      if (item.status === -1 && that.conponentname === '' && that.producename === '') {\r\n        this.listTemp = this.list\r\n        return\r\n      }\r\n      let temp = []\r\n      this.list.forEach(_item => {\r\n        _item.conponentname = _item.conponentname || ''\r\n        if ((_item.checkresult === item.status || item.status === -1) &&\r\n        _item.conponentname.indexOf(that.conponentname) !== -1 &&\r\n        _item.producename.indexOf(that.producename) !== -1) {\r\n          temp.push(_item)\r\n        }\r\n      })\r\n      this.listTemp = temp\r\n    },\r\n    onLoad() {\r\n      let that = this\r\n      let params = {}\r\n      getAllReverse(params).then(data => {\r\n        that.list = data\r\n        that.listTemp = that.list\r\n        that.refreshing = false\r\n        that.finished = true\r\n        that.onStatusSelect(JSON.parse(JSON.stringify(this.statusActions[0])))\r\n      })\r\n    },\r\n    previewPic(item, field) {\r\n      this.$refs['pdfPreview'].showPic(item.recodeid, field)\r\n    },\r\n    previewPdf(item, field) {\r\n      this.$refs['pdfPreview'].show(item.recodeid, field)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.report-record {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n"]}]}