{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\newPage\\supervisionOfInstruction.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\newPage\\supervisionOfInstruction.vue","mtime":1684246188032},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0ICogYXMgYXBpIGZyb20gIkAvYXBpL3F1YWxpdHkiOw0KCWltcG9ydCB7DQoJCWZvcm1hdERhdGUNCgl9IGZyb20gIkAvdXRpbHMvZm9ybWF0LmpzIjsNCgkvLyBpbXBvcnQgZWRpdCBmcm9tICcuL3N1cGVydmlzaW9uT2ZJbnN0cnVjdGlvbi9lZGl0JzsNCglpbXBvcnQgZGV0YWlsIGZyb20gJy4vc3VwZXJ2aXNpb25PZkluc3RydWN0aW9uL2RldGFpbCc7DQoJaW1wb3J0IHsNCgkJbWFwR2V0dGVycw0KCX0gZnJvbSAndnVleCcNCg0KCWV4cG9ydCBkZWZhdWx0IHsNCgkJcHJvcHM6IHsNCgkJCWlzRHJhZnQ6IHsNCgkJCQl0eXBlOiBCb29sZWFuLA0KCQkJCWRlZmF1bHQ6IGZhbHNlDQoJCQl9DQoJCX0sDQoJCWNvbXBvbmVudHM6IHsNCgkJCS8vIGVkaXQsDQoJCQlkZXRhaWwNCgkJfSwNCgkJZGF0YSgpIHsNCgkJCXJldHVybiB7DQoJCQkJYWxsRGF0YTogW10sDQoJCQkJdGFibGVEYXRhOiBbXSwNCgkJCQlsb2FkaW5nOiBmYWxzZSwNCgkJCQlmaW5pc2hlZDogZmFsc2UsDQoJCQkJb3BlcmF0ZUJ0bnNWaXNpYmxlOiB0cnVlLA0KCQkJCWRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCgkJCQlxdWVyeURhdGE6IHsgLy/mn6Xor6Llj4LmlbANCgkJCQkJY3JlYXRlU3RhcnRUaW1lOiBudWxsLA0KCQkJCQljcmVhdGVFbmRUaW1lOiBudWxsLA0KCQkJCQljcmVhdGVVc2VyTmFtZTogJycsDQoNCgkJCQkJZHJhZnRGbGFnOiAxLA0KCQkJCQlwYWdlTnVtOiAxLA0KCQkJCQl0b3RhbFBhZ2U6IDEsDQoJCQkJCXBhZ2VTaXplOiAxMCwNCgkJCQkJYnVpbGRTZWN0aW9uOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmN1cnJlbnRCaWFvRHVhbi5pZCB8fCAzLA0KCQkJCQlwcm9qZWN0SWQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuY3VyUHJvamVjdC5pZCB8fCAyLA0KCQkJCX0sDQoJCQkJY3VycmVudFBhdHRlcm46IDAsIC8vMOafpeeci++8jDHmlrDlop7vvIwy5L+u5pS5DQoJCQkJZWRpdFJvdzogbnVsbCwNCgkJCQlkZXRhaWxSb3c6IG51bGwNCgkJCX07DQoJCX0sDQoJCWNyZWF0ZWQoKSB7fSwNCgkJY29tcHV0ZWQ6IHsNCgkJCS4uLm1hcEdldHRlcnMoWyJwcm9qZWN0Il0pLA0KCQkJc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKCkgew0KCQkJCXJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA5MSArICdweCcNCgkJCX0NCgkJfSwNCgkJbW91bnRlZCgpIHsNCgkJCS8vIHRoaXMucXVlcnkoKTsNCgkJfSwNCgkJbWV0aG9kczogew0KCQkJcXVlcnkoKSB7DQoJCQkJdGhpcy5xdWVyeURhdGEuZHJhZnRGbGFnID0gdGhpcy5pc0RyYWZ0ID8gMCA6IDE7DQoJCQkJYXBpLmdldFN1cGVydmlzaW9uT3JkZXJMaXN0KHRoaXMucXVlcnlEYXRhKS50aGVuKChyZXMpID0+IHsNCgkJCQkJdGhpcy5hbGxEYXRhID0gcmVzLmRhdGEgfHwge307DQoJCQkJCXRoaXMudGFibGVEYXRhID0gWy4uLnRoaXMudGFibGVEYXRhLC4uLnRoaXMuYWxsRGF0YVsnbGlzdCddfHxbXV0NCgkJCQkJdGhpcy5xdWVyeURhdGEucGFnZU51bSA9IHJlcy5kYXRhLnBhZ2VOdW0gKyAxOw0KCQkJCQl0aGlzLnF1ZXJ5RGF0YS50b3RhbFBhZ2UgPSByZXMuZGF0YS50b3RhbDsNCgkJCQkJdGhpcy5xdWVyeURhdGEucGFnZVNpemUgPSByZXMuZGF0YS5wYWdlU2l6ZTsNCg0KCQkJCQkvLyDliqDovb3nirbmgIHnu5PmnZ8NCgkJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7DQoJCQkJCS8vIOaVsOaNruWFqOmDqOWKoOi9veWujOaIkA0KCQkJCQlpZiAodGhpcy50YWJsZURhdGEubGVuZ3RoID49IHJlcy5kYXRhLnRvdGFsKSB7DQoJCQkJCQl0aGlzLmZpbmlzaGVkID0gdHJ1ZTsNCgkJCQkJfQ0KCQkJCX0pOw0KCQkJfSwNCgkJCWFkZE5ldygpIHsNCgkJCQkvLyB0aGlzLmVkaXRSb3cgPSBudWxsOw0KCQkJCXRoaXMuJHJlZnMuZWRpdC5jaGFuZ2VWaXNpYmxlKG51bGwsIHRydWUpOw0KCQkJfSwNCgkJCW1vZGlmeShyb3cpIHsNCgkJCQkvLyB0aGlzLmVkaXRSb3cgPSByb3c7DQoJCQkJdGhpcy4kcmVmcy5lZGl0LmNoYW5nZVZpc2libGUocm93LCB0cnVlKTsNCgkJCX0sDQoJCQl2aWV3RGV0YWlsKHJvdykgew0KCQkJCXRoaXMuZGV0YWlsUm93ID0gcm93Ow0KCQkJCXRoaXMuJHJlZnMuZGV0YWlsLmNoYW5nZVZpc2libGUodHJ1ZSk7DQoJCQl9LA0KCQkJZGVsZXRlUm93KHJvdykgew0KCQkJCXRoaXMuJGNvbmZpcm0oJ+ehruiupOaYr+WQpuWIoOmZpD8nLCAn5o+Q56S6Jywgew0KCQkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KCQkJCQl0eXBlOiAnd2FybmluZycNCgkJCQl9KS50aGVuKCgpID0+IHsNCgkJCQkJYXBpLmRlbGV0ZVN1cGVydmlzaW9uT3JkZXIocm93WydpZCddKS50aGVuKChyZXMpID0+IHsNCgkJCQkJCWlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPT0gMSkgew0KCQkJCQkJCXRoaXMucXVlcnlEYXRhLnBhZ2VOdW0gPSB0aGlzLnF1ZXJ5RGF0YS5wYWdlTnVtID4gMSA/IHRoaXMucXVlcnlEYXRhLnBhZ2VOdW0gLQ0KCQkJCQkJCQkxIDogMQ0KCQkJCQkJfQ0KCQkJCQkJdGhpcy5xdWVyeSgpOw0KCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQkJCW1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJw0KCQkJCQkJfSk7DQoJCQkJCX0pLmNhdGNoKGVycm9yID0+IHsNCgkJCQkJCXRoaXMuJG1lc3NhZ2Uoew0KCQkJCQkJCXR5cGU6ICdmYWlsJywNCgkJCQkJCQltZXNzYWdlOiAn5Yig6Zmk5aSx6LSlIScNCgkJCQkJCX0pOw0KCQkJCQl9KTsNCgkJCQl9KTsNCgkJCX0sDQoJCQloYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2UpIHsNCgkJCQl0aGlzLnF1ZXJ5RGF0YS5wYWdlTnVtID0gcGFnZQ0KCQkJCXRoaXMucXVlcnkoKQ0KCQkJfSwNCgkJCWNoZWNrRGV0YWlsKHJvdykgew0KCQkJCXRoaXMuJGVtaXQoImhpZGVEcmFmdCIpOw0KCQkJCXRoaXMuJGVtaXQoImdldERldGFpbCIsIHJvd1snaWQnXSk7DQoJCQl9DQoJCX0sDQoJfTsNCg=="},{"version":3,"sources":["supervisionOfInstruction.vue"],"names":[],"mappings":";AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"supervisionOfInstruction.vue","sourceRoot":"src/views/project/quality/newPage","sourcesContent":["<!--\r\n@name:\r\n@description: 监理指令\r\n@author: 王海林\r\n@time: 2022-06-01 14:52:48\r\n@modifier: zhouhai\r\n@modifierTime:2022-06-21 14:10:57\r\n-->\r\n<template>\r\n\t<el-container class=\"container-box\">\r\n\t\t<van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n\t\t\t\t<van-swipe-cell class=\"list\" v-for=\"(item, index) in tableData\" :key=\"index\" :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\">\r\n\t\t\t\t\t<div class=\"item\" style=\"\" @click=\"viewDetail(item)\">\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">施工标段：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.buildSectionName }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">指令编号：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.orderCode }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">指令标题：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.orderTitle }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"status\">\r\n\t\t\t\t\t\t\t{{ item.statusStr }}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\" style=\"padding-top: 5px; border-top: 1px solid #d7d7d7;\">\r\n\t\t\t\t\t\t\t<div style=\"float:left;\">{{item.createUserName}}</div>\r\n\t\t\t\t\t\t\t<div style=\"float:right;\">{{item.createTime}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"viewDetail(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</van-swipe-cell>\r\n\t\t</van-list>\r\n\t\t<!-- <edit ref=\"edit\" @query=\"query\" :editRow=\"editRow\"></edit> -->\r\n\t\t<detail ref=\"detail\" :detailRow=\"detailRow\"></detail>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n\timport * as api from \"@/api/quality\";\r\n\timport {\r\n\t\tformatDate\r\n\t} from \"@/utils/format.js\";\r\n\t// import edit from './supervisionOfInstruction/edit';\r\n\timport detail from './supervisionOfInstruction/detail';\r\n\timport {\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tisDraft: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t// edit,\r\n\t\t\tdetail\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tallData: [],\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\toperateBtnsVisible: true,\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tqueryData: { //查询参数\r\n\t\t\t\t\tcreateStartTime: null,\r\n\t\t\t\t\tcreateEndTime: null,\r\n\t\t\t\t\tcreateUserName: '',\r\n\r\n\t\t\t\t\tdraftFlag: 1,\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\tbuildSection: this.$store.getters.currentBiaoDuan.id || 3,\r\n\t\t\t\t\tprojectId: this.$store.getters.curProject.id || 2,\r\n\t\t\t\t},\r\n\t\t\t\tcurrentPattern: 0, //0查看，1新增，2修改\r\n\t\t\t\teditRow: null,\r\n\t\t\t\tdetailRow: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters([\"project\"]),\r\n\t\t\tscrollerHeight: function() {\r\n\t\t\t\treturn window.innerHeight - 91 + 'px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.query();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tquery() {\r\n\t\t\t\tthis.queryData.draftFlag = this.isDraft ? 0 : 1;\r\n\t\t\t\tapi.getSupervisionOrderList(this.queryData).then((res) => {\r\n\t\t\t\t\tthis.allData = res.data || {};\r\n\t\t\t\t\tthis.tableData = [...this.tableData,...this.allData['list']||[]]\r\n\t\t\t\t\tthis.queryData.pageNum = res.data.pageNum + 1;\r\n\t\t\t\t\tthis.queryData.totalPage = res.data.total;\r\n\t\t\t\t\tthis.queryData.pageSize = res.data.pageSize;\r\n\r\n\t\t\t\t\t// 加载状态结束\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t// 数据全部加载完成\r\n\t\t\t\t\tif (this.tableData.length >= res.data.total) {\r\n\t\t\t\t\t\tthis.finished = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taddNew() {\r\n\t\t\t\t// this.editRow = null;\r\n\t\t\t\tthis.$refs.edit.changeVisible(null, true);\r\n\t\t\t},\r\n\t\t\tmodify(row) {\r\n\t\t\t\t// this.editRow = row;\r\n\t\t\t\tthis.$refs.edit.changeVisible(row, true);\r\n\t\t\t},\r\n\t\t\tviewDetail(row) {\r\n\t\t\t\tthis.detailRow = row;\r\n\t\t\t\tthis.$refs.detail.changeVisible(true);\r\n\t\t\t},\r\n\t\t\tdeleteRow(row) {\r\n\t\t\t\tthis.$confirm('确认是否删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tapi.deleteSupervisionOrder(row['id']).then((res) => {\r\n\t\t\t\t\t\tif (this.tableData.length == 1) {\r\n\t\t\t\t\t\t\tthis.queryData.pageNum = this.queryData.pageNum > 1 ? this.queryData.pageNum -\r\n\t\t\t\t\t\t\t\t1 : 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.query();\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'fail',\r\n\t\t\t\t\t\t\tmessage: '删除失败!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(page) {\r\n\t\t\t\tthis.queryData.pageNum = page\r\n\t\t\t\tthis.query()\r\n\t\t\t},\r\n\t\t\tcheckDetail(row) {\r\n\t\t\t\tthis.$emit(\"hideDraft\");\r\n\t\t\t\tthis.$emit(\"getDetail\", row['id']);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.container-box {\r\n\t\tcolor: #000000;\r\n\t\tbackground-color: #FAFAFA;\r\n\t\theight: 100%;\r\n\t\twidth: calc(100% + 1px);\r\n  \t\toverflow-y: auto;\r\n\t\t.van-list{\r\n\t\t\twidth: 100%;\r\n\t\t\t.list {\r\n\t\t\t\t.item{\r\n\t\t\t\t\tpadding: 10px;\r\n\t\t\t\t\tborder:1px solid rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\tborder-radius:5px;\r\n\t\t\t\t\tmargin:5px;\r\n\t\t\t\t\tbox-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\t.block {\r\n\t\t\t\t\t\toverflow: auto;\r\n\t\t\t\t\t\t.block-name {\r\n\t\t\t\t\t\t\tfloat: left;\r\n\t\t\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\t\t\tcolor: rgb(85, 85, 85);\r\n\t\t\t\t\t\t\tmin-height: 24px;\r\n\t\t\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.block-value {\r\n\t\t\t\t\t\t\twidth: calc(100% - 120px);\r\n\t\t\t\t\t\t\tmargin-left: 120px;\r\n\t\t\t\t\t\t\tmin-height: 24px;\r\n\t\t\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.status {\r\n\t\t\t\t\t\tbackground: rgb(0, 132, 255);\r\n\t\t\t\t\t\tpadding: 1px 3px ;\r\n\t\t\t\t\t\tfont-size: 10px;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tright: 25px;\r\n\t\t\t\t\t\ttop: 8px;\r\n\t\t\t\t\t\tcolor: white;\r\n\t\t\t\t\t\tborder-radius: 3px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.van-button {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"]}]}