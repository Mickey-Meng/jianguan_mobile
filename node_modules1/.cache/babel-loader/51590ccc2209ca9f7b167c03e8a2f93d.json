{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\map\\LeafLetMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\map\\LeafLetMap.vue","mtime":1684246187884},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGxlYWZMZXRDb25maWcgfSBmcm9tICdAL2FwaS9tYXAuY29uZmlnLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYXNlTGF5ZXJzOiBbXSwKICAgICAgbGF5ZXJzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRNYXAoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRNYXA6IGZ1bmN0aW9uIGluaXRNYXAoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIEwuemxza21hcC5jcmVhdGVNYXAoewogICAgICAgIGlkOiAnbWFwJywKICAgICAgICBkYXRhOiBsZWFmTGV0Q29uZmlnLmluaXQsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhtYXAsIGdpcykgewogICAgICAgICAgX3RoaXMub25NYXBTdWNjZXNzKG1hcCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbk1hcFN1Y2Nlc3M6IGZ1bmN0aW9uIG9uTWFwU3VjY2VzcyhtYXApIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHdpbmRvdy5sZWFmTGV0TWFwID0gbWFwOwogICAgICBsZWFmTGV0Q29uZmlnLmJhc2VMYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICBfdGhpczIuZ2V0TGF5ZXIobWFwLCBsYXllciwgdHJ1ZSk7CiAgICAgIH0pOwogICAgICBsZWFmTGV0Q29uZmlnLmxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikgewogICAgICAgIF90aGlzMi5nZXRMYXllcihtYXAsIGxheWVyLCBmYWxzZSk7CiAgICAgIH0pOwogICAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2KSB7CiAgICAgICAgY29uc29sZS5sb2coZXYubGF0bG5nKTsgLy8gZXYgaXMgYW4gZXZlbnQgb2JqZWN0IChNb3VzZUV2ZW50IGluIHRoaXMgY2FzZSkKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGF5ZXI6IGZ1bmN0aW9uIGdldExheWVyKG1hcCwgcGFyYW1zLCBpc0Jhc2UpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgdHlwZSA9IHBhcmFtcy50eXBlLAogICAgICAgIG5hbWUgPSBwYXJhbXMubmFtZSwKICAgICAgICB2aXNpYmxlID0gcGFyYW1zLnZpc2libGU7CiAgICAgIHZhciBsYXllciA9IG51bGw7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ3RpbGUnOgogICAgICAgIGNhc2UgJ3d3d190ZHQnOgogICAgICAgICAgbGF5ZXIgPSBMLnpsc2ttYXAubGF5ZXIuY3JlYXRlTGF5ZXIocGFyYW1zKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3dtcyc6CiAgICAgICAgICBwYXJhbXMuY3JzID0gcGFyYW1zLmNycyB8fCBMLkNSUy5FUFNHNDMyNjsKICAgICAgICAgIGxheWVyID0gTC50aWxlTGF5ZXIud21zKHBhcmFtcy51cmwsIHBhcmFtcyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd3ZnMnOgogICAgICAgICAgbGF5ZXIgPSBMLndmc0xheWVyKHBhcmFtcyk7CiAgICAgICAgICBsYXllci5vbignY2xpY2snLCBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICAgICAgICB2YXIgaWQgPSBlLmxheWVyLmZlYXR1cmUuaWQ7CiAgICAgICAgICAgIHZhciBuYW1lID0gZS5sYXllci5mZWF0dXJlLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgdGhhdC4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIHBhdGg6ICcvcGFub3JhbWEnLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGxheWVyLnNldFpJbmRleCkgewogICAgICAgIHRoaXMubGF5ZXJJbmRleCsrOwogICAgICAgIGxheWVyLnNldFpJbmRleCh0aGlzLmxheWVySW5kZXgpOwogICAgICB9CiAgICAgIGlzQmFzZSA/IHRoaXMuYmFzZUxheWVycy5wdXNoKHsKICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICBsYXllcjogbGF5ZXIKICAgICAgfSkgOiB0aGlzLmxheWVycy5wdXNoKHsKICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICBsYXllcjogbGF5ZXIKICAgICAgfSk7CiAgICAgIHZpc2libGUgJiYgbGF5ZXIuYWRkVG8obWFwKTsKICAgICAgcmV0dXJuIGxheWVyOwogICAgfSwKICAgIGdvdG9Qb2ludDogZnVuY3Rpb24gZ290b1BvaW50KGxuZywgbGF0LCB6b29tLCBkdXJhdGlvbikgewogICAgICBsZWFmTGV0TWFwLmZseVRvKHsKICAgICAgICBsbmc6IGxuZywKICAgICAgICBsYXQ6IGxhdAogICAgICB9LCB6b29tIHx8IDE3LCB7CiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uIHx8IDEuNQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["leafLetConfig","data","baseLayers","layers","mounted","initMap","methods","_this","L","zlskmap","createMap","id","init","success","map","gis","onMapSuccess","_this2","window","leafLetMap","forEach","layer","getLayer","on","ev","console","log","latlng","params","isBase","that","type","name","visible","createLayer","crs","CRS","EPSG4326","tileLayer","wms","url","wfsLayer","e","feature","properties","$router","push","path","query","setZIndex","layerIndex","addTo","gotoPoint","lng","lat","zoom","duration","flyTo"],"sources":["src/components/map/LeafLetMap.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div id=\"map\" class=\"map\"></div>\r\n    >\r\n  </div>\r\n</template>\r\n<script>\r\nimport { leafLetConfig } from '@/api/map.config.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseLayers: [],\r\n      layers: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      L.zlskmap.createMap({\r\n        id: 'map',\r\n        data: leafLetConfig.init,\r\n        success: (map, gis) => {\r\n          this.onMapSuccess(map)\r\n        }\r\n      })\r\n    },\r\n    onMapSuccess(map) {\r\n      window.leafLetMap = map\r\n      leafLetConfig.baseLayers.forEach(layer => {\r\n        this.getLayer(map, layer, true)\r\n      })\r\n      leafLetConfig.layers.forEach(layer => {\r\n        this.getLayer(map, layer, false)\r\n      })\r\n      map.on('click', function(ev) {\r\n        console.log(ev.latlng) // ev is an event object (MouseEvent in this case)\r\n      })\r\n    },\r\n    getLayer(map, params, isBase) {\r\n      let that = this\r\n      let { type, name, visible } = params\r\n      let layer = null\r\n      switch (type) {\r\n        case 'tile':\r\n        case 'www_tdt':\r\n          layer = L.zlskmap.layer.createLayer(params)\r\n          break\r\n        case 'wms':\r\n          params.crs = params.crs || L.CRS.EPSG4326\r\n          layer = L.tileLayer.wms(params.url, params)\r\n          break\r\n        case 'wfs':\r\n          layer = L.wfsLayer(params)\r\n          layer.on('click', function(e, data) {\r\n            let id = e.layer.feature.id\r\n            let name = e.layer.feature.properties.name\r\n            that.$router.push({ path: '/panorama', query: { name, id: id } })\r\n          })\r\n          break\r\n      }\r\n      if (layer.setZIndex) {\r\n        this.layerIndex++\r\n        layer.setZIndex(this.layerIndex)\r\n      }\r\n      isBase ? this.baseLayers.push({ params, layer }) : this.layers.push({ params, layer })\r\n      visible && layer.addTo(map)\r\n      return layer\r\n    },\r\n    gotoPoint(lng, lat, zoom, duration) {\r\n      leafLetMap.flyTo({ lng, lat }, zoom || 17, { duration: duration || 1.5 })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.container {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  .map {\r\n    height: 100%;\r\n    position: absolute;\r\n  }\r\n}\r\n.leaflet-bottom {\r\n  bottom: 80px !important;\r\n}\r\n.location-bar {\r\n  bottom: 80px !important;\r\n}\r\n</style>\r\n"],"mappings":";;;;AAOA,SAAAA,aAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAD,OAAA,WAAAA,QAAA;MAAA,IAAAE,KAAA;MACAC,CAAA,CAAAC,OAAA,CAAAC,SAAA;QACAC,EAAA;QACAV,IAAA,EAAAD,aAAA,CAAAY,IAAA;QACAC,OAAA,WAAAA,QAAAC,GAAA,EAAAC,GAAA;UACAR,KAAA,CAAAS,YAAA,CAAAF,GAAA;QACA;MACA;IACA;IACAE,YAAA,WAAAA,aAAAF,GAAA;MAAA,IAAAG,MAAA;MACAC,MAAA,CAAAC,UAAA,GAAAL,GAAA;MACAd,aAAA,CAAAE,UAAA,CAAAkB,OAAA,WAAAC,KAAA;QACAJ,MAAA,CAAAK,QAAA,CAAAR,GAAA,EAAAO,KAAA;MACA;MACArB,aAAA,CAAAG,MAAA,CAAAiB,OAAA,WAAAC,KAAA;QACAJ,MAAA,CAAAK,QAAA,CAAAR,GAAA,EAAAO,KAAA;MACA;MACAP,GAAA,CAAAS,EAAA,oBAAAC,EAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,EAAA,CAAAG,MAAA;MACA;IACA;IACAL,QAAA,WAAAA,SAAAR,GAAA,EAAAc,MAAA,EAAAC,MAAA;MACA,IAAAC,IAAA;MACA,IAAAC,IAAA,GAAAH,MAAA,CAAAG,IAAA;QAAAC,IAAA,GAAAJ,MAAA,CAAAI,IAAA;QAAAC,OAAA,GAAAL,MAAA,CAAAK,OAAA;MACA,IAAAZ,KAAA;MACA,QAAAU,IAAA;QACA;QACA;UACAV,KAAA,GAAAb,CAAA,CAAAC,OAAA,CAAAY,KAAA,CAAAa,WAAA,CAAAN,MAAA;UACA;QACA;UACAA,MAAA,CAAAO,GAAA,GAAAP,MAAA,CAAAO,GAAA,IAAA3B,CAAA,CAAA4B,GAAA,CAAAC,QAAA;UACAhB,KAAA,GAAAb,CAAA,CAAA8B,SAAA,CAAAC,GAAA,CAAAX,MAAA,CAAAY,GAAA,EAAAZ,MAAA;UACA;QACA;UACAP,KAAA,GAAAb,CAAA,CAAAiC,QAAA,CAAAb,MAAA;UACAP,KAAA,CAAAE,EAAA,oBAAAmB,CAAA,EAAAzC,IAAA;YACA,IAAAU,EAAA,GAAA+B,CAAA,CAAArB,KAAA,CAAAsB,OAAA,CAAAhC,EAAA;YACA,IAAAqB,IAAA,GAAAU,CAAA,CAAArB,KAAA,CAAAsB,OAAA,CAAAC,UAAA,CAAAZ,IAAA;YACAF,IAAA,CAAAe,OAAA,CAAAC,IAAA;cAAAC,IAAA;cAAAC,KAAA;gBAAAhB,IAAA,EAAAA,IAAA;gBAAArB,EAAA,EAAAA;cAAA;YAAA;UACA;UACA;MACA;MACA,IAAAU,KAAA,CAAA4B,SAAA;QACA,KAAAC,UAAA;QACA7B,KAAA,CAAA4B,SAAA,MAAAC,UAAA;MACA;MACArB,MAAA,QAAA3B,UAAA,CAAA4C,IAAA;QAAAlB,MAAA,EAAAA,MAAA;QAAAP,KAAA,EAAAA;MAAA,UAAAlB,MAAA,CAAA2C,IAAA;QAAAlB,MAAA,EAAAA,MAAA;QAAAP,KAAA,EAAAA;MAAA;MACAY,OAAA,IAAAZ,KAAA,CAAA8B,KAAA,CAAArC,GAAA;MACA,OAAAO,KAAA;IACA;IACA+B,SAAA,WAAAA,UAAAC,GAAA,EAAAC,GAAA,EAAAC,IAAA,EAAAC,QAAA;MACArC,UAAA,CAAAsC,KAAA;QAAAJ,GAAA,EAAAA,GAAA;QAAAC,GAAA,EAAAA;MAAA,GAAAC,IAAA;QAAAC,QAAA,EAAAA,QAAA;MAAA;IACA;EACA;AACA"}]}