{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\processFilling.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\processFilling.vue","mtime":1684246188041},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovV29ya3NwYWNlL0ppYW5HdWFuL2ppYW5ndWFuX21vYmlsZS9tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgU2VsZWN0ZXIgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9TZWxlY3Rlcic7CmltcG9ydCBQZGZQcmV2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9QZGZQcmV2aWV3JzsKaW1wb3J0IFVwbG9hZCBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL1VwbG9hZCc7CmltcG9ydCBDb21wb25lbnRTZWxlY3QgZnJvbSAnQC9jb21wb25lbnRzL0NvbXBvbmVudFNlbGVjdCc7CmltcG9ydCB7IGZvcm1hdElTTzg2MDFUaW1lIH0gZnJvbSAnQC91dGlscy9pbmRleCc7CmltcG9ydCB7IGdldENoZWNrZXIsIGFkZFJlY29kZSwgdXBkYXRlUmVjb2RlLCBnZXRBbGxjaGVja0RhdGEgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbXBvbmVudFNlbGVjdDogQ29tcG9uZW50U2VsZWN0LAogICAgVXBsb2FkOiBVcGxvYWQsCiAgICBQZGZQcmV2aWV3OiBQZGZQcmV2aWV3LAogICAgU2VsZWN0ZXI6IFNlbGVjdGVyCiAgfSwKICBjb21wdXRlZDogewogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uIHNjcm9sbGVySGVpZ2h0KCkgewogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gMTQ2ICsgJ3B4JzsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93OiBmYWxzZSwKICAgICAgY29tcG9uZW50TmFtZTogJycsCiAgICAgIHVybExpc3Q6IFtdLAogICAgICBhY2NyZWNvZGV1cmxMaXN0OiBbXSwKICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgIGVkaXREYXRhOiB7fSwKICAgICAgc2hvd0NoZWNrTWFuOiBmYWxzZSwKICAgICAgY2hlY2tNYW5zOiBbXSwKICAgICAgc2hvd1BpY2tlcjogZmFsc2UsCiAgICAgIGZvcm1hdElTTzg2MDFUaW1lOiBmb3JtYXRJU084NjAxVGltZSwKICAgICAgY29tcG9uZW50OiBudWxsLAogICAgICBjaGVja0RhdGE6IG51bGwsCiAgICAgIGN1cnJlbnREYXRlOiBuZXcgRGF0ZSgpLAogICAgICBsaXN0OiBbXSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICByZWZyZXNoaW5nOiBmYWxzZSwKICAgICAgc2VhcmNoVmFsdWU6ICcnLAogICAgICBzZWxlY3RzOiBbXSwKICAgICAgaXNVcGRhdGU6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaFZhbHVlOiBmdW5jdGlvbiBzZWFyY2hWYWx1ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy53YXRjaEZ1bmMoNTAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc2VhcmNoKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgd2F0Y2hGdW5jOiBmdW5jdGlvbiB3YXRjaEZ1bmMoZGVsYXlUaW1lLCBmdW5jKSB7CiAgICAgIGlmICghdGhpcy5sYXN0VGltZSkgewogICAgICAgIHRoaXMubGFzdFRpbWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZ1bmMoKTsKICAgICAgICB9LCBkZWxheVRpbWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxhc3RUaW1lKTsKICAgICAgICB0aGlzLmxhc3RUaW1lID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmdW5jKCk7CiAgICAgICAgfSwgZGVsYXlUaW1lKTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHRlbXBzID0gW107CiAgICAgIHRoaXMuY2hlY2tNYW5zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICBpZiAobmFtZS5pbmRleE9mKF90aGlzMi5zZWFyY2hWYWx1ZSkgIT09IC0xKSB7CiAgICAgICAgICB0ZW1wcy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgICBfdGhpczIuc2VsZWN0cyA9IHRlbXBzOwogICAgICB9KTsKICAgIH0sCiAgICBvbkNvbXBvbmVudFNlbGVjdDogZnVuY3Rpb24gb25Db21wb25lbnRTZWxlY3QoaXRlbSwgY2hlY2tEYXRhLCBpc1VwZGF0ZSkgewogICAgICB0aGlzLmlzVXBkYXRlID0gaXNVcGRhdGU7CiAgICAgIHRoaXMuc2hvdyA9IHRydWU7CiAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgdGhpcy5jb21wb25lbnQgPSBpdGVtOwogICAgICB0aGlzLmNoZWNrRGF0YSA9IGNoZWNrRGF0YTsKICAgICAgdGhpcy5nZXRBbGxDaGVja2VyKCk7CiAgICB9LAogICAgb25Db25maXJtOiBmdW5jdGlvbiBvbkNvbmZpcm0odGltZSkgewogICAgICB0aGlzLnNob3dQaWNrZXIgPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0RGF0YS51cGxvYWR0aW1lID0gdGhpcy5mb3JtYXRJU084NjAxVGltZShuZXcgRGF0ZSh0aW1lKS50b0pTT04oKSk7CiAgICB9LAogICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGl0ZW0pIHsKICAgICAgdGhpcy5zaG93Q2hlY2tNYW4gPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0RGF0YS5jaGVja3VzZXJuYW1lID0gaXRlbS5uYW1lOwogICAgICB0aGlzLmVkaXREYXRhLmNoZWNraWQgPSBpdGVtLmlkOwogICAgfSwKICAgIGdldEFsbENoZWNrZXI6IGZ1bmN0aW9uIGdldEFsbENoZWNrZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBnZXRDaGVja2VyKHsKICAgICAgICBncm91cDogdGhpcy5jaGVja0RhdGEuY29ucG9uZW50Y29kZSwKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRCaWFvRHVhbi5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMzLmNoZWNrTWFucyA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgX3RoaXMzLmNoZWNrTWFucy5wdXNoKGl0ZW0pOwogICAgICAgIH0pOwogICAgICAgIF90aGlzMy5zZWxlY3RzID0gX3RoaXMzLmNoZWNrTWFuczsKICAgICAgfSk7CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgdmFsdWVzLmFjY3JlY29kZXVybC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS51cmwgJiYgdGVtcC5wdXNoKGl0ZW0udXJsKTsKICAgICAgfSk7CiAgICAgIGlmICh2YWx1ZXMuYWNjcmVjb2RldXJsLmxlbmd0aCAhPT0gdGVtcC5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fkuIrkvKDkuL7niYznhafniYfmiJbnrYnlvoXnhafniYfkuIrkvKDlrozmiJDvvIEnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFsdWVzLmFjY3JlY29kZXVybCA9IHRlbXAuam9pbignLCcpOwogICAgICB2YXIgX3RlbXAgPSBbXTsKICAgICAgdmFsdWVzLnJlbWFyay5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS51cmwgJiYgX3RlbXAucHVzaChpdGVtLnVybCk7CiAgICAgIH0pOwogICAgICBpZiAodmFsdWVzLnJlbWFyay5sZW5ndGggIT09IF90ZW1wLmxlbmd0aCkgewogICAgICAgIHJldHVybiB0aGlzLiRub3RpZnkoewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+etieW+hVBERuS4iuS8oOWujOaIkO+8gScKICAgICAgICB9KTsKICAgICAgfQogICAgICB2YWx1ZXMucmVtYXJrID0gX3RlbXAuam9pbignLCcpOwogICAgICB2YWx1ZXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHsKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRCaWFvRHVhbi5pZCwKICAgICAgICBjb25wb2VudGlkOiB0aGlzLmNoZWNrRGF0YS5jb25wb25lbnRpZCwKICAgICAgICBjb25wb25lbnRuYW1lOiB0aGlzLmNoZWNrRGF0YS5jb25wb25lbnR0eXBlbmFtZSwKICAgICAgICBjb25wb25lbnR0eXBlOiB0aGlzLmNoZWNrRGF0YS5jb25wb25lbnR0eXBlLAogICAgICAgIHByb2plY3Rjb2RlOiB0aGlzLmNoZWNrRGF0YS5wcm9qZWN0Y29kZSwKICAgICAgICBwcm9kdWNlaWQ6IHRoaXMuY29tcG9uZW50LnByb2R1Y2VpZCwKICAgICAgICBwcm9kdWNlaWRuYW1lOiB0aGlzLmNvbXBvbmVudC5uYW1lLAogICAgICAgIHVwZGF0ZXVzZXJuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyaW5mby5uYW1lCiAgICAgIH0pLCB2YWx1ZXMpOwogICAgICB2YWx1ZXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlcyksIHRoaXMuZWRpdERhdGEpOwogICAgICBpZiAodGhpcy5pc1VwZGF0ZSkgewogICAgICAgIHZhbHVlcy5yZWNvZGVpZCA9IHRoaXMuY29tcG9uZW50LnJlY29yZGlkOwogICAgICAgIHVwZGF0ZVJlY29kZSh2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIF90aGlzNC4kcmVmc1snY29tcG9uZW50U2VsZWN0J10ub25Mb2FkKCk7CiAgICAgICAgICBfdGhpczQuc2hvdyA9IGZhbHNlOwogICAgICAgICAgX3RoaXM0LiRub3RpZnkoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmj5DkuqTmiJDlip/vvIEnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZGRSZWNvZGUodmFsdWVzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBfdGhpczQuJHJlZnNbJ2NvbXBvbmVudFNlbGVjdCddLm9uTG9hZCgpOwogICAgICAgICAgX3RoaXM0LnNob3cgPSBmYWxzZTsKICAgICAgICAgIF90aGlzNC4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5o+Q5Lqk5oiQ5Yqf77yBJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKQogICAgfSwKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBnZXRBbGxjaGVja0RhdGEoewogICAgICAgIHR5cGU6IDIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoYXQubGlzdCA9IGRhdGEuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIERhdGUucGFyc2UoYlsndXBsb2FkdGltZSddKSAtIERhdGUucGFyc2UoYVsndXBsb2FkdGltZSddKTsKICAgICAgICB9KTsKICAgICAgICB0aGF0LnJlZnJlc2hpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpczUuZmluaXNoZWQgPSB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICBwcmV2aWV3UGljOiBmdW5jdGlvbiBwcmV2aWV3UGljKGl0ZW0sIGZpZWxkKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3BkZlByZXZpZXcnXS5zaG93UGljKGl0ZW0ucmVjb2RlaWQsIGZpZWxkKTsKICAgIH0sCiAgICBwcmV2aWV3UGRmOiBmdW5jdGlvbiBwcmV2aWV3UGRmKGl0ZW0sIGZpZWxkKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3BkZlByZXZpZXcnXS5zaG93KGl0ZW0ucmVjb2RlaWQsIGZpZWxkKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Selecter","PdfPreview","Upload","ComponentSelect","formatISO8601Time","getChecker","addRecode","updateRecode","getAllcheckData","components","computed","scrollerHeight","window","innerHeight","data","show","componentName","urlList","accrecodeurlList","editable","editData","showCheckMan","checkMans","showPicker","component","checkData","currentDate","Date","list","finished","refreshing","searchValue","selects","isUpdate","watch","_this","watchFunc","search","methods","delayTime","func","lastTime","setTimeout","clearTimeout","_this2","temps","forEach","item","name","indexOf","push","onComponentSelect","getAllChecker","onConfirm","time","uploadtime","toJSON","onSelect","checkusername","checkid","id","_this3","group","conponentcode","projectId","$store","state","currentBiaoDuan","then","onSubmit","values","_this4","temp","accrecodeurl","url","length","$notify","type","message","join","_temp","remark","_objectSpread","conpoentid","conponentid","conponentname","conponenttypename","conponenttype","projectcode","produceid","produceidname","updateusername","userinfo","recodeid","recordid","$refs","onLoad","_this5","that","sort","a","b","parse","previewPic","field","showPic","previewPdf"],"sources":["src/views/project/quality/processFilling.vue"],"sourcesContent":["<template>\r\n  <div class=\"process-filling\">\r\n    <van-tabs>\r\n      <van-tab title=\"工序填报\">\r\n        <component-select ref=\"componentSelect\" :onComponentSelect=\"onComponentSelect\"> </component-select>\r\n      </van-tab>\r\n      <van-tab title=\"填报记录\">\r\n        <van-list\r\n          :finished=\"finished\"\r\n          finished-text=\"我也是有底线的~~\"\r\n          @load=\"onLoad\"\r\n          class=\"common-list common-card\"\r\n          :style=\"{ height: scrollerHeight }\"\r\n        >\r\n          <div v-for=\"(item, index) in list\" :key=\"index\" :class=\"'item ' + (index === list.length - 1 ? 'last' : '')\">\r\n            <div class=\"content\">\r\n              <span class=\"name\">构件编码：</span>\r\n              <span class=\"value\">{{ item.conponentcode }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">构件名称：</span>\r\n              <span class=\"value\">{{ item.conponentname }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">工序名称：</span>\r\n              <span class=\"value\">{{ item.producename }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">填报时间：</span>\r\n              <span class=\"value\">{{ item.stime ? formatISO8601Time(item.stime) : '' }}</span>\r\n            </div>\r\n            <div class=\"content\" v-if=\"item.checkusername\">\r\n              <span class=\"name\">审核人：</span>\r\n              <span class=\"value\">{{ item.checkusername }}</span>\r\n            </div>\r\n            <div class=\"content\" v-if=\"item.updatetime\">\r\n              <span class=\"name\">审核时间：</span>\r\n              <span class=\"value\">{{ item.updatetime ? formatISO8601Time(item.updatetime) : '' }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">审核状态：</span>\r\n              <span :class=\"'value ' + ['common-state-1', 'common-state-2', 'common-state-0'][item.checkresult - 1]\">{{\r\n                ['审核通过', '监理驳回', '正在审核'][item.checkresult - 1]\r\n              }}</span>\r\n            </div>\r\n            <div class=\"content\" style=\"text-align: center;\">\r\n              <!-- <span class=\"name\">操作：</span> -->\r\n              <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\"\r\n                >举牌照片</van-button\r\n              >\r\n              <van-button\r\n                style=\"margin-left:10px\"\r\n                class=\"button\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                @click.stop=\"previewPdf(item)\"\r\n                >PDF</van-button\r\n              >\r\n              <van-button\r\n                v-if=\"item.checkresult != 3\"\r\n                style=\"margin-left:10px\"\r\n                class=\"button\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                @click.stop=\"previewPic(item, 'testurl')\"\r\n                >审核照片</van-button\r\n              >\r\n              <van-button\r\n                v-if=\"item.checkresult != 3\"\r\n                style=\"margin-left:10px\"\r\n                class=\"button\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                @click.stop=\"previewPdf(item, 'standbyrecode')\"\r\n                >审核PDF</van-button\r\n              >\r\n            </div>\r\n            <!-- <div class=\"operate center-in-vertical\">\r\n              <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\">照片</van-button>\r\n              <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\">PDF</van-button>\r\n            </div> -->\r\n          </div>\r\n        </van-list>\r\n      </van-tab>\r\n    </van-tabs>\r\n\r\n    <van-dialog v-model=\"show\" :title=\"componentName\" :showConfirmButton=\"false\" :closeOnClickOverlay=\"true\">\r\n      <van-form @submit=\"onSubmit\" :v-model=\"editData\" class=\"common-card\">\r\n        <van-field\r\n          v-model=\"editData.uploadtime\"\r\n          is-link\r\n          readonly\r\n          name=\"uploadtime\"\r\n          label=\"完成时间\"\r\n          placeholder=\"点击选择时间\"\r\n          @click=\"showPicker = true\"\r\n          :disabled=\"!editable\"\r\n          :rules=\"[{ required: true, message: '请选择时间' }]\"\r\n        />\r\n        <van-field\r\n          readonly\r\n          clickable\r\n          name=\"checkusername\"\r\n          :value=\"editData.checkusername\"\r\n          label=\"指定监理\"\r\n          :placeholder=\"editable ? '点击选监理' : '无'\"\r\n          @click=\"editable && (showCheckMan = true)\"\r\n          :rules=\"[{ required: true, message: '请选择监理' }]\"\r\n          :disabled=\"!editable\"\r\n        />\r\n        <upload label=\"举牌照片\" name=\"accrecodeurl\" :rules=\"[{ required: true, message: '请选择照片' }]\"></upload>\r\n        <upload diyButton=\"点击选择PDF\" :max-count=\"1\" accept=\"application/pdf\" label=\"PDF\" name=\"remark\"></upload>\r\n        <div style=\"margin: 16px\" v-if=\"editable\">\r\n          <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n        </div>\r\n      </van-form>\r\n    </van-dialog>\r\n    <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n      <van-datetime-picker v-model=\"currentDate\" type=\"datetime\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n    </van-popup>\r\n    <van-action-sheet v-model=\"showCheckMan\">\r\n      <van-cell-group inset>\r\n        <van-field v-model=\"searchValue\" placeholder=\"搜索\" input-align=\"center\" clearable />\r\n      </van-cell-group>\r\n      <div class=\"van-action-sheet__content\" style=\"max-height:330px;text-align: center;\">\r\n        <button\r\n          v-for=\"(item, index) in selects\"\r\n          :key=\"index\"\r\n          type=\"button\"\r\n          class=\"van-action-sheet__item\"\r\n          @click=\"onSelect(item)\"\r\n        >\r\n          <span class=\"van-action-sheet__name\">{{ item.name }}</span>\r\n        </button>\r\n        <span style=\"height:200px;line-height: 200px;font-size: 16px\" v-if=\"selects.length === 0\">没有相关数据！</span>\r\n      </div>\r\n    </van-action-sheet>\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Selecter from '@/components/common/Selecter'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nimport Upload from '@/components/common/Upload'\r\nimport ComponentSelect from '@/components/ComponentSelect'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport { getChecker, addRecode, updateRecode, getAllcheckData } from '@/api/project.js'\r\nexport default {\r\n  components: {\r\n    ComponentSelect,\r\n    Upload,\r\n    PdfPreview,\r\n    Selecter\r\n  },\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 146 + 'px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      componentName: '',\r\n      urlList: [],\r\n      accrecodeurlList: [],\r\n      editable: true,\r\n      editData: {},\r\n      showCheckMan: false,\r\n      checkMans: [],\r\n      showPicker: false,\r\n      formatISO8601Time,\r\n      component: null,\r\n      checkData: null,\r\n      currentDate: new Date(),\r\n\r\n      list: [],\r\n      finished: false,\r\n      refreshing: false,\r\n\r\n      searchValue: '',\r\n      selects: [],\r\n\r\n      isUpdate: false\r\n    }\r\n  },\r\n  watch: {\r\n    searchValue: function() {\r\n      this.watchFunc(500, () => {\r\n        this.search()\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    watchFunc(delayTime, func) {\r\n      if (!this.lastTime) {\r\n        this.lastTime = setTimeout(() => {\r\n          func()\r\n        }, delayTime)\r\n      } else {\r\n        clearTimeout(this.lastTime)\r\n        this.lastTime = setTimeout(() => {\r\n          func()\r\n        }, delayTime)\r\n      }\r\n    },\r\n    search() {\r\n      let temps = []\r\n      this.checkMans.forEach(item => {\r\n        let name = item.name\r\n        if (name.indexOf(this.searchValue) !== -1) {\r\n          temps.push(item)\r\n        }\r\n        this.selects = temps\r\n      })\r\n    },\r\n    onComponentSelect(item, checkData, isUpdate) {\r\n      this.isUpdate = isUpdate\r\n      this.show = true\r\n      this.componentName = item.name\r\n      this.component = item\r\n      this.checkData = checkData\r\n      this.getAllChecker()\r\n    },\r\n    onConfirm(time) {\r\n      this.showPicker = false\r\n      this.editData.uploadtime = this.formatISO8601Time(new Date(time).toJSON())\r\n    },\r\n    onSelect(item) {\r\n      this.showCheckMan = false\r\n      this.editData.checkusername = item.name\r\n      this.editData.checkid = item.id\r\n    },\r\n    getAllChecker() {\r\n      getChecker({ group: this.checkData.conponentcode,projectId: this.$store.state.currentBiaoDuan.id }).then(data => {\r\n        this.checkMans = []\r\n        data.forEach(item => {\r\n          this.checkMans.push(item)\r\n        })\r\n        this.selects = this.checkMans\r\n      })\r\n    },\r\n    onSubmit(values) {\r\n      let temp = []\r\n      values.accrecodeurl.forEach(item => {\r\n        item.url && temp.push(item.url)\r\n      })\r\n      if (values.accrecodeurl.length !== temp.length) {\r\n        return this.$notify({ type: 'warning', message: '请上传举牌照片或等待照片上传完成！' })\r\n      }\r\n      values.accrecodeurl = temp.join(',')\r\n\r\n      let _temp = []\r\n      values.remark.forEach(item => {\r\n        item.url && _temp.push(item.url)\r\n      })\r\n      if (values.remark.length !== _temp.length) {\r\n        return this.$notify({ type: 'warning', message: '请等待PDF上传完成！' })\r\n      }\r\n      values.remark = _temp.join(',')\r\n      values = {\r\n        ...{\r\n          projectId: this.$store.state.currentBiaoDuan.id,\r\n          conpoentid: this.checkData.conponentid,\r\n          conponentname: this.checkData.conponenttypename,\r\n          conponenttype: this.checkData.conponenttype,\r\n          projectcode: this.checkData.projectcode,\r\n          produceid: this.component.produceid,\r\n          produceidname: this.component.name,\r\n          updateusername: this.$store.state.userinfo.name\r\n        },\r\n        ...values\r\n      }\r\n      values = { ...values, ...this.editData }\r\n      if (this.isUpdate) {\r\n        values.recodeid = this.component.recordid\r\n        updateRecode(values).then(data => {\r\n          this.$refs['componentSelect'].onLoad()\r\n          this.show = false\r\n          this.$notify({ type: 'success', message: '提交成功！' })\r\n        })\r\n      } else {\r\n        addRecode(values).then(data => {\r\n          this.$refs['componentSelect'].onLoad()\r\n          this.show = false\r\n          this.$notify({ type: 'success', message: '提交成功！' })\r\n        })\r\n      }\r\n      // console.log(values)\r\n    },\r\n\r\n    onLoad() {\r\n      let that = this\r\n      getAllcheckData({ type: 2 }).then(data => {\r\n        that.list = data.sort(function(a, b) {\r\n          return Date.parse(b['uploadtime']) - Date.parse(a['uploadtime'])\r\n        })\r\n        that.refreshing = false\r\n        this.finished = true\r\n      })\r\n    },\r\n    previewPic(item, field) {\r\n      this.$refs['pdfPreview'].showPic(item.recodeid, field)\r\n    },\r\n    previewPdf(item, field) {\r\n      this.$refs['pdfPreview'].show(item.recodeid, field)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.process-filling {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  // .common-list {\r\n  //   background-color: transparent;\r\n  //   .item {\r\n  //     background-color: #fff;\r\n  //     border-radius: 3px;\r\n  //   }\r\n  // }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}