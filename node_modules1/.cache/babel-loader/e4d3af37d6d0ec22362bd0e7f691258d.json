{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\PdfPreview.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\PdfPreview.vue","mtime":1684246187878},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJFOi9Xb3Jrc3BhY2UvSmlhbkd1YW4vamlhbmd1YW5fbW9iaWxlL21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInZhbnQvZXMvaW1hZ2UtcHJldmlldy9zdHlsZSI7CmltcG9ydCBfSW1hZ2VQcmV2aWV3IGZyb20gInZhbnQvZXMvaW1hZ2UtcHJldmlldyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBsb29rVXJsLCBmb3JtYXRJbWdVcmxMaXN0U3RyaW5nIH0gZnJvbSAnQC91dGlscy9pbmRleCc7CmltcG9ydCBQZGZoNSBmcm9tICdwZGZoNSc7CmltcG9ydCAncGRmaDUvY3NzL3BkZmg1LmNzcyc7CmltcG9ydCB7IGdldENoZWNrRGF0YUJ5cmVjb2QgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQubmFtZSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQpLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93UGRmQ29udGFpbmVyOiBmYWxzZSwKICAgICAgc2hvd1BkZjogZmFsc2UsCiAgICAgIHBkZmg1OiBudWxsLAogICAgICBsb29rVXJsOiBsb29rVXJsLAogICAgICBmb3JtYXRJbWdVcmxMaXN0U3RyaW5nOiBmb3JtYXRJbWdVcmxMaXN0U3RyaW5nCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbiBzY3JvbGxlckhlaWdodCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2hvd1BkZiA/IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuOCArICdweCcgOiAwOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2hvd1BpYzogZnVuY3Rpb24gc2hvd1BpYyhyZWNvZGVpZCwgZmllbGQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZmllbGQgPSBmaWVsZCB8fCAnYWNjcmVjb2RldXJsJzsKICAgICAgZ2V0Q2hlY2tEYXRhQnlyZWNvZCh7CiAgICAgICAgcmVjb2RlaWQ6IHJlY29kZWlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAoZGF0YS5yZWNvZGVbZmllbGRdKSB7CiAgICAgICAgICB2YXIgdXJsTGlzdCA9IF90aGlzLmZvcm1hdEltZ1VybExpc3RTdHJpbmcoZGF0YS5yZWNvZGVbZmllbGRdKTsKICAgICAgICAgIF9JbWFnZVByZXZpZXcoewogICAgICAgICAgICBpbWFnZXM6IHVybExpc3QsCiAgICAgICAgICAgIGNsb3NlYWJsZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRub3RpZnkoewogICAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmj5DkuqTnhafniYfvvIEnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3c6IGZ1bmN0aW9uIHNob3cocmVjb2RlaWQsIGZpZWxkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBmaWVsZCA9IGZpZWxkIHx8ICdyZW1hcmsnOwogICAgICBnZXRDaGVja0RhdGFCeXJlY29kKHsKICAgICAgICByZWNvZGVpZDogcmVjb2RlaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLnJlY29kZVtmaWVsZF0pIHsKICAgICAgICAgIHZhciB1cmwgPSBfdGhpczIubG9va1VybChkYXRhLnJlY29kZVtmaWVsZF0pOwogICAgICAgICAgX3RoaXMyLmxvYWRQZGYodXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLnNob3dQZGZDb250YWluZXIgPSBmYWxzZTsKICAgICAgICAgIF90aGlzMi4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICBtZXNzYWdlOiAn5pyq5o+Q5LqkUERG77yBJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzaG93X290aGVyUERGOiBmdW5jdGlvbiBzaG93X290aGVyUERGKGZpbGVJZCkgewogICAgICBpZiAoZmlsZUlkKSB7CiAgICAgICAgdmFyIHVybCA9IHRoaXMubG9va1VybChmaWxlSWQpOwogICAgICAgIHRoaXMubG9hZFBkZih1cmwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd1BkZkNvbnRhaW5lciA9IGZhbHNlOwogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBtZXNzYWdlOiAn5pyq5o+Q5LqkUERG77yBJwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgdGhpcy5zaG93UGRmQ29udGFpbmVyID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1BkZiA9IGZhbHNlOwogICAgfSwKICAgIGxvYWRQZGY6IGZ1bmN0aW9uIGxvYWRQZGYodXJsKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuJHRvYXN0LmxvYWRpbmcoJ+aWh+S7tuWKoOi9veS4re+8jOivt+eojeWQju+8gScpOwogICAgICB0aGlzLnNob3dQZGZDb250YWluZXIgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLnBkZmg1ID0gbmV3IFBkZmg1KCcjcGRmRGl2JywgewogICAgICAgICAgcGRmdXJsOiB1cmwsCiAgICAgICAgICB6b29tRW5hYmxlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIF90aGlzMy5wZGZoNS5vbignY29tcGxldGUnLCBmdW5jdGlvbiAoc3RhdHVzLCBtc2csIHRpbWUpIHsKICAgICAgICAgIGlmIChzdGF0dXMgIT09ICdzdWNjZXNzJykgewogICAgICAgICAgICB0aGF0LiR0b2FzdC5jbGVhcigpOwogICAgICAgICAgICB0aGF0LnNob3dQZGZDb250YWluZXIgPSBmYWxzZTsKICAgICAgICAgICAgdGhhdC5zaG93UGRmID0gZmFsc2U7CiAgICAgICAgICAgIHRoYXQuJHRvYXN0KCdQREbmlofku7bmjZ/lnY/vvIzliqDovb3lpLHotKXvvIEnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfdGhpczMucGRmaDUub24oJ3JlYWR5JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC5zaG93UGRmID0gdHJ1ZTsKICAgICAgICAgIHRoYXQuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["lookUrl","formatImgUrlListString","Pdfh5","getCheckDataByrecod","components","_defineProperty","_ImagePreview","Component","name","data","showPdfContainer","showPdf","pdfh5","computed","scrollerHeight","window","innerHeight","methods","showPic","recodeid","field","_this","then","recode","urlList","images","closeable","$notify","type","message","show","_this2","url","loadPdf","show_otherPDF","fileId","onClose","_this3","that","$toast","loading","$nextTick","pdfurl","zoomEnable","on","status","msg","time","clear"],"sources":["src/components/PdfPreview.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-dialog\r\n      @close=\"onClose\"\r\n      v-model=\"showPdfContainer\"\r\n      :showConfirmButton=\"false\"\r\n      :closeOnClickOverlay=\"true\"\r\n      class=\"pdf-container\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n    >\r\n      <div id=\"pdfDiv\" :style=\"{ height: scrollerHeight }\"></div>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { lookUrl, formatImgUrlListString } from '@/utils/index'\r\nimport Pdfh5 from 'pdfh5'\r\nimport 'pdfh5/css/pdfh5.css'\r\nimport { getCheckDataByrecod } from '@/api/project.js'\r\nimport { ImagePreview } from 'vant'\r\nexport default {\r\n  components: {\r\n    [ImagePreview.Component.name]: ImagePreview.Component\r\n  },\r\n  data() {\r\n    return {\r\n      showPdfContainer: false,\r\n      showPdf: false,\r\n      pdfh5: null,\r\n      lookUrl,\r\n      formatImgUrlListString\r\n    }\r\n  },\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return this.showPdf ? window.innerHeight * 0.8 + 'px' : 0\r\n    }\r\n  },\r\n  methods: {\r\n    showPic(recodeid, field) {\r\n      field = field || 'accrecodeurl'\r\n      getCheckDataByrecod({ recodeid }).then(data => {\r\n        if (data.recode[field]) {\r\n          let urlList = this.formatImgUrlListString(data.recode[field])\r\n          ImagePreview({\r\n            images: urlList,\r\n            closeable: true\r\n          })\r\n        } else {\r\n          this.$notify({ type: 'warning', message: '未提交照片！' })\r\n        }\r\n      })\r\n    },\r\n    show(recodeid, field) {\r\n      field = field || 'remark'\r\n      getCheckDataByrecod({ recodeid }).then(data => {\r\n        if (data.recode[field]) {\r\n          let url = this.lookUrl(data.recode[field])\r\n          this.loadPdf(url)\r\n        } else {\r\n          this.showPdfContainer = false\r\n          this.$notify({ type: 'warning', message: '未提交PDF！' })\r\n        }\r\n      })\r\n    },\r\n    show_otherPDF(fileId) {\r\n      if (fileId) {\r\n        let url = this.lookUrl(fileId)\r\n        this.loadPdf(url)\r\n      } else {\r\n        this.showPdfContainer = false\r\n        this.$notify({ type: 'warning', message: '未提交PDF！' })\r\n      }\r\n    },\r\n    onClose() {\r\n      this.showPdfContainer = false\r\n      this.showPdf = false\r\n    },\r\n    loadPdf(url) {\r\n      let that = this\r\n      this.$toast.loading('文件加载中，请稍后！')\r\n      this.showPdfContainer = true\r\n      this.$nextTick(() => {\r\n        this.pdfh5 = new Pdfh5('#pdfDiv', {\r\n          pdfurl: url,\r\n          zoomEnable: false\r\n        })\r\n        this.pdfh5.on('complete', function(status, msg, time) {\r\n          if (status !== 'success') {\r\n            that.$toast.clear()\r\n            that.showPdfContainer = false\r\n            that.showPdf = false\r\n            that.$toast('PDF文件损坏，加载失败！')\r\n          }\r\n        })\r\n        this.pdfh5.on('ready', function() {\r\n          that.showPdf = true\r\n          that.$toast.clear()\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pdf-container {\r\n  height: 0;\r\n}\r\n\r\n.van-dialog {\r\n  top: 50% !important;\r\n}\r\n\r\n.pdfjs .viewerContainer {\r\n  height: 100% !important;\r\n}\r\n</style>\r\n"],"mappings":";;;;AAgBA,SAAAA,OAAA,EAAAC,sBAAA;AACA,OAAAC,KAAA;AACA;AACA,SAAAC,mBAAA;AAEA;EACAC,UAAA,EAAAC,eAAA,KACAC,aAAA,CAAAC,SAAA,CAAAC,IAAA,EAAAF,aAAA,CAAAC,SAAA,CACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,gBAAA;MACAC,OAAA;MACAC,KAAA;MACAZ,OAAA,EAAAA,OAAA;MACAC,sBAAA,EAAAA;IACA;EACA;EACAY,QAAA;IACAC,cAAA,WAAAA,eAAA;MACA,YAAAH,OAAA,GAAAI,MAAA,CAAAC,WAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA,WAAAA,QAAAC,QAAA,EAAAC,KAAA;MAAA,IAAAC,KAAA;MACAD,KAAA,GAAAA,KAAA;MACAjB,mBAAA;QAAAgB,QAAA,EAAAA;MAAA,GAAAG,IAAA,WAAAb,IAAA;QACA,IAAAA,IAAA,CAAAc,MAAA,CAAAH,KAAA;UACA,IAAAI,OAAA,GAAAH,KAAA,CAAApB,sBAAA,CAAAQ,IAAA,CAAAc,MAAA,CAAAH,KAAA;UACAd,aAAA;YACAmB,MAAA,EAAAD,OAAA;YACAE,SAAA;UACA;QACA;UACAL,KAAA,CAAAM,OAAA;YAAAC,IAAA;YAAAC,OAAA;UAAA;QACA;MACA;IACA;IACAC,IAAA,WAAAA,KAAAX,QAAA,EAAAC,KAAA;MAAA,IAAAW,MAAA;MACAX,KAAA,GAAAA,KAAA;MACAjB,mBAAA;QAAAgB,QAAA,EAAAA;MAAA,GAAAG,IAAA,WAAAb,IAAA;QACA,IAAAA,IAAA,CAAAc,MAAA,CAAAH,KAAA;UACA,IAAAY,GAAA,GAAAD,MAAA,CAAA/B,OAAA,CAAAS,IAAA,CAAAc,MAAA,CAAAH,KAAA;UACAW,MAAA,CAAAE,OAAA,CAAAD,GAAA;QACA;UACAD,MAAA,CAAArB,gBAAA;UACAqB,MAAA,CAAAJ,OAAA;YAAAC,IAAA;YAAAC,OAAA;UAAA;QACA;MACA;IACA;IACAK,aAAA,WAAAA,cAAAC,MAAA;MACA,IAAAA,MAAA;QACA,IAAAH,GAAA,QAAAhC,OAAA,CAAAmC,MAAA;QACA,KAAAF,OAAA,CAAAD,GAAA;MACA;QACA,KAAAtB,gBAAA;QACA,KAAAiB,OAAA;UAAAC,IAAA;UAAAC,OAAA;QAAA;MACA;IACA;IACAO,OAAA,WAAAA,QAAA;MACA,KAAA1B,gBAAA;MACA,KAAAC,OAAA;IACA;IACAsB,OAAA,WAAAA,QAAAD,GAAA;MAAA,IAAAK,MAAA;MACA,IAAAC,IAAA;MACA,KAAAC,MAAA,CAAAC,OAAA;MACA,KAAA9B,gBAAA;MACA,KAAA+B,SAAA;QACAJ,MAAA,CAAAzB,KAAA,OAAAV,KAAA;UACAwC,MAAA,EAAAV,GAAA;UACAW,UAAA;QACA;QACAN,MAAA,CAAAzB,KAAA,CAAAgC,EAAA,uBAAAC,MAAA,EAAAC,GAAA,EAAAC,IAAA;UACA,IAAAF,MAAA;YACAP,IAAA,CAAAC,MAAA,CAAAS,KAAA;YACAV,IAAA,CAAA5B,gBAAA;YACA4B,IAAA,CAAA3B,OAAA;YACA2B,IAAA,CAAAC,MAAA;UACA;QACA;QACAF,MAAA,CAAAzB,KAAA,CAAAgC,EAAA;UACAN,IAAA,CAAA3B,OAAA;UACA2B,IAAA,CAAAC,MAAA,CAAAS,KAAA;QACA;MACA;IACA;EACA;AACA"}]}