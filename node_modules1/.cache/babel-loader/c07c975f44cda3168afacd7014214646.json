{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\common\\upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\common\\upload.vue","mtime":1684246187968},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAqIGFzIGFwaSBmcm9tICJAL2FwaS9xdWFsaXR5IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbXBvcnRGaWxlOiBmdW5jdGlvbiBpbXBvcnRGaWxlKHBhcmFtcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAvLyBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAvLyBkYXRhLmFwcGVuZCgiZmlsZSIsIHBhcmFtcy5maWxlKTsKICAgICAgLy8gYXBpLnVwbG9hZEZpbGUoZGF0YSkudGhlbigocmVzKSA9PiB7CiAgICAgIC8vIAl0aGlzLiRtZXNzYWdlKHsKICAgICAgLy8gCQl0eXBlOiAnc3VjY2VzcycsCiAgICAgIC8vIAkJbWVzc2FnZTogJ+S4iuS8oOaIkOWKnyEnCiAgICAgIC8vIAl9KTsKICAgICAgLy8gCXRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKTsKICAgICAgLy8gCXRoaXMuJGVtaXQoImFmdGVyVXAiLHJlc1snZGF0YSddKTsKICAgICAgLy8gfSk7CgogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwocGFyYW1zLmZpbGUpOwogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgYmFzZTY0ID0gZS50YXJnZXRbJ3Jlc3VsdCddLnNwbGl0KCdiYXNlNjQsJylbMV07CiAgICAgICAgdXBsb2FkRmlsZSh7CiAgICAgICAgICBuYW1lOiBwYXJhbXMuZmlsZS5uYW1lLAogICAgICAgICAgYmFzZTY0OiBiYXNlNjQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgIF90aGlzLiRyZWZzLnVwbG9hZC5jbGVhckZpbGVzKCk7CiAgICAgICAgICBfdGhpcy4kZW1pdCgiYWZ0ZXJVcCIsIHJlc1snZGF0YSddKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0KICB9Cn07"},{"version":3,"names":["api","data","methods","importFile","params","_this","reader","FileReader","readAsDataURL","file","onload","e","base64","target","split","uploadFile","name","then","url","$refs","upload","clearFiles","$emit","res"],"sources":["src/views/common/upload.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-upload class=\"upload-demo\" action=\"\" :limit=\"1\" :show-file-list=\"false\"\r\n\t\t\tref=\"upload\"\r\n\t\t\taccept=\".jpg,.jpeg,.png,gif,JPG,JPEG,PNG,GIF,.map4,.xlsx,.xls,.pdf,.doc,.docx\" :http-request=\"importFile\">\r\n\t\t\t<el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n\t\t</el-upload>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport * as api from \"@/api/quality\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\timportFile(params) {\r\n\t\t\t\t// let data = new FormData();\r\n\t\t\t\t// data.append(\"file\", params.file);\r\n\t\t\t\t// api.uploadFile(data).then((res) => {\r\n\t\t\t\t// \tthis.$message({\r\n\t\t\t\t// \t\ttype: 'success',\r\n\t\t\t\t// \t\tmessage: '上传成功!'\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tthis.$refs.upload.clearFiles();\r\n\t\t\t\t// \tthis.$emit(\"afterUp\",res['data']);\r\n\t\t\t\t// });\r\n\r\n\t\t\t\tconst reader = new FileReader()\r\n\t\t\t\treader.readAsDataURL(params.file)\r\n\t\t\t\treader.onload = e => {\r\n\t\t\t\t\tlet base64 = e.target['result'].split('base64,')[1]\r\n\t\t\t\t\tuploadFile({ name: params.file.name, base64: base64 }).then(url => {\r\n\t\t\t\t\t\tthis.$refs.upload.clearFiles();\r\n\t\t\t\t\t\tthis.$emit(\"afterUp\",res['data']);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"mappings":";AAWA,YAAAA,GAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAA,WAAAA,WAAAC,MAAA;MAAA,IAAAC,KAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA,IAAAC,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,aAAA,CAAAJ,MAAA,CAAAK,IAAA;MACAH,MAAA,CAAAI,MAAA,aAAAC,CAAA;QACA,IAAAC,MAAA,GAAAD,CAAA,CAAAE,MAAA,WAAAC,KAAA;QACAC,UAAA;UAAAC,IAAA,EAAAZ,MAAA,CAAAK,IAAA,CAAAO,IAAA;UAAAJ,MAAA,EAAAA;QAAA,GAAAK,IAAA,WAAAC,GAAA;UACAb,KAAA,CAAAc,KAAA,CAAAC,MAAA,CAAAC,UAAA;UACAhB,KAAA,CAAAiB,KAAA,YAAAC,GAAA;QACA;MACA;IACA;EACA;AACA"}]}