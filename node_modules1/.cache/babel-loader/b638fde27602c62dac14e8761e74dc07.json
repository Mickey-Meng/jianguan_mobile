{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\deal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\deal.vue","mtime":1684246188006},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCBVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9VcGxvYWQnOwppbXBvcnQgeyBzdWJtaXREZWFsV2l0aFF1YWxpdHlFdmVudCB9IGZyb20gJ0AvYXBpL3Byb2plY3QuanMnOwppbXBvcnQgeyBmb3JtYXRJU084NjAxVGltZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVXBsb2FkOiBVcGxvYWQKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzY3JvbGxlckhlaWdodDogZnVuY3Rpb24gc2Nyb2xsZXJIZWlnaHQoKSB7CiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA5MCArICdweCc7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXJsTGlzdDogW10sCiAgICAgIG1vZGlmeXJlbWFyazogJycsCiAgICAgIG1vZGlmeWRhdGU6ICcnLAogICAgICBjdXJyZW50RGF0ZTogbmV3IERhdGUoKSwKICAgICAgc2hvd1BpY2tlcjogZmFsc2UsCiAgICAgIGZvcm1hdElTTzg2MDFUaW1lOiBmb3JtYXRJU084NjAxVGltZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29uZmlybTogZnVuY3Rpb24gb25Db25maXJtKHRpbWUpIHsKICAgICAgdGhpcy5zaG93UGlja2VyID0gZmFsc2U7CiAgICAgIHRoaXMubW9kaWZ5ZGF0ZSA9IHRoaXMuZm9ybWF0SVNPODYwMVRpbWUobmV3IERhdGUodGltZSkudG9KU09OKCkpOwogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7fSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgdmFsdWVzLm1vZGlmeXVybC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS51cmwgJiYgdGVtcC5wdXNoKGl0ZW0udXJsKTsKICAgICAgfSk7CiAgICAgIGlmICh2YWx1ZXMubW9kaWZ5dXJsLmxlbmd0aCAhPT0gdGVtcC5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fkuIrkvKDmlofku7bmiJbnrYnlvoXmlofku7bkuIrkvKDlrozmiJDvvIEnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFsdWVzLm1vZGlmeXVybCA9IHRlbXAuam9pbignLCcpOwogICAgICB2YWx1ZXMuZXZlbnRpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmV2ZW50aWQ7CiAgICAgIHN1Ym1pdERlYWxXaXRoUXVhbGl0eUV2ZW50KHZhbHVlcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0UmVhbHRpbWVNZXNzYWdlJyk7CiAgICAgICAgX3RoaXMuJHRvYXN0KCflpITnkIbmiJDlip8nKTsKICAgICAgICBfdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Upload","submitDealWithQualityEvent","formatISO8601Time","components","computed","scrollerHeight","window","innerHeight","data","urlList","modifyremark","modifydate","currentDate","Date","showPicker","created","init","methods","onConfirm","time","toJSON","onSubmit","values","_this","temp","modifyurl","forEach","item","url","push","length","$notify","type","message","join","eventid","$route","query","then","$store","dispatch","$toast","$router","go"],"sources":["src/views/project/quality/deal.vue"],"sourcesContent":["<template>\r\n  <div class=\"report-deal\">\r\n    <van-form @submit=\"onSubmit\" class=\"common-card\" :style=\"{ height: scrollerHeight }\">\r\n      <van-field\r\n        v-model=\"modifydate\"\r\n        is-link\r\n        readonly\r\n        name=\"modifydate\"\r\n        label=\"整改时间\"\r\n        placeholder=\"点击选择整改时间\"\r\n        @click=\"showPicker = true\"\r\n        :rules=\"[{ required: true, message: '请选择检查日期' }]\"\r\n      />\r\n      <upload\r\n        :fileList=\"[]\"\r\n        label=\"整改照片\"\r\n        name=\"modifyurl\"\r\n        :rules=\"[{ required: true, message: '请选择整改照片' }]\"\r\n      ></upload>\r\n      <van-field v-model=\"modifyremark\" name=\"modifyremark\" label=\"整改备注\" placeholder=\"整改备注\" />\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n    <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n      <van-datetime-picker v-model=\"currentDate\" type=\"datetime\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Upload from '@/components/common/Upload'\r\nimport { submitDealWithQualityEvent } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nexport default {\r\n  components: {\r\n    Upload\r\n  },\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 90 + 'px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      urlList: [],\r\n      modifyremark: '',\r\n      modifydate: '',\r\n      currentDate: new Date(),\r\n      showPicker: false,\r\n      formatISO8601Time\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    onConfirm(time) {\r\n      this.showPicker = false\r\n      this.modifydate = this.formatISO8601Time(new Date(time).toJSON())\r\n    },\r\n    init() {},\r\n    onSubmit(values) {\r\n      let temp = []\r\n      values.modifyurl.forEach(item => {\r\n        item.url && temp.push(item.url)\r\n      })\r\n      if(values.modifyurl.length !== temp.length){\r\n         return this.$notify({ type: 'warning', message: '请上传文件或等待文件上传完成！' })\r\n      }\r\n      values.modifyurl = temp.join(',')\r\n      values.eventid = this.$route.query.eventid\r\n      submitDealWithQualityEvent(values).then(data => {\r\n        this.$store.dispatch('getRealtimeMessage')\r\n        this.$toast('处理成功')\r\n        this.$router.go(-1)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;AA8BA,OAAAA,MAAA;AACA,SAAAC,0BAAA;AACA,SAAAC,iBAAA;AACA;EACAC,UAAA;IACAH,MAAA,EAAAA;EACA;EACAI,QAAA;IACAC,cAAA,WAAAA,eAAA;MACA,OAAAC,MAAA,CAAAC,WAAA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,YAAA;MACAC,UAAA;MACAC,WAAA,MAAAC,IAAA;MACAC,UAAA;MACAZ,iBAAA,EAAAA;IACA;EACA;EACAa,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,SAAA,WAAAA,UAAAC,IAAA;MACA,KAAAL,UAAA;MACA,KAAAH,UAAA,QAAAT,iBAAA,KAAAW,IAAA,CAAAM,IAAA,EAAAC,MAAA;IACA;IACAJ,IAAA,WAAAA,KAAA;IACAK,QAAA,WAAAA,SAAAC,MAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,IAAA;MACAF,MAAA,CAAAG,SAAA,CAAAC,OAAA,WAAAC,IAAA;QACAA,IAAA,CAAAC,GAAA,IAAAJ,IAAA,CAAAK,IAAA,CAAAF,IAAA,CAAAC,GAAA;MACA;MACA,IAAAN,MAAA,CAAAG,SAAA,CAAAK,MAAA,KAAAN,IAAA,CAAAM,MAAA;QACA,YAAAC,OAAA;UAAAC,IAAA;UAAAC,OAAA;QAAA;MACA;MACAX,MAAA,CAAAG,SAAA,GAAAD,IAAA,CAAAU,IAAA;MACAZ,MAAA,CAAAa,OAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,OAAA;MACAlC,0BAAA,CAAAqB,MAAA,EAAAgB,IAAA,WAAA9B,IAAA;QACAe,KAAA,CAAAgB,MAAA,CAAAC,QAAA;QACAjB,KAAA,CAAAkB,MAAA;QACAlB,KAAA,CAAAmB,OAAA,CAAAC,EAAA;MACA;IACA;EACA;AACA"}]}