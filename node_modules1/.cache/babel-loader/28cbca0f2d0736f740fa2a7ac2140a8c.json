{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\newPage\\qualityTest.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\newPage\\qualityTest.vue","mtime":1684246188026},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOi9Xb3Jrc3BhY2UvSmlhbkd1YW4vamlhbmd1YW5fbW9iaWxlL21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJFOi9Xb3Jrc3BhY2UvSmlhbkd1YW4vamlhbmd1YW5fbW9iaWxlL21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAqIGFzIGFwaSBmcm9tICJAL2FwaS9xdWFsaXR5IjsKaW1wb3J0IHsgY29udmVydE9wdGlvbnMgfSBmcm9tICJAL3V0aWxzL2Zvcm1hdC5qcyI7Ci8vIGltcG9ydCBlZGl0IGZyb20gJy4vcXVhbGl0eVRlc3QvZWRpdCc7CmltcG9ydCBkZXRhaWwgZnJvbSAnLi9xdWFsaXR5VGVzdC9kZXRhaWwnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaXNEcmFmdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgLy8gZWRpdCwKICAgIGRldGFpbDogZGV0YWlsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXhhbWluZVJlc3VsdE9wdGlvbnM6IFt7CiAgICAgICAgbGFiZWw6ICflhajpg6gnLAogICAgICAgIHZhbHVlOiBudWxsCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+WQiOagvCcsCiAgICAgICAgdmFsdWU6IDAKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn5LiN5ZCI5qC8JywKICAgICAgICB2YWx1ZTogMQogICAgICB9XSwKICAgICAgYWxsRGF0YTogW10sCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIG9wZXJhdGVCdG5zVmlzaWJsZTogdHJ1ZSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBxdWVyeURhdGE6IHsKICAgICAgICAvL+afpeivouWPguaVsAogICAgICAgIGNyZWF0ZUVuZFRpbWU6IG51bGwsCiAgICAgICAgY3JlYXRlU3RhcnRUaW1lOiBudWxsLAogICAgICAgIGRldGVjdGlvblJlc3VsdDogbnVsbCwKICAgICAgICBkcmFmdEZsYWc6IDEsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgc3BlY2lmaWNhdGlvbjogJycsCiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICB0b3RhbFBhZ2U6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIGJ1aWxkU2VjdGlvbjogdGhpcy4kc3RvcmUuZ2V0dGVycy5jdXJyZW50Qmlhb0R1YW4uaWQgfHwgMywKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuY3VyUHJvamVjdC5pZCB8fCAyCiAgICAgIH0sCiAgICAgIGN1cnJlbnRQYXR0ZXJuOiAwLAogICAgICAvLzDmn6XnnIvvvIwx5paw5aKe77yMMuS/ruaUuQogICAgICBlZGl0Um93OiBudWxsLAogICAgICBkZXRhaWxSb3c6IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbInByb2plY3QiXSkpLCB7fSwgewogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uIHNjcm9sbGVySGVpZ2h0KCkgewogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gOTEgKyAncHgnOwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB0aGlzLnF1ZXJ5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBxdWVyeTogZnVuY3Rpb24gcXVlcnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMucXVlcnlEYXRhLmRyYWZ0RmxhZyA9IHRoaXMuaXNEcmFmdCA/IDAgOiAxOwogICAgICBhcGkuZ2V0UXVhbGl0eURldGVjdGlvbkxpc3QodGhpcy5xdWVyeURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmFsbERhdGEgPSByZXMuZGF0YSB8fCB7fTsKICAgICAgICBfdGhpcy50YWJsZURhdGEgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzLnRhYmxlRGF0YSksIF90b0NvbnN1bWFibGVBcnJheShfdGhpcy5mb3JtYXRlVGFibGVEYXRhKHJlcy5kYXRhLmxpc3QpIHx8IFtdKSk7CiAgICAgICAgX3RoaXMucXVlcnlEYXRhLnBhZ2VOdW0gPSByZXMuZGF0YS5wYWdlTnVtICsgMTsKICAgICAgICBfdGhpcy5xdWVyeURhdGEudG90YWxQYWdlID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMucXVlcnlEYXRhLnBhZ2VTaXplID0gcmVzLmRhdGEucGFnZVNpemU7CiAgICAgICAgLy8g5Yqg6L2954q25oCB57uT5p2fCiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIC8vIOaVsOaNruWFqOmDqOWKoOi9veWujOaIkAogICAgICAgIGlmIChfdGhpcy50YWJsZURhdGEubGVuZ3RoID49IHJlcy5kYXRhLnRvdGFsKSB7CiAgICAgICAgICBfdGhpcy5maW5pc2hlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRlVGFibGVEYXRhOiBmdW5jdGlvbiBmb3JtYXRlVGFibGVEYXRhKGxpc3QpIHsKICAgICAgbGlzdCA9IGxpc3QgfHwgW107CiAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW1bJ21hdGVyaWFsU3BlY2lmaWNhdGlvbiddID0gaXRlbVsnbWF0ZXJpYWxTcGVjaWZpY2F0aW9uJ10gPyBpdGVtWydtYXRlcmlhbFNwZWNpZmljYXRpb24nXS5qb2luKCfjgIEnKSA6ICcnOwogICAgICAgIGl0ZW1bJ21hdGVyaWFsc05hbWUnXSA9IGl0ZW1bJ21hdGVyaWFsc05hbWUnXSA/IGl0ZW1bJ21hdGVyaWFsc05hbWUnXS5qb2luKCfjgIEnKSA6ICcnOwogICAgICAgIGl0ZW1bJ3Byb2plY3RQYXJ0cyddID0gaXRlbVsncHJvamVjdFBhcnRzJ10gPyBpdGVtWydwcm9qZWN0UGFydHMnXS5qb2luKCfjgIEnKSA6ICcnOwogICAgICAgIGl0ZW1bJ3Rlc3RSZXN1bHQnXSA9IGl0ZW1bJ3Rlc3RSZXN1bHQnXSA/IGl0ZW1bJ3Rlc3RSZXN1bHQnXS5qb2luKCfjgIEnKSA6ICcnOwogICAgICB9KTsKICAgICAgcmV0dXJuIGxpc3Q7CiAgICB9LAogICAgYWRkTmV3OiBmdW5jdGlvbiBhZGROZXcoKSB7CiAgICAgIC8vIHRoaXMuZWRpdFJvdyA9IG51bGw7CiAgICAgIHRoaXMuJHJlZnMuZWRpdC5jaGFuZ2VWaXNpYmxlKG51bGwsIHRydWUpOwogICAgfSwKICAgIG1vZGlmeTogZnVuY3Rpb24gbW9kaWZ5KHJvdykgewogICAgICAvLyB0aGlzLmVkaXRSb3cgPSByb3c7CiAgICAgIHRoaXMuJHJlZnMuZWRpdC5jaGFuZ2VWaXNpYmxlKHJvdywgdHJ1ZSk7CiAgICB9LAogICAgdmlld0RldGFpbDogZnVuY3Rpb24gdmlld0RldGFpbChyb3cpIHsKICAgICAgdGhpcy5kZXRhaWxSb3cgPSByb3c7CiAgICAgIHRoaXMuJHJlZnMuZGV0YWlsLmNoYW5nZVZpc2libGUodHJ1ZSk7CiAgICB9LAogICAgZGVsZXRlUm93OiBmdW5jdGlvbiBkZWxldGVSb3cocm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTmmK/lkKbliKDpmaQ/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGFwaS5kZWxldGVRdWFsaXR5RGV0ZWN0aW9uKHsKICAgICAgICAgIGlkOiByb3dbJ2lkJ10KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChfdGhpczIudGFibGVEYXRhLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgIF90aGlzMi5xdWVyeURhdGEucGFnZU51bSA9IF90aGlzMi5xdWVyeURhdGEucGFnZU51bSA+IDEgPyBfdGhpczIucXVlcnlEYXRhLnBhZ2VOdW0gLSAxIDogMTsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzMi5xdWVyeSgpOwogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2ZhaWwnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5aSx6LSlIScKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2UpIHsKICAgICAgdGhpcy5xdWVyeURhdGEucGFnZU51bSA9IHBhZ2U7CiAgICAgIHRoaXMucXVlcnkoKTsKICAgIH0sCiAgICBjaGVja0RldGFpbDogZnVuY3Rpb24gY2hlY2tEZXRhaWwocm93KSB7CiAgICAgIHRoaXMuJGVtaXQoImhpZGVEcmFmdCIpOwogICAgICB0aGlzLiRlbWl0KCJnZXREZXRhaWwiLCByb3dbJ2lkJ10pOwogICAgfSwKICAgIGV4cG9ydERhdGE6IGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7CiAgICAgIHRoaXMucXVlcnlEYXRhLmRyYWZ0RmxhZyA9IDE7CiAgICAgIGFwaS5leHBvcnRRdWFsaXR5RGV0ZWN0aW9uTGlzdCh0aGlzLnF1ZXJ5RGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwocmVzKTsKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgYS5kb3dubG9hZCA9ICJcdThEMjhcdTkxQ0ZcdTY4QzBcdTZENEJcdTZFMDVcdTUzNTUueGxzIjsKICAgICAgICAgIGEuaHJlZiA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["api","convertOptions","detail","mapGetters","props","isDraft","type","Boolean","default","components","data","examineResultOptions","label","value","allData","tableData","loading","finished","operateBtnsVisible","dialogFormVisible","queryData","createEndTime","createStartTime","detectionResult","draftFlag","name","specification","pageNum","totalPage","pageSize","buildSection","$store","getters","currentBiaoDuan","id","projectId","curProject","currentPattern","editRow","detailRow","created","computed","_objectSpread","scrollerHeight","window","innerHeight","mounted","methods","query","_this","getQualityDetectionList","then","res","concat","_toConsumableArray","formateTableData","list","total","length","forEach","item","join","addNew","$refs","edit","changeVisible","modify","row","viewDetail","deleteRow","_this2","$confirm","confirmButtonText","cancelButtonText","deleteQualityDetection","$message","message","catch","error","handleCurrentChange","page","checkDetail","$emit","exportData","exportQualityDetectionList","reader","FileReader","readAsDataURL","onload","e","a","document","createElement","download","href","target","result","body","appendChild","click","removeChild"],"sources":["src/views/project/quality/newPage/qualityTest.vue"],"sourcesContent":["<!--\r\n * @Descripttion:质量检测\r\n * @version:\r\n * @Author: WangHarry\r\n * @Date: 2022-05-09 14:10:50\r\n * @LastEditors: zhouhai\r\n * @LastEditTime: 2022-06-20 14:10:57\r\n-->\r\n<template>\r\n\t<el-container class=\"container-box\">\r\n<van-list @load=\"query\" :style=\"{ height: scrollerHeight }\" v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n\t\t\t\t<van-swipe-cell class=\"list\" v-for=\"(item, index) in tableData\" :key=\"index\" :class=\"'item ' + (index === tableData.length - 1 ? 'last' : '')\">\r\n\t\t\t\t\t<div class=\"item\" style=\"\" @click=\"viewDetail(item)\">\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">施工标段：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.buildSectionName }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">材料名称：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.materialsName }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">填报日期：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.fillDate }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">材料规格：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.materialSpecification }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- <div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">工程部位：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.projectParts }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"block\">\r\n\t\t\t\t\t\t\t<div class=\"block-name\">检测结果：</div>\r\n\t\t\t\t\t\t\t<div class=\"block-value\">{{ item.testResult }}</div>\r\n\t\t\t\t\t\t</div> -->\r\n\t\t\t\t\t\t<div class=\"block\" style=\"padding-top: 5px; border-top: 1px solid #d7d7d7;\">\r\n\t\t\t\t\t\t\t<div style=\"float:left;\">{{item.createUserName}}</div>\r\n\t\t\t\t\t\t\t<div style=\"float:right;\">{{item.createTime}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <template #right>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"详情\" @click=\"viewDetail(item)\"/>\r\n\t\t\t\t\t\t<van-button square type=\"primary\" text=\"编辑\" />\r\n\t\t\t\t\t\t<van-button square type=\"danger\" text=\"删除\" />\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</van-swipe-cell>\r\n\t\t</van-list>\r\n\t\t<!-- <edit ref=\"edit\" @query=\"query\" :editRow=\"editRow\"></edit> -->\r\n\t\t<detail ref=\"detail\" :detailRow=\"detailRow\"></detail>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n\timport * as api from \"@/api/quality\";\r\n\timport {\r\n\t\tconvertOptions\r\n\t} from \"@/utils/format.js\";\r\n\t// import edit from './qualityTest/edit';\r\n\timport detail from './qualityTest/detail';\r\n\timport { mapGetters } from 'vuex'\r\n\r\n\texport default {\r\n\t\tprops:{\r\n\t\t\tisDraft:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t// edit,\r\n\t\t\tdetail\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t\r\n\t\t\t\texamineResultOptions: [{\r\n\t\t\t\t\tlabel: '全部',\r\n\t\t\t\t\tvalue: null\r\n\t\t\t\t}, {\r\n\t\t\t\t\tlabel: '合格',\r\n\t\t\t\t\tvalue: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\tlabel: '不合格',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t}],\r\n\t\t\t\tallData: [],\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\toperateBtnsVisible: true,\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tqueryData: { //查询参数\r\n\t\t\t\t\tcreateEndTime: null,\r\n\t\t\t\t\tcreateStartTime: null,\r\n\t\t\t\t\tdetectionResult: null,\r\n\t\t\t\t\tdraftFlag: 1,\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tspecification: '',\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\tbuildSection: this.$store.getters.currentBiaoDuan.id || 3,\r\n\t\t\t\t\tprojectId: this.$store.getters.curProject.id || 2,\r\n\t\t\t\t},\r\n\t\t\t\tcurrentPattern: 0, //0查看，1新增，2修改\r\n\t\t\t\teditRow: null,\r\n\t\t\t\tdetailRow: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters([\"project\"]),\r\n\t\t\tscrollerHeight: function() {\r\n\t\t\t\treturn window.innerHeight - 91 + 'px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.query();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tquery() {\r\n\t\t\t\tthis.queryData.draftFlag=this.isDraft?0:1;\r\n\t\t\t\tapi.getQualityDetectionList(this.queryData).then((res) => {\r\n\t\t\t\t\tthis.allData = res.data || {};\r\n\t\t\t\t\tthis.tableData = [...this.tableData,...this.formateTableData(res.data.list)||[]]\r\n\t\t\t\t\tthis.queryData.pageNum = res.data.pageNum + 1;\r\n\t\t\t\t\tthis.queryData.totalPage = res.data.total;\r\n\t\t\t\t\tthis.queryData.pageSize = res.data.pageSize;\r\n\t\t\t\t\t// 加载状态结束\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t// 数据全部加载完成\r\n\t\t\t\t\tif (this.tableData.length >= res.data.total) {\r\n\t\t\t\t\t\tthis.finished = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tformateTableData(list) {\r\n\t\t\t\tlist = list || [];\r\n\t\t\t\tlist.forEach(item => {\r\n\t\t\t\t\titem['materialSpecification'] = item['materialSpecification'] ? item['materialSpecification']\r\n\t\t\t\t\t\t.join('、') : '';\r\n\t\t\t\t\titem['materialsName'] = item['materialsName'] ? item['materialsName'].join('、') : '';\r\n\t\t\t\t\titem['projectParts'] = item['projectParts'] ? item['projectParts'].join('、') : '';\r\n\t\t\t\t\titem['testResult'] = item['testResult'] ? item['testResult'].join('、') : '';\r\n\t\t\t\t})\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\taddNew() {\r\n\t\t\t\t// this.editRow = null;\r\n\t\t\t\tthis.$refs.edit.changeVisible(null,true);\r\n\t\t\t},\r\n\t\t\tmodify(row) {\r\n\t\t\t\t// this.editRow = row;\r\n\t\t\t\tthis.$refs.edit.changeVisible(row,true);\r\n\t\t\t},\r\n\t\t\tviewDetail(row) {\r\n\t\t\t\tthis.detailRow = row;\r\n\t\t\t\tthis.$refs.detail.changeVisible(true);\r\n\t\t\t},\r\n\t\t\tdeleteRow(row) {\r\n\t\t\t\tthis.$confirm('确认是否删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tapi.deleteQualityDetection({\r\n\t\t\t\t\t\tid: row['id']\r\n\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\tif (this.tableData.length == 1) {\r\n\t\t\t\t\t\t\tthis.queryData.pageNum = this.queryData.pageNum> 1 ? this.queryData.pageNum - 1 : 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.query();\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'fail',\r\n\t\t\t\t\t\t\tmessage: '删除失败!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(page) {\r\n\t\t\t\tthis.queryData.pageNum=page\r\n\t\t\t\tthis.query()\r\n\t\t\t},\r\n\t\t\tcheckDetail(row){\r\n\t\t\t\tthis.$emit(\"hideDraft\");\r\n\t\t\t\tthis.$emit(\"getDetail\",row['id']);\r\n\t\t\t},\r\n\t\t\texportData() {\r\n\t\t\t\tthis.queryData.draftFlag = 1;\r\n\t\t\t\tapi.exportQualityDetectionList(this.queryData).then((res) => {\r\n\t\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\t\treader.readAsDataURL(res);\r\n\t\t\t\t\treader.onload = (e) => {\r\n\t\t\t\t\t\tconst a = document.createElement('a');\r\n\t\t\t\t\t\ta.download = `质量检测清单.xls`;\r\n\t\t\t\t\t\ta.href = e.target.result;\r\n\t\t\t\t\t\tdocument.body.appendChild(a);\r\n\t\t\t\t\t\ta.click();\r\n\t\t\t\t\t\tdocument.body.removeChild(a);\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.container-box {\r\n\t\tcolor: #000000;\r\n\t\tbackground-color: #FAFAFA;\r\n\t\theight: 100%;\r\n\t\twidth: calc(100% + 1px);\r\n  \t\toverflow-y: auto;\r\n\t\t.van-list{\r\n\t\t\twidth: 100%;\r\n\t\t\t.list {\r\n\t\t\t\t.item{\r\n\t\t\t\t\tpadding: 10px;\r\n\t\t\t\t\tborder:1px solid rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\tborder-radius:5px;\r\n\t\t\t\t\tmargin:5px;\r\n\t\t\t\t\tbox-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.1);\r\n\t\t\t\t\t.block {\r\n\t\t\t\t\t\toverflow: auto;\r\n\t\t\t\t\t\t.block-name {\r\n\t\t\t\t\t\t\tfloat: left;\r\n\t\t\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\t\t\tcolor: rgb(85, 85, 85);\r\n\t\t\t\t\t\t\tmin-height: 24px;\r\n\t\t\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.block-value {\r\n\t\t\t\t\t\t\twidth: calc(100% - 120px);\r\n\t\t\t\t\t\t\tmargin-left: 120px;\r\n\t\t\t\t\t\t\tmin-height: 24px;\r\n\t\t\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.status {\r\n\t\t\t\t\t\tbackground: rgb(0, 132, 255);\r\n\t\t\t\t\t\tpadding: 1px 3px ;\r\n\t\t\t\t\t\tfont-size: 10px;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tright: 25px;\r\n\t\t\t\t\t\ttop: 8px;\r\n\t\t\t\t\t\tcolor: white;\r\n\t\t\t\t\t\tborder-radius: 3px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.van-button {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"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"}]}