{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\utils\\appUpdate.js","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\utils\\appUpdate.js","mtime":1684246187899},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\eslint-loader\\index.js","mtime":1684411443448}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL3RvYXN0L3N0eWxlIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0ICJ2YW50L2VzL2RpYWxvZy9zdHlsZSI7CmltcG9ydCBfRGlhbG9nIGZyb20gInZhbnQvZXMvZGlhbG9nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgeyBkYXRhX3psc2sgfSBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCBjb25zdGFudEZpZWxkIGZyb20gJ0AvYXBpL2hvbWUnOwppbXBvcnQgeyBnZXRBcHBVcGRhdGVJbmZvIH0gZnJvbSAnQC9hcGkvdXNlcmF1dGgnOwp2YXIgZ2V0U2VydmVySW5mbyA9IGZ1bmN0aW9uIGdldFNlcnZlckluZm8odHlwZSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgZ2V0QXBwVXBkYXRlSW5mbyh7CiAgICAgIHRhYmxlOiAnc3NfZl9hcHBfdXBkYXRlJywKICAgICAgbWFwU3RyOiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgb3M6IHR5cGUsCiAgICAgICAgdHlwZTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9UWVBFCiAgICAgIH0pCiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJlc29sdmUoY29uc3RhbnRGaWVsZC52ZXJzaW9uSW5mb1t0eXBlXVtwcm9jZXNzLmVudi5WVUVfQVBQX1RZUEVdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdGVtcHMgPSBbXTsKICAgICAgICB0ZW1wcyA9IGRhdGEuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIERhdGUucGFyc2UoYlsndGltZSddKSAtIERhdGUucGFyc2UoYVsndGltZSddKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgX3RlbXBzJCA9IHRlbXBzWzBdLAogICAgICAgICAgbmFtZSA9IF90ZW1wcyQubmFtZSwKICAgICAgICAgIGNvZGUgPSBfdGVtcHMkLmNvZGUsCiAgICAgICAgICByZW1hcmsgPSBfdGVtcHMkLnJlbWFyazsKICAgICAgICByZXNvbHZlKHsKICAgICAgICAgIHZlcnNpb246IHsKICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgY29kZTogY29kZQogICAgICAgICAgfSwKICAgICAgICAgIHJlbWFyazogSlNPTi5wYXJzZShyZW1hcmspCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9Owp2YXIgY2hlY2tJc05lZWRVcGRhdGUgPSBmdW5jdGlvbiBjaGVja0lzTmVlZFVwZGF0ZSh0eXBlKSB7CiAgdmFyIGN1cnJlbnRJbmZvID0gY29uc3RhbnRGaWVsZC52ZXJzaW9uSW5mb1t0eXBlXVtwcm9jZXNzLmVudi5WVUVfQVBQX1RZUEVdOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgZ2V0U2VydmVySW5mbyh0eXBlKS50aGVuKGZ1bmN0aW9uIChzZXJ2ZXJJbmZvKSB7CiAgICAgIGlmIChzZXJ2ZXJJbmZvLnZlcnNpb24uY29kZSA+IGN1cnJlbnRJbmZvLnZlcnNpb24uY29kZSkgewogICAgICAgIHJlc29sdmUoc2VydmVySW5mbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKdmFyIHNob3dVcGRhdGVJbmZvID0gZnVuY3Rpb24gc2hvd1VwZGF0ZUluZm8oZGF0YSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgX0RpYWxvZyh7CiAgICAgIHRpdGxlOiAiXHUzMDEwIi5jb25jYXQoZGF0YS52ZXJzaW9uLm5hbWUsICJcdTMwMTFcdTcyNDhcdTY3MkNcdTY2RjRcdTY1QjAiKSwKICAgICAgbWVzc2FnZTogZGF0YS5yZW1hcmssCiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5pu05pawJywKICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnZ3JlZW4nLAogICAgICBjbG9zZU9uQ2xpY2tPdmVybGF5OiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgYWN0aW9uID09PSAnY29uZmlybScgJiYgcmVzb2x2ZSgpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGFjdGlvbikge30pOwogIH0pOwp9Owp2YXIgaW9zVXBkYXRlID0gZnVuY3Rpb24gaW9zVXBkYXRlKCkgewogIGNoZWNrSXNOZWVkVXBkYXRlKCdpb3MnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICBkYXRhICYmIHNob3dVcGRhdGVJbmZvKGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICB2YXIgdXJsID0gZW5jb2RlVVJJKCJodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC8iLmNvbmNhdChjb25zdGFudEZpZWxkLm5hbWUsICIvIikuY29uY2F0KGNvbnN0YW50RmllbGQuaW9zQXBwSWQpKTsKICAgICAgcGx1cy5ydW50aW1lLm9wZW5VUkwodXJsLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShlcnJvcikpOwogICAgICB9KTsKICAgIH0pOwogIH0pOwp9Owp2YXIgYW5kcm9pZFVwZGF0ZSA9IGZ1bmN0aW9uIGFuZHJvaWRVcGRhdGUoKSB7CiAgY2hlY2tJc05lZWRVcGRhdGUoJ2FuZHJvaWQnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICBpZiAoZGF0YSkgewogICAgICB2YXIgZmlsZU5hbWUgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9UWVBFKS5jb25jYXQoZGF0YS52ZXJzaW9uLm5hbWUsICIuYXBrIik7CiAgICAgIHNob3dVcGRhdGVJbmZvKGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGFuZHJvaWREb3dubG9hZChmaWxlTmFtZSk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9Owp2YXIgYW5kcm9pZERvd25sb2FkID0gZnVuY3Rpb24gYW5kcm9pZERvd25sb2FkKGFwcE5hbWUpIHsKICBfVG9hc3QubG9hZGluZyh7CiAgICBtZXNzYWdlOiAn5a6J6KOF5YyF5LiL6L295Lit77yM6K+3562J5YiwMS0y5Lik5YiG6ZKf77yBJywKICAgIGZvcmJpZENsaWNrOiB0cnVlCiAgfSk7CiAgdmFyIGZpbGVOYW1lID0gJ19kb3dubG9hZHMvJyArIGFwcE5hbWU7CiAgdmFyIGR0YXNrID0gcGx1cy5kb3dubG9hZGVyLmNyZWF0ZURvd25sb2FkKGRhdGFfemxzayArICcvYmltLycgKyBhcHBOYW1lLCB7CiAgICBmaWxlbmFtZTogZmlsZU5hbWUKICB9LCBmdW5jdGlvbiAoZCwgc3RhdHVzKSB7CiAgICBfVG9hc3QuY2xlYXIoKTsKICAgIC8vIOS4i+i9veWujOaIkAogICAgaWYgKHN0YXR1cyA9PSAyMDApIHsKICAgICAgcGx1cy5ydW50aW1lLmluc3RhbGwoZmlsZU5hbWUsIHt9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+WuieijheaIkOWKnycpOwogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX1RvYXN0LmZhaWwoJ+WuieijheWksei0pScpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIF9Ub2FzdC5mYWlsKCfkuIvovb3lpLHotKUnKTsKICAgIH0KICB9KTsKICBkdGFzay5zdGFydCgpOwp9Owp2YXIganVkZ2VQbHVzID0gZnVuY3Rpb24ganVkZ2VQbHVzKCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgaWYgKHdpbmRvdy5wbHVzKSB7CiAgICAgIHJlc29sdmUoKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsdXNyZWFkeScsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9Owp2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkgewogIGp1ZGdlUGx1cygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgdmFyIG9zID0gcGx1cy5vcy5uYW1lLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAob3MgPT09ICdpb3MnKSB7CiAgICAgIGlvc1VwZGF0ZSgpOwogICAgfSBlbHNlIHsKICAgICAgYW5kcm9pZFVwZGF0ZSgpOwogICAgfQogIH0pOwogIC8vIGFuZHJvaWRVcGRhdGUoKQp9OwoKdmFyIGNoZWNrVXBkYXRlID0gZnVuY3Rpb24gY2hlY2tVcGRhdGUoKSB7CiAganVkZ2VQbHVzKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICB2YXIgb3MgPSBwbHVzLm9zLm5hbWUudG9Mb3dlckNhc2UoKTsKICAgIHZhciB0eXBlID0gb3MgPT09ICdpb3MnID8gJ2lvcycgOiAnYW5kcm9pZCc7CiAgICBjaGVja0lzTmVlZFVwZGF0ZSh0eXBlKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgdXBkYXRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+W9k+eJiOacrOS4uuacgOaWsOeJiOacrO+8gScpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKdmFyIGdldEN1cnJlbnRWZXJzaW9uSW5mbyA9IGZ1bmN0aW9uIGdldEN1cnJlbnRWZXJzaW9uSW5mbygpIHsKICB2YXIgb3MgPSB3aW5kb3cucGx1cyA/IHdpbmRvdy5wbHVzLm9zLm5hbWUudG9Mb3dlckNhc2UoKSA6ICdhbmRyb2lkJzsKICByZXR1cm4gY29uc3RhbnRGaWVsZC52ZXJzaW9uSW5mb1tvcyA9PT0gJ2lvcycgPyAnaW9zJyA6ICdhbmRyb2lkJ11bcHJvY2Vzcy5lbnYuVlVFX0FQUF9UWVBFXTsKfTsKZXhwb3J0IHZhciBhcHBVcGRhdGUgPSB7CiAgY2hlY2tVcGRhdGU6IGNoZWNrVXBkYXRlLAogIHVwZGF0ZTogdXBkYXRlLAogIGdldEN1cnJlbnRWZXJzaW9uSW5mbzogZ2V0Q3VycmVudFZlcnNpb25JbmZvCn07"},{"version":3,"names":["data_zlsk","constantField","getAppUpdateInfo","getServerInfo","type","Promise","resolve","table","mapStr","JSON","stringify","os","process","env","VUE_APP_TYPE","then","data","length","versionInfo","temps","sort","a","b","Date","parse","_temps$","name","code","remark","version","checkIsNeedUpdate","currentInfo","serverInfo","showUpdateInfo","_Dialog","title","concat","message","confirmButtonText","confirmButtonColor","closeOnClickOverlay","action","catch","iosUpdate","url","encodeURI","iosAppId","plus","runtime","openURL","error","alert","androidUpdate","fileName","androidDownload","appName","_Toast","loading","forbidClick","dtask","downloader","createDownload","filename","d","status","clear","install","success","fail","start","judgePlus","window","document","addEventListener","update","toLowerCase","checkUpdate","getCurrentVersionInfo","appUpdate"],"sources":["E:/Workspace/JianGuan/jianguan_mobile/mobile/src/utils/appUpdate.js"],"sourcesContent":["import { data_zlsk } from '@/config'\r\nimport constantField from '@/api/home'\r\nimport { getAppUpdateInfo } from '@/api/userauth'\r\nimport { Dialog } from 'vant'\r\nimport { Toast } from 'vant'\r\n\r\nconst getServerInfo = type => {\r\n  return new Promise(resolve => {\r\n    getAppUpdateInfo({\r\n      table: 'ss_f_app_update',\r\n      mapStr: JSON.stringify({\r\n        os: type,\r\n        type: process.env.VUE_APP_TYPE\r\n      })\r\n    }).then(data => {\r\n      if (!data || data.length === 0) {\r\n        resolve(constantField.versionInfo[type][process.env.VUE_APP_TYPE])\r\n      } else {\r\n        let temps = []\r\n        temps = data.sort(function(a, b) {\r\n          return Date.parse(b['time']) - Date.parse(a['time'])\r\n        })\r\n        let { name, code, remark } = temps[0]\r\n        resolve({\r\n          version: {\r\n            name,\r\n            code\r\n          },\r\n          remark: JSON.parse(remark)\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nconst checkIsNeedUpdate = type => {\r\n  let currentInfo = constantField.versionInfo[type][process.env.VUE_APP_TYPE]\r\n  return new Promise(resolve => {\r\n    getServerInfo(type).then(serverInfo => {\r\n      if (serverInfo.version.code > currentInfo.version.code) {\r\n        resolve(serverInfo)\r\n      } else {\r\n        resolve()\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nconst showUpdateInfo = data => {\r\n  return new Promise(resolve => {\r\n    Dialog({\r\n      title: `【${data.version.name}】版本更新`,\r\n      message: data.remark,\r\n      confirmButtonText: '更新',\r\n      confirmButtonColor: 'green',\r\n      closeOnClickOverlay: true\r\n    })\r\n      .then(action => {\r\n        action === 'confirm' && resolve()\r\n      })\r\n      .catch(action => {})\r\n  })\r\n}\r\n\r\nconst iosUpdate = () => {\r\n  checkIsNeedUpdate('ios').then(data => {\r\n    data &&\r\n      showUpdateInfo(data).then(() => {\r\n        let url = encodeURI(`https://apps.apple.com/cn/app/${constantField.name}/${constantField.iosAppId}`)\r\n        plus.runtime.openURL(url, function(error) {\r\n          alert(JSON.stringify(error))\r\n        })\r\n      })\r\n  })\r\n}\r\n\r\nconst androidUpdate = () => {\r\n  checkIsNeedUpdate('android').then(data => {\r\n    if (data) {\r\n      let fileName = `${process.env.VUE_APP_TYPE}${data.version.name}.apk`\r\n      showUpdateInfo(data).then(() => {\r\n        androidDownload(fileName)\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst androidDownload = appName => {\r\n  Toast.loading({\r\n    message: '安装包下载中，请等到1-2两分钟！',\r\n    forbidClick: true\r\n  })\r\n  let fileName = '_downloads/' + appName\r\n  var dtask = plus.downloader.createDownload(data_zlsk + '/bim/' + appName, { filename: fileName }, function(\r\n    d,\r\n    status\r\n  ) {\r\n    Toast.clear()\r\n    // 下载完成\r\n    if (status == 200) {\r\n      plus.runtime.install(\r\n        fileName,\r\n        {},\r\n        function() {\r\n          Toast.success('安装成功')\r\n        },\r\n        function() {\r\n          Toast.fail('安装失败')\r\n        }\r\n      )\r\n    } else {\r\n      Toast.fail('下载失败')\r\n    }\r\n  })\r\n  dtask.start()\r\n}\r\n\r\nconst judgePlus = function() {\r\n  return new Promise(resolve => {\r\n    if (window.plus) {\r\n      resolve()\r\n    } else {\r\n      document.addEventListener('plusready', function() {\r\n        resolve()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst update = () => {\r\n  judgePlus().then(() => {\r\n    let os = plus.os.name.toLowerCase()\r\n    if (os === 'ios') {\r\n      iosUpdate()\r\n    } else {\r\n      androidUpdate()\r\n    }\r\n  })\r\n  // androidUpdate()\r\n}\r\n\r\nconst checkUpdate = () => {\r\n  judgePlus().then(() => {\r\n    let os = plus.os.name.toLowerCase()\r\n    let type = os === 'ios' ? 'ios' : 'android'\r\n    checkIsNeedUpdate(type).then(data => {\r\n      if (data) {\r\n        update()\r\n      } else {\r\n        Toast.success('当版本为最新版本！')\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nconst getCurrentVersionInfo = () => {\r\n  let os = window.plus ? window.plus.os.name.toLowerCase() : 'android'\r\n  return constantField.versionInfo[os === 'ios' ? 'ios' : 'android'][process.env.VUE_APP_TYPE]\r\n}\r\n\r\nexport const appUpdate = {\r\n  checkUpdate,\r\n  update,\r\n  getCurrentVersionInfo\r\n}\r\n"],"mappings":"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"}]}