{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\ComponentSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\ComponentSelect.vue","mtime":1684246187875},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovV29ya3NwYWNlL0ppYW5HdWFuL2ppYW5ndWFuX21vYmlsZS9tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkU6L1dvcmtzcGFjZS9KaWFuR3Vhbi9qaWFuZ3Vhbl9tb2JpbGUvbW9iaWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAidmFudC9lcy9pbWFnZS1wcmV2aWV3L3N0eWxlIjsKaW1wb3J0IF9JbWFnZVByZXZpZXcgZnJvbSAidmFudC9lcy9pbWFnZS1wcmV2aWV3IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgY29uc3RhbnRGaWVsZCBmcm9tICdAL2FwaS9ob21lJzsKaW1wb3J0IFBkZlByZXZpZXcgZnJvbSAnQC9jb21wb25lbnRzL1BkZlByZXZpZXcnOwppbXBvcnQgeyBmb3JtYXRJU084NjAxVGltZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldENoZWNrRGF0YUJ5Q29ucG9uZW50SWQsIGdldFRyZWUgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IF9kZWZpbmVQcm9wZXJ0eSh7CiAgICBQZGZQcmV2aWV3OiBQZGZQcmV2aWV3CiAgfSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQubmFtZSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQpLAogIHByb3BzOiB7CiAgICBvbkNvbXBvbmVudFNlbGVjdDogewogICAgICB0eXBlOiBGdW5jdGlvbgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBzaG93RGV0YWlsOiBmYWxzZSwKICAgICAgdHlwZUl0ZW06IHt9LAogICAgICBzaG93TG9jYXRpb25TZWxlY3Q6IGZhbHNlLAogICAgICBmaWVsZE5hbWVzOiB7CiAgICAgICAgdGV4dDogJ25hbWUnLAogICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgIGNoaWxkcmVuOiAnY2hpbGQnCiAgICAgIH0sCiAgICAgIGZpZWxkVmFsdWU6ICcnLAogICAgICBjYXNjYWRlclZhbHVlOiAnJywKICAgICAgb3B0aW9uczogW10sCiAgICAgIGNvZGU6ICcnLAogICAgICBhY3Rpb25zOiBbXSwKICAgICAgbGlzdDogW10sCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIG1hcDoge30sCiAgICAgIGRldGFpbExpc3Q6IFtdLAogICAgICBkZXRhaWxOYW1lOiAnJywKICAgICAgY3VycmVudENvbXBvbmVudDogbnVsbCwKICAgICAgZm9ybWF0SVNPODYwMVRpbWU6IGZvcm1hdElTTzg2MDFUaW1lLAogICAgICBjaGVja0RhdGE6IG51bGwsCiAgICAgIHBkZlVybDogJycsCiAgICAgIHNob3dQZGY6IGZhbHNlLAogICAgICBwZGZIZWlnaHQ6IDAsCiAgICAgIGdvbmdxdUl0ZW06IHt9LAogICAgICBzaG93R29uZ1F1OiBmYWxzZSwKICAgICAgZ29uZ3F1QWN0aW9uczogW10sCiAgICAgIHByb2plY3RUeXBlczogY29uc3RhbnRGaWVsZC5wcm9qZWN0VHlwZXMsCiAgICAgIHByb2plY3RUeXBlOiAnJwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBwcm9qZWN0VHlwZTogZnVuY3Rpb24gcHJvamVjdFR5cGUoKSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2N1cnJlbnRQcm9qZWN0JywgJ2N1clByb2plY3QnXSkpLCB7fSwgewogICAgc2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uIHNjcm9sbGVySGVpZ2h0KCkgewogICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gODEgLSAxMzAgLSA5MiArICdweCc7CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucHJvamVjdFR5cGUgPSB0aGlzLnByb2plY3RUeXBlc1swXS52YWx1ZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgZ2V0VHJlZSh7CiAgICAgICAgdHlwZTogdGhpcy5wcm9qZWN0VHlwZSwKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuY3VyUHJvamVjdC5jaGlsZFswXS5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jaGlsZCAmJiBkYXRhLmNoaWxkLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoYXQuZ29uZ3F1QWN0aW9ucyA9IGRhdGEuY2hpbGQgfHwgW107CiAgICAgICAgICB0aGF0LmdvbmdxdUFjdGlvbnMubGVuZ3RoID4gMCAmJiB0aGF0Lm9uR29uZ1F1U2VsZWN0KHRoYXQuZ29uZ3F1QWN0aW9uc1swXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoYXQuZ29uZ3F1QWN0aW9ucyA9IFtdOwogICAgICAgICAgdGhhdC5hY3Rpb25zID0gW107CiAgICAgICAgICB0aGF0Lm9wdGlvbnMgPSBbXTsKICAgICAgICAgIHRoYXQubGlzdCA9IFtdOwogICAgICAgICAgdGhhdC5nb25ncXVJdGVtID0ge307CiAgICAgICAgICB0aGF0LnR5cGVJdGVtID0ge307CiAgICAgICAgICB0aGF0LmZpZWxkVmFsdWUgPSAnJzsKICAgICAgICAgIHRoYXQuY2FzY2FkZXJWYWx1ZSA9ICcnOwogICAgICAgICAgdGhhdC4kdG9hc3QuZmFpbCgn6K+l57G75Z6L5LiL5peg5a+55bqU5pWw5o2u77yBJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkdvbmdRdVNlbGVjdDogZnVuY3Rpb24gb25Hb25nUXVTZWxlY3QoZ29uZ3F1KSB7CiAgICAgIHRoaXMuc2hvd0dvbmdRdSA9IGZhbHNlOwogICAgICB0aGlzLmdvbmdxdUl0ZW0gPSBnb25ncXU7CiAgICAgIHRoaXMuYWN0aW9ucyA9IGdvbmdxdS5jaGlsZDsKICAgICAgaWYgKHRoaXMuYWN0aW9ucyAmJiB0aGlzLmFjdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMudHlwZUl0ZW0gPSB0aGlzLmFjdGlvbnNbMF07CiAgICAgICAgdGhpcy5vblNlbGVjdCh0aGlzLnR5cGVJdGVtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnR5cGVJdGVtID0ge307CiAgICAgICAgdGhpcy4kdG9hc3QuZmFpbCgn6K+l5bel5Yy65LiL5peg6aG555uu5pWw5o2u77yBJyk7CiAgICAgIH0KICAgIH0sCiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoaXRlbSkgewogICAgICB0aGlzLnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy50eXBlSXRlbSA9IGl0ZW07CiAgICAgIHRoaXMuZ2V0cHJvamVjdERldGFpbEluZm8oKTsKICAgIH0sCiAgICBnZXRwcm9qZWN0RGV0YWlsSW5mbzogZnVuY3Rpb24gZ2V0cHJvamVjdERldGFpbEluZm8oKSB7CiAgICAgIHRoaXMuZmllbGRWYWx1ZSA9ICcnOwogICAgICB0aGlzLmNhc2NhZGVyVmFsdWUgPSAnJzsKICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy50eXBlSXRlbS5jaGlsZDsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoX3JlZikgewogICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0gX3JlZi5zZWxlY3RlZE9wdGlvbnM7CiAgICAgIHRoaXMuZmllbGRWYWx1ZSA9IHNlbGVjdGVkT3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgIHJldHVybiBvcHRpb24ubmFtZTsKICAgICAgfSkuam9pbignLycpOwogICAgICB2YXIgbGFzdCA9IHNlbGVjdGVkT3B0aW9uc1tzZWxlY3RlZE9wdGlvbnMubGVuZ3RoIC0gMV07CiAgICAgIGlmIChsYXN0LmNvbnBvbmV0Y29kZSkgewogICAgICAgIHRoaXMuY3VycmVudENvbXBvbmVudCA9IGxhc3Q7CiAgICAgICAgdGhpcy5vbkxvYWQoKTsKICAgICAgfQogICAgICBpZiAoIWxhc3QuY2hpbGQgfHwgbGFzdC5jaGlsZC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5zaG93TG9jYXRpb25TZWxlY3QgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmN1cnJlbnRDb21wb25lbnQgJiYgZ2V0Q2hlY2tEYXRhQnlDb25wb25lbnRJZCh7CiAgICAgICAgaWQ6IHRoaXMuY3VycmVudENvbXBvbmVudC5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IGRhdGEuY2hlY2s7CiAgICAgICAgX3RoaXMuY2hlY2tEYXRhID0gZGF0YS5kYXRhOwogICAgICAgIF90aGlzLnJlZnJlc2hpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5maW5pc2hlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIHByZXZpZXdQaWM6IGZ1bmN0aW9uIHByZXZpZXdQaWMoaXRlbSkgewogICAgICB0aGlzLiRyZWZzWydwZGZQcmV2aWV3J10uc2hvd1BpYyhpdGVtLnJlY29yZGlkKTsKICAgIH0sCiAgICBwcmV2aWV3UGRmOiBmdW5jdGlvbiBwcmV2aWV3UGRmKGl0ZW0pIHsKICAgICAgdGhpcy4kcmVmc1sncGRmUHJldmlldyddLnNob3coaXRlbS5yZWNvcmRpZCk7CiAgICB9LAogICAgaXRlbUNsaWNrOiBmdW5jdGlvbiBpdGVtQ2xpY2soaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIG9iaiA9IG51bGw7CiAgICAgIGlmIChpbmRleCAhPT0gMCkgewogICAgICAgIG9iaiA9IHRoaXMubGlzdFtpbmRleCAtIDFdOwogICAgICB9CiAgICAgIHZhciBzdGF0dXMgPSBpdGVtLnN0YXR1czsKICAgICAgaWYgKG9iaiAmJiBvYmouc3RhdHVzICE9PSAxKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavmiqXkuIrkuKrlt6Xluo/miJbogZTns7vnm5HnkIblrqHmoLjkuIrkuKrlt6Xluo8nLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChzdGF0dXMgPT09IDApIHsKICAgICAgICB0aGlzLm9uQ29tcG9uZW50U2VsZWN0KGl0ZW0sIHRoaXMuY2hlY2tEYXRhKTsKICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDEpIHsKICAgICAgICAvL+eKtuaAgeS4ujHvvIzlt6Xluo/lrqHmoLjlt7LlrozmiJAKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgbWVzc2FnZTogJ+W3peW6j+W3suWuoeaguOWujOaIkO+8jOivt+Whq+aKpeS4i+S4gOmBk+W3peW6jycsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDIpIHsKICAgICAgICB0aGlzLm9uQ29tcG9uZW50U2VsZWN0KGl0ZW0sIHRoaXMuY2hlY2tEYXRhLCB0cnVlKTsKICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDMpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgbWVzc2FnZTogJ+ivt+iBlOezu+ebkeeQhuWuoeaguCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQogICAgfSAvLyBpdGVtQ2xpY2soaXRlbSwgaW5kZXgpIHsKICAgIC8vICAgbGV0IG9iaiA9IG51bGwKICAgIC8vICAgaWYgKGluZGV4ICE9PSAwKSB7CiAgICAvLyAgICAgb2JqID0gdGhpcy5saXN0W2luZGV4IC0gMV0KICAgIC8vICAgfQogICAgLy8gICAvLzAg5rKh5aGr5oqlIDPlt7LloavmiqXlvoXlrqHmoLggMeW3suehruiupCAy5a6h5qC45pyq6YCa6L+HCiAgICAvLyAgIGxldCB7IHN0YXR1cyB9ID0gaXRlbQogICAgLy8gICBpZiAoc3RhdHVzID09PSAzKSB7CiAgICAvLyAgICAgdGhpcy4kbm90aWZ5KHsKICAgIC8vICAgICAgIG1lc3NhZ2U6ICfor7fogZTns7vnm5HnkIblrqHmoLgnLAogICAgLy8gICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAvLyAgICAgfSkKICAgIC8vICAgICByZXR1cm4KICAgIC8vICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDIpIHsKICAgIC8vICAgICB0aGlzLiRub3RpZnkoewogICAgLy8gICAgICAgbWVzc2FnZTogJ+WuoeaguOacqumAmui/h++8jOivt+iBlOezu+ebkeeQhicsCiAgICAvLyAgICAgICB0eXBlOiAnd2FybmluZycKICAgIC8vICAgICB9KQogICAgLy8gICAgIHJldHVybgogICAgLy8gICB9CiAgICAvLyAgIGlmIChvYmogJiYgb2JqLnN0YXR1cyAhPT0gMSkgewogICAgLy8gICAgIHRoaXMuJG5vdGlmeSh7CiAgICAvLyAgICAgICBtZXNzYWdlOiAn6K+35aGr5oql5LiK5Liq5bel5bqP5oiW6IGU57O755uR55CG5a6h5qC45LiK5Liq5bel5bqPJywKICAgIC8vICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgLy8gICAgIH0pCiAgICAvLyAgICAgcmV0dXJuCiAgICAvLyAgIH0KICAgIC8vICAgLy8wIOayoeWhq+aKpSAz5bey5aGr5oql5b6F5a6h5qC4IDHlt7Lnoa7orqQgMuWuoeaguOacqumAmui/hwogICAgLy8gICBpZiAoaXRlbS5zdGF0dXMgPT09IDApIHsKICAgIC8vICAgICB0aGlzLm9uQ29tcG9uZW50U2VsZWN0KGl0ZW0sIHRoaXMuY2hlY2tEYXRhKQogICAgLy8gICB9CiAgICAvLyB9CiAgfQp9Ow=="},{"version":3,"names":["constantField","PdfPreview","formatISO8601Time","mapGetters","getCheckDataByConponentId","getTree","components","_defineProperty","_ImagePreview","Component","name","props","onComponentSelect","type","Function","data","show","showDetail","typeItem","showLocationSelect","fieldNames","text","value","children","fieldValue","cascaderValue","options","code","actions","list","finished","refreshing","map","detailList","detailName","currentComponent","checkData","pdfUrl","showPdf","pdfHeight","gongquItem","showGongQu","gongquActions","projectTypes","projectType","watch","init","computed","_objectSpread","scrollerHeight","window","innerHeight","created","methods","that","projectId","curProject","child","id","then","length","onGongQuSelect","$toast","fail","gongqu","onSelect","item","getprojectDetailInfo","onChange","_ref","selectedOptions","option","join","last","conponetcode","onLoad","_this","check","previewPic","$refs","showPic","recordid","previewPdf","itemClick","index","obj","status","$notify","message"],"sources":["src/components/ComponentSelect.vue"],"sourcesContent":["<template>\r\n  <div class=\"component-select\">\r\n    <van-cell-group inset class=\"common-card\" style=\"margin-bottom: 0\">\r\n      <van-field label=\"类型\" label-width=\"40px\">\r\n        <template #input>\r\n          <van-radio-group v-model=\"projectType\" direction=\"horizontal\">\r\n            <van-radio :name=\"item.value\" v-for=\"(item, index) in projectTypes\" :key=\"index\">{{ item.name }}</van-radio>\r\n          </van-radio-group>\r\n        </template>\r\n      </van-field>\r\n      <van-field\r\n        class=\"condition\"\r\n        v-model=\"gongquItem.name\"\r\n        label=\"工区名称\"\r\n        readonly\r\n        @click=\"showGongQu = true\"\r\n        right-icon=\"arrow\"\r\n      />\r\n      <van-field\r\n        class=\"condition\"\r\n        v-model=\"typeItem.name\"\r\n        label=\"项目名称\"\r\n        readonly\r\n        @click=\"show = true\"\r\n        right-icon=\"arrow\"\r\n      />\r\n      <van-field\r\n        label=\"构件选择\"\r\n        v-model=\"fieldValue\"\r\n        is-link\r\n        readonly\r\n        placeholder=\"请选择构件\"\r\n        @click=\"showLocationSelect = true\"\r\n        :rules=\"[{ required: true, message: '请选择所在地区' }]\"\r\n      />\r\n    </van-cell-group>\r\n    <van-list\r\n      :finished=\"finished\"\r\n      finished-text=\"我也是有底线的~~\"\r\n      @load=\"onLoad\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n      class=\"common-list common-card\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === list.length - 1 ? 'last' : '')\"\r\n        @click=\"itemClick(item, index)\"\r\n      >\r\n        <div class=\"content\">\r\n          <span class=\"name\">工序名称：</span>\r\n          <span class=\"value\">{{ item.name }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">完成时间：</span>\r\n          <span class=\"value\">{{ item.finish || '未录入' }}</span>\r\n        </div>\r\n        <div class=\"content\" v-if=\"item.status === 2\">\r\n          <span class=\"name\">工序状态：</span>\r\n          <span class=\"value common-state-2\">{{ ['未填报','已通过','被驳回','待审核'][item.status] }}</span>\r\n        </div>\r\n        <div class=\"operate center-in-vertical\">\r\n          <van-button v-if=\"item.finish\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\"\r\n            >照片</van-button\r\n          >\r\n          <van-button v-if=\"item.finish\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\"\r\n            >PDF</van-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n    <van-action-sheet v-model=\"showGongQu\" :actions=\"gongquActions\" @select=\"onGongQuSelect\" />\r\n    <van-action-sheet v-model=\"show\" :actions=\"actions\" @select=\"onSelect\" />\r\n    <van-popup v-model=\"showLocationSelect\" round position=\"bottom\">\r\n      <van-cascader\r\n        v-model=\"cascaderValue\"\r\n        title=\"请选择构件\"\r\n        :options=\"options\"\r\n        @close=\"showLocationSelect = false\"\r\n        @change=\"onChange\"\r\n        :field-names=\"fieldNames\"\r\n      />\r\n    </van-popup>\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport constantField from '@/api/home'\r\nimport { ImagePreview } from 'vant'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport { mapGetters } from 'vuex'\r\nimport { getCheckDataByConponentId, getTree } from '@/api/project.js'\r\nexport default {\r\n  components: {\r\n    PdfPreview,\r\n    [ImagePreview.Component.name]: ImagePreview.Component\r\n  },\r\n  props: {\r\n    onComponentSelect: {\r\n      type: Function\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      showDetail: false,\r\n      typeItem: {},\r\n      showLocationSelect: false,\r\n      fieldNames: {\r\n        text: 'name',\r\n        value: 'id',\r\n        children: 'child'\r\n      },\r\n      fieldValue: '',\r\n      cascaderValue: '',\r\n      options: [],\r\n\r\n      code: '',\r\n      actions: [],\r\n      list: [],\r\n      finished: false,\r\n      refreshing: false,\r\n      map: {},\r\n      detailList: [],\r\n      detailName: '',\r\n\r\n      currentComponent: null,\r\n      formatISO8601Time,\r\n      checkData: null,\r\n      pdfUrl: '',\r\n      showPdf: false,\r\n      pdfHeight: 0,\r\n\r\n      gongquItem: {},\r\n      showGongQu: false,\r\n      gongquActions: [],\r\n\r\n      projectTypes: constantField.projectTypes,\r\n      projectType: ''\r\n    }\r\n  },\r\n  watch: {\r\n    projectType: function() {\r\n      this.init()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentProject', 'curProject']),\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 81 - 130 - 92 + 'px'\r\n    }\r\n  },\r\n  created() {\r\n    this.projectType = this.projectTypes[0].value\r\n  },\r\n  methods: {\r\n    init() {\r\n      let that = this\r\n      getTree({ type: this.projectType, projectId: this.curProject.child[0].id }).then(data => {\r\n        if (data && data.child && data.child.length > 0) {\r\n          that.gongquActions = data.child || []\r\n          that.gongquActions.length > 0 && that.onGongQuSelect(that.gongquActions[0])\r\n        } else {\r\n          that.gongquActions = []\r\n          that.actions = []\r\n          that.options = []\r\n          that.list = []\r\n\r\n          that.gongquItem = {}\r\n          that.typeItem = {}\r\n          that.fieldValue = ''\r\n          that.cascaderValue = ''\r\n          that.$toast.fail('该类型下无对应数据！')\r\n        }\r\n      })\r\n    },\r\n    onGongQuSelect(gongqu) {\r\n      this.showGongQu = false\r\n      this.gongquItem = gongqu\r\n      this.actions = gongqu.child\r\n      if (this.actions && this.actions.length > 0) {\r\n        this.typeItem = this.actions[0]\r\n        this.onSelect(this.typeItem)\r\n      } else {\r\n        this.typeItem = {}\r\n        this.$toast.fail('该工区下无项目数据！')\r\n      }\r\n    },\r\n    onSelect(item) {\r\n      this.show = false\r\n      this.typeItem = item\r\n      this.getprojectDetailInfo()\r\n    },\r\n    getprojectDetailInfo() {\r\n      this.fieldValue = ''\r\n      this.cascaderValue = ''\r\n      this.options = this.typeItem.child\r\n    },\r\n    onChange({ selectedOptions }) {\r\n      this.fieldValue = selectedOptions.map(option => option.name).join('/')\r\n      let last = selectedOptions[selectedOptions.length - 1]\r\n      if (last.conponetcode) {\r\n        this.currentComponent = last\r\n        this.onLoad()\r\n      }\r\n      if (!last.child || last.child.length === 0) {\r\n        return (this.showLocationSelect = false)\r\n      }\r\n    },\r\n    onLoad() {\r\n      this.currentComponent &&\r\n        getCheckDataByConponentId({ id: this.currentComponent.id }).then(data => {\r\n          this.list = data.check\r\n          this.checkData = data.data\r\n          this.refreshing = false\r\n          this.finished = true\r\n        })\r\n    },\r\n    previewPic(item) {\r\n      this.$refs['pdfPreview'].showPic(item.recordid)\r\n    },\r\n    previewPdf(item) {\r\n      this.$refs['pdfPreview'].show(item.recordid)\r\n    },\r\n    itemClick(item, index) {\r\n      let obj = null\r\n      if (index !== 0) {\r\n        obj = this.list[index - 1]\r\n      }\r\n      let { status } = item\r\n\r\n      if (obj && obj.status !== 1) {\r\n        this.$notify({\r\n          message: '请填报上个工序或联系监理审核上个工序',\r\n          type: 'warning'\r\n        })\r\n        return\r\n      }\r\n\r\n      if (status === 0) {\r\n        this.onComponentSelect(item, this.checkData)\r\n      } else if (status === 1) {\r\n        //状态为1，工序审核已完成\r\n        this.$notify({\r\n          message: '工序已审核完成，请填报下一道工序',\r\n          type: 'warning'\r\n        })\r\n      } else if(status === 2){\r\n        this.onComponentSelect(item, this.checkData,true)\r\n      } else if(status === 3){\r\n        this.$notify({\r\n          message: '请联系监理审核',\r\n          type: 'warning'\r\n        })\r\n      }\r\n    },\r\n    // itemClick(item, index) {\r\n    //   let obj = null\r\n    //   if (index !== 0) {\r\n    //     obj = this.list[index - 1]\r\n    //   }\r\n    //   //0 没填报 3已填报待审核 1已确认 2审核未通过\r\n    //   let { status } = item\r\n\r\n    //   if (status === 3) {\r\n    //     this.$notify({\r\n    //       message: '请联系监理审核',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   } else if (status === 2) {\r\n    //     this.$notify({\r\n    //       message: '审核未通过，请联系监理',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   }\r\n    //   if (obj && obj.status !== 1) {\r\n    //     this.$notify({\r\n    //       message: '请填报上个工序或联系监理审核上个工序',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return\r\n    //   }\r\n\r\n    //   //0 没填报 3已填报待审核 1已确认 2审核未通过\r\n    //   if (item.status === 0) {\r\n    //     this.onComponentSelect(item, this.checkData)\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.component-select {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  .condition {\r\n    margin-top: 5px;\r\n  }\r\n  .van-field__control {\r\n    text-align: right !important;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}