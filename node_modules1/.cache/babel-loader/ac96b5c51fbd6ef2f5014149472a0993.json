{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\common\\Upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\components\\common\\Upload.vue","mtime":1684246187881},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJFOi9Xb3Jrc3BhY2UvSmlhbkd1YW4vamlhbmd1YW5fbW9iaWxlL21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInZhbnQvZXMvaW1hZ2UtcHJldmlldy9zdHlsZSI7CmltcG9ydCBfSW1hZ2VQcmV2aWV3IGZyb20gInZhbnQvZXMvaW1hZ2UtcHJldmlldyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgeyB1cGxvYWRGaWxlIH0gZnJvbSAnQC9hcGkvcHJvamVjdC5qcyc7CmltcG9ydCB7IGxvb2tVcmwgfSBmcm9tICdAL3V0aWxzL2luZGV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQubmFtZSwgX0ltYWdlUHJldmlldy5Db21wb25lbnQpLAogIHByb3BzOiB7CiAgICBkaXlCdXR0b246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIGFjY2VwdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdpbWFnZS8qJwogICAgfSwKICAgIG1heENvdW50OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogOQogICAgfSwKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgZmlsZUxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICBydWxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGVkaXRhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93RmlsZU5hbWU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiB0aGlzLmZpbGVMaXN0LAogICAgICBsb29rVXJsOiBsb29rVXJsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGFmdGVyUmVhZFVybDogZnVuY3Rpb24gYWZ0ZXJSZWFkVXJsKGZpbGUpIHsKICAgICAgLy8gbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgLy8gZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZS5maWxlKQogICAgICAvLyB1cGxvYWRGaWxlKGZvcm1EYXRhKS50aGVuKHVybCA9PiB7CiAgICAgIC8vICAgZmlsZS51cmwgPSB1cmwKICAgICAgLy8gfSkKICAgICAgLy8gVG9hc3QubG9hZGluZyh7CiAgICAgIC8vICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgIC8vICAgZm9yYmlkQ2xpY2s6IHRydWUKICAgICAgLy8gfSkKICAgICAgZmlsZS5zdGF0dXMgPSAndXBsb2FkaW5nJzsKICAgICAgZmlsZS5tZXNzYWdlID0gJ+S4iuS8oOS4rS4uLic7CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlLmZpbGUpOwogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgYmFzZTY0ID0gZS50YXJnZXRbJ3Jlc3VsdCddLnNwbGl0KCdiYXNlNjQsJylbMV07CiAgICAgICAgdXBsb2FkRmlsZSh7CiAgICAgICAgICBuYW1lOiBmaWxlLmZpbGUubmFtZSwKICAgICAgICAgIGJhc2U2NDogYmFzZTY0CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICBmaWxlLnVybCA9IHVybDsKICAgICAgICAgIC8vIFRvYXN0LmNsZWFyKCkKICAgICAgICAgIGZpbGUuc3RhdHVzID0gJ2RvbmUnOwogICAgICAgICAgZmlsZS5tZXNzYWdlID0gJ+S4iuS8oOaIkOWKnyc7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9LAogICAgY2xpY2tQcmV2aWV3OiBmdW5jdGlvbiBjbGlja1ByZXZpZXcoZmlsZSkgewogICAgICB2YXIgdXJsID0gdGhpcy5sb29rVXJsKGZpbGUudXJsKTsKICAgICAgX0ltYWdlUHJldmlldyh7CiAgICAgICAgaW1hZ2VzOiBbdXJsXSwKICAgICAgICBjbG9zZWFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["uploadFile","lookUrl","components","_defineProperty","_ImagePreview","Component","name","props","diyButton","type","String","default","accept","maxCount","Number","label","fileList","Array","rules","editable","Boolean","showFileName","data","list","methods","validator","afterReadUrl","file","status","message","reader","FileReader","readAsDataURL","onload","e","base64","target","split","then","url","clickPreview","images","closeable"],"sources":["src/components/common/Upload.vue"],"sourcesContent":["<template>\r\n  <van-field :label=\"label\" :name=\"name\" :rules=\"rules\">\r\n    <template #input>\r\n      <van-uploader\r\n        :preview-full-image=\"false\"\r\n        @click-preview=\"clickPreview\"\r\n        :max-count=\"maxCount\"\r\n        :accept=\"accept\"\r\n        v-model=\"list\"\r\n        :deletable=\"editable\"\r\n        :after-read=\"afterReadUrl\"\r\n        :class=\"editable ? '' : 'no-select'\"\r\n      >\r\n        <van-button v-if=\"diyButton\" icon=\"plus\" type=\"primary\">{{ diyButton }}</van-button>\r\n        <template #preview-cover=\"{ file }\" v-if=\"showFileName\">\r\n            <div class=\"preview-cover van-ellipsis\">{{ file.name }}</div>\r\n          </template>\r\n      </van-uploader>\r\n    </template>\r\n  </van-field>\r\n</template>\r\n<script>\r\nimport { Toast } from 'vant'\r\nimport { uploadFile } from '@/api/project.js'\r\nimport { ImagePreview } from 'vant'\r\nimport { lookUrl } from '@/utils/index'\r\nexport default {\r\n  components: {\r\n    [ImagePreview.Component.name]: ImagePreview.Component\r\n  },\r\n  props: {\r\n    diyButton: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    accept: {\r\n      type: String,\r\n      default: 'image/*'\r\n    },\r\n    maxCount: {\r\n      type: Number,\r\n      default: 9\r\n    },\r\n    label: {\r\n      type: String\r\n    },\r\n    name: {\r\n      type: String\r\n    },\r\n    fileList: {\r\n      type: Array\r\n    },\r\n    rules: {\r\n      type: Array,\r\n      default: null\r\n    },\r\n    editable: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    showFileName:{\r\n      type:Boolean,\r\n      default:false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: this.fileList,\r\n      lookUrl\r\n    }\r\n  },\r\n  methods: {\r\n    validator() {\r\n      return true\r\n    },\r\n    afterReadUrl(file) {\r\n      // let formData = new FormData()\r\n      // formData.append('file', file.file)\r\n      // uploadFile(formData).then(url => {\r\n      //   file.url = url\r\n      // })\r\n      // Toast.loading({\r\n      //   message: '加载中...',\r\n      //   forbidClick: true\r\n      // })\r\n      file.status = 'uploading'\r\n      file.message = '上传中...'\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(file.file)\r\n      reader.onload = e => {\r\n        let base64 = e.target['result'].split('base64,')[1]\r\n        uploadFile({ name: file.file.name, base64: base64 }).then(url => {\r\n          file.url = url\r\n          // Toast.clear()\r\n          file.status = 'done'\r\n          file.message = '上传成功'\r\n        })\r\n      }\r\n    },\r\n    clickPreview(file) {\r\n      let url = this.lookUrl(file.url)\r\n      ImagePreview({\r\n        images: [url],\r\n        closeable: true\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.no-select {\r\n  .van-uploader__upload {\r\n    display: none !important;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;;;AAuBA,SAAAA,UAAA;AAEA,SAAAC,OAAA;AACA;EACAC,UAAA,EAAAC,eAAA,KACAC,aAAA,CAAAC,SAAA,CAAAC,IAAA,EAAAF,aAAA,CAAAC,SAAA,CACA;EACAE,KAAA;IACAC,SAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,MAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAE,QAAA;MACAJ,IAAA,EAAAK,MAAA;MACAH,OAAA;IACA;IACAI,KAAA;MACAN,IAAA,EAAAC;IACA;IACAJ,IAAA;MACAG,IAAA,EAAAC;IACA;IACAM,QAAA;MACAP,IAAA,EAAAQ;IACA;IACAC,KAAA;MACAT,IAAA,EAAAQ,KAAA;MACAN,OAAA;IACA;IACAQ,QAAA;MACAV,IAAA,EAAAW,OAAA;MACAT,OAAA;IACA;IACAU,YAAA;MACAZ,IAAA,EAAAW,OAAA;MACAT,OAAA;IACA;EACA;EACAW,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA,OAAAP,QAAA;MACAf,OAAA,EAAAA;IACA;EACA;EACAuB,OAAA;IACAC,SAAA,WAAAA,UAAA;MACA;IACA;IACAC,YAAA,WAAAA,aAAAC,IAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAA,IAAA,CAAAC,MAAA;MACAD,IAAA,CAAAE,OAAA;MACA,IAAAC,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,aAAA,CAAAL,IAAA,CAAAA,IAAA;MACAG,MAAA,CAAAG,MAAA,aAAAC,CAAA;QACA,IAAAC,MAAA,GAAAD,CAAA,CAAAE,MAAA,WAAAC,KAAA;QACArC,UAAA;UAAAM,IAAA,EAAAqB,IAAA,CAAAA,IAAA,CAAArB,IAAA;UAAA6B,MAAA,EAAAA;QAAA,GAAAG,IAAA,WAAAC,GAAA;UACAZ,IAAA,CAAAY,GAAA,GAAAA,GAAA;UACA;UACAZ,IAAA,CAAAC,MAAA;UACAD,IAAA,CAAAE,OAAA;QACA;MACA;IACA;IACAW,YAAA,WAAAA,aAAAb,IAAA;MACA,IAAAY,GAAA,QAAAtC,OAAA,CAAA0B,IAAA,CAAAY,GAAA;MACAnC,aAAA;QACAqC,MAAA,GAAAF,GAAA;QACAG,SAAA;MACA;IACA;EACA;AACA"}]}