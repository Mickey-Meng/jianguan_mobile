{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\quality\\produceRecord.vue","mtime":1684246188044},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgeyBnZXRBbGxSZXZlcnNlIH0gZnJvbSAnQC9hcGkvcHJvamVjdC5qcyc7CmltcG9ydCB7IGZvcm1hdElTTzg2MDFUaW1lIH0gZnJvbSAnQC91dGlscy9pbmRleCc7CmltcG9ydCBQZGZQcmV2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9QZGZQcmV2aWV3JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFBkZlByZXZpZXc6IFBkZlByZXZpZXcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgbGlzdFRlbXA6IFtdLAogICAgICByZWZyZXNoaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBmb3JtYXRJU084NjAxVGltZTogZm9ybWF0SVNPODYwMVRpbWUsCiAgICAgIHNjcm9sbGVySGVpZ2h0OiAnJywKICAgICAgcXVlcnlJdGVtOiB7fSwKICAgICAgY29ucG9uZW50bmFtZTogJycsCiAgICAgIHByb2R1Y2VuYW1lOiAnJywKICAgICAgc2hvd1N0YXR1c1NlbGVjdDogZmFsc2UsCiAgICAgIHN0YXR1c0FjdGlvbnM6IFt7CiAgICAgICAgbmFtZTogJ+aJgOaciScsCiAgICAgICAgc3RhdHVzOiAtMQogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ+acquWhq+aKpScsCiAgICAgICAgc3RhdHVzOiAwCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAn5b6F5a6h5qC4JywKICAgICAgICBzdGF0dXM6IDMKICAgICAgfSwgewogICAgICAgIG5hbWU6ICflt7LpgJrov4cnLAogICAgICAgIHN0YXR1czogMQogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ+W3sumps+WbnicsCiAgICAgICAgc3RhdHVzOiAyCiAgICAgIH1dCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbnBvbmVudG5hbWU6IGZ1bmN0aW9uIGNvbnBvbmVudG5hbWUoKSB7CiAgICAgIHRoaXMub25TdGF0dXNTZWxlY3QodGhpcy5xdWVyeUl0ZW0pOwogICAgfSwKICAgIHByb2R1Y2VuYW1lOiBmdW5jdGlvbiBwcm9kdWNlbmFtZSgpIHsKICAgICAgdGhpcy5vblN0YXR1c1NlbGVjdCh0aGlzLnF1ZXJ5SXRlbSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGxlckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIDEwMCAtIHRoaXMuJHJlZnNbJ3F1ZXJ5R3JvdXAnXS5vZmZzZXRIZWlnaHQgKyAncHgnOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIG9uU3RhdHVzU2VsZWN0OiBmdW5jdGlvbiBvblN0YXR1c1NlbGVjdChpdGVtKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5zaG93U3RhdHVzU2VsZWN0ID0gZmFsc2U7CiAgICAgIHRoaXMucXVlcnlJdGVtID0gaXRlbTsKICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAtMSAmJiB0aGF0LmNvbnBvbmVudG5hbWUgPT09ICcnICYmIHRoYXQucHJvZHVjZW5hbWUgPT09ICcnKSB7CiAgICAgICAgdGhpcy5saXN0VGVtcCA9IHRoaXMubGlzdDsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgdGhpcy5saXN0LmZvckVhY2goZnVuY3Rpb24gKF9pdGVtKSB7CiAgICAgICAgX2l0ZW0uY29ucG9uZW50bmFtZSA9IF9pdGVtLmNvbnBvbmVudG5hbWUgfHwgJyc7CiAgICAgICAgaWYgKChfaXRlbS5jaGVja3Jlc3VsdCA9PT0gaXRlbS5zdGF0dXMgfHwgaXRlbS5zdGF0dXMgPT09IC0xKSAmJiBfaXRlbS5jb25wb25lbnRuYW1lLmluZGV4T2YodGhhdC5jb25wb25lbnRuYW1lKSAhPT0gLTEgJiYgX2l0ZW0ucHJvZHVjZW5hbWUuaW5kZXhPZih0aGF0LnByb2R1Y2VuYW1lKSAhPT0gLTEpIHsKICAgICAgICAgIHRlbXAucHVzaChfaXRlbSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5saXN0VGVtcCA9IHRlbXA7CiAgICB9LAogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IHt9OwogICAgICBnZXRBbGxSZXZlcnNlKHBhcmFtcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoYXQubGlzdCA9IGRhdGE7CiAgICAgICAgdGhhdC5saXN0VGVtcCA9IHRoYXQubGlzdDsKICAgICAgICB0aGF0LnJlZnJlc2hpbmcgPSBmYWxzZTsKICAgICAgICB0aGF0LmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICB0aGF0Lm9uU3RhdHVzU2VsZWN0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMuc3RhdHVzQWN0aW9uc1swXSkpKTsKICAgICAgfSk7CiAgICB9LAogICAgcHJldmlld1BpYzogZnVuY3Rpb24gcHJldmlld1BpYyhpdGVtLCBmaWVsZCkgewogICAgICB0aGlzLiRyZWZzWydwZGZQcmV2aWV3J10uc2hvd1BpYyhpdGVtLnJlY29kZWlkLCBmaWVsZCk7CiAgICB9LAogICAgcHJldmlld1BkZjogZnVuY3Rpb24gcHJldmlld1BkZihpdGVtLCBmaWVsZCkgewogICAgICB0aGlzLiRyZWZzWydwZGZQcmV2aWV3J10uc2hvdyhpdGVtLnJlY29kZWlkLCBmaWVsZCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getAllReverse","formatISO8601Time","PdfPreview","components","data","list","listTemp","refreshing","finished","scrollerHeight","queryItem","conponentname","producename","showStatusSelect","statusActions","name","status","watch","onStatusSelect","mounted","window","innerHeight","$refs","offsetHeight","created","methods","item","that","temp","forEach","_item","checkresult","indexOf","push","onLoad","_this","params","then","JSON","parse","stringify","previewPic","field","showPic","recodeid","previewPdf","show"],"sources":["src/views/project/quality/produceRecord.vue"],"sourcesContent":["<template>\r\n  <div class=\"report-record\">\r\n    <van-cell-group inset class=\"common-card\" style=\"margin-bottom: 0\" ref=\"queryGroup\">\r\n      <van-field\r\n        label=\"状态\"\r\n        v-model=\"queryItem.name\"\r\n        is-link\r\n        readonly\r\n        placeholder=\"请选择状态\"\r\n        @click=\"showStatusSelect = true\"\r\n      />\r\n      <van-field\r\n        label=\"构件名称\"\r\n        v-model=\"conponentname\"\r\n        placeholder=\"请输入构件名称\"\r\n        clearable\r\n      />\r\n      <van-field\r\n        label=\"工序名称\"\r\n        v-model=\"producename\"\r\n        placeholder=\"请输入工序名称\"\r\n        clearable\r\n      />\r\n    </van-cell-group>\r\n    <van-list\r\n      :finished=\"finished\"\r\n      finished-text=\"我也是有底线的~~\"\r\n      @load=\"onLoad\"\r\n      class=\"common-list common-card\"\r\n      :style=\"{ height: scrollerHeight }\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in listTemp\"\r\n        :key=\"index\"\r\n        :class=\"'item ' + (index === listTemp.length - 1 ? 'last' : '')\"\r\n      >\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件编码：</span>\r\n          <span class=\"value\">{{ item.conponentcode }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">构件名称：</span>\r\n          <span class=\"value\">{{ item.conponentname }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">工序名称：</span>\r\n          <span class=\"value\">{{ item.producename }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">审核人：</span>\r\n          <span class=\"value\">{{ item.checkusername }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <span class=\"name\">填报人：</span>\r\n          <span class=\"value\">{{ item.updateusername }}</span>\r\n        </div>\r\n        <div v-if=\"item.updatetime\" class=\"content\">\r\n          <span class=\"name\">系统录入：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.updatetime) }}</span>\r\n        </div>\r\n        <div v-if=\"item.stime\" class=\"content\">\r\n          <span class=\"name\">工序填报：</span>\r\n          <span class=\"value\">{{ formatISO8601Time(item.stime) }}</span>\r\n        </div>\r\n        <div class=\"content\" style=\"text-align: center;\">\r\n          <van-button class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPic(item)\">举牌照片</van-button>\r\n          <van-button style=\"margin-left:10px\" class=\"button\" type=\"primary\" size=\"small\" @click.stop=\"previewPdf(item)\"\r\n            >PDF</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPic(item, 'testurl')\"\r\n            >审核照片</van-button\r\n          >\r\n          <van-button\r\n            style=\"margin-left:10px\"\r\n            class=\"button\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click.stop=\"previewPdf(item, 'standbyrecode')\"\r\n            >审核PDF</van-button\r\n          >\r\n        </div>\r\n        <div class=\"operate center-in-vertical\">\r\n          <img v-if=\"item.checkresult === 3\" :src=\"require(`assets/image/待审核.png`)\" />\r\n          <img v-if=\"item.checkresult === 1\" :src=\"require(`assets/image/已通过.png`)\" />\r\n          <img v-if=\"item.checkresult === 2\" :src=\"require(`assets/image/已驳回.png`)\" />\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n    <van-action-sheet v-model=\"showStatusSelect\" :actions=\"statusActions\" @select=\"onStatusSelect\" />\r\n    <PdfPreview ref=\"pdfPreview\"></PdfPreview>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getAllReverse } from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport PdfPreview from '@/components/PdfPreview'\r\nexport default {\r\n  components: {\r\n    PdfPreview\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      listTemp: [],\r\n      refreshing: false,\r\n      finished: false,\r\n      formatISO8601Time,\r\n      scrollerHeight: '',\r\n      queryItem: {},\r\n      conponentname: '',\r\n      producename: '',\r\n      showStatusSelect: false,\r\n      statusActions: [{name:'所有',status: -1},{name:'未填报',status: 0},{name:'待审核',status: 3},{name:'已通过',status: 1},{name:'已驳回',status: 2}]\r\n    }\r\n  },\r\n  watch: {\r\n    conponentname: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n    producename: function(){\r\n      this.onStatusSelect(this.queryItem)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.scrollerHeight = window.innerHeight - 100 - this.$refs['queryGroup'].offsetHeight + 'px'\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    onStatusSelect(item) {\r\n      let that = this\r\n      this.showStatusSelect = false\r\n      this.queryItem = item\r\n      if (item.status === -1 && that.conponentname === '' && that.producename === '') {\r\n        this.listTemp = this.list\r\n        return\r\n      }\r\n      let temp = []\r\n      this.list.forEach(_item => {\r\n        _item.conponentname = _item.conponentname || ''\r\n        if ((_item.checkresult === item.status || item.status === -1) &&\r\n        _item.conponentname.indexOf(that.conponentname) !== -1 &&\r\n        _item.producename.indexOf(that.producename) !== -1) {\r\n          temp.push(_item)\r\n        }\r\n      })\r\n      this.listTemp = temp\r\n    },\r\n    onLoad() {\r\n      let that = this\r\n      let params = {}\r\n      getAllReverse(params).then(data => {\r\n        that.list = data\r\n        that.listTemp = that.list\r\n        that.refreshing = false\r\n        that.finished = true\r\n        that.onStatusSelect(JSON.parse(JSON.stringify(this.statusActions[0])))\r\n      })\r\n    },\r\n    previewPic(item, field) {\r\n      this.$refs['pdfPreview'].showPic(item.recodeid, field)\r\n    },\r\n    previewPdf(item, field) {\r\n      this.$refs['pdfPreview'].show(item.recodeid, field)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.report-record {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n"],"mappings":";;;;AAkGA,SAAAA,aAAA;AACA,SAAAC,iBAAA;AACA,OAAAC,UAAA;AACA;EACAC,UAAA;IACAD,UAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,QAAA;MACAC,UAAA;MACAC,QAAA;MACAP,iBAAA,EAAAA,iBAAA;MACAQ,cAAA;MACAC,SAAA;MACAC,aAAA;MACAC,WAAA;MACAC,gBAAA;MACAC,aAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA;QAAAD,IAAA;QAAAC,MAAA;MAAA;QAAAD,IAAA;QAAAC,MAAA;MAAA;QAAAD,IAAA;QAAAC,MAAA;MAAA;QAAAD,IAAA;QAAAC,MAAA;MAAA;IACA;EACA;EACAC,KAAA;IACAN,aAAA,WAAAA,cAAA;MACA,KAAAO,cAAA,MAAAR,SAAA;IACA;IACAE,WAAA,WAAAA,YAAA;MACA,KAAAM,cAAA,MAAAR,SAAA;IACA;EACA;EACAS,OAAA,WAAAA,QAAA;IACA,KAAAV,cAAA,GAAAW,MAAA,CAAAC,WAAA,cAAAC,KAAA,eAAAC,YAAA;EACA;EACAC,OAAA,WAAAA,QAAA,GACA;EACAC,OAAA;IACAP,cAAA,WAAAA,eAAAQ,IAAA;MACA,IAAAC,IAAA;MACA,KAAAd,gBAAA;MACA,KAAAH,SAAA,GAAAgB,IAAA;MACA,IAAAA,IAAA,CAAAV,MAAA,WAAAW,IAAA,CAAAhB,aAAA,WAAAgB,IAAA,CAAAf,WAAA;QACA,KAAAN,QAAA,QAAAD,IAAA;QACA;MACA;MACA,IAAAuB,IAAA;MACA,KAAAvB,IAAA,CAAAwB,OAAA,WAAAC,KAAA;QACAA,KAAA,CAAAnB,aAAA,GAAAmB,KAAA,CAAAnB,aAAA;QACA,KAAAmB,KAAA,CAAAC,WAAA,KAAAL,IAAA,CAAAV,MAAA,IAAAU,IAAA,CAAAV,MAAA,YACAc,KAAA,CAAAnB,aAAA,CAAAqB,OAAA,CAAAL,IAAA,CAAAhB,aAAA,YACAmB,KAAA,CAAAlB,WAAA,CAAAoB,OAAA,CAAAL,IAAA,CAAAf,WAAA;UACAgB,IAAA,CAAAK,IAAA,CAAAH,KAAA;QACA;MACA;MACA,KAAAxB,QAAA,GAAAsB,IAAA;IACA;IACAM,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,IAAAR,IAAA;MACA,IAAAS,MAAA;MACApC,aAAA,CAAAoC,MAAA,EAAAC,IAAA,WAAAjC,IAAA;QACAuB,IAAA,CAAAtB,IAAA,GAAAD,IAAA;QACAuB,IAAA,CAAArB,QAAA,GAAAqB,IAAA,CAAAtB,IAAA;QACAsB,IAAA,CAAApB,UAAA;QACAoB,IAAA,CAAAnB,QAAA;QACAmB,IAAA,CAAAT,cAAA,CAAAoB,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,SAAA,CAAAL,KAAA,CAAArB,aAAA;MACA;IACA;IACA2B,UAAA,WAAAA,WAAAf,IAAA,EAAAgB,KAAA;MACA,KAAApB,KAAA,eAAAqB,OAAA,CAAAjB,IAAA,CAAAkB,QAAA,EAAAF,KAAA;IACA;IACAG,UAAA,WAAAA,WAAAnB,IAAA,EAAAgB,KAAA;MACA,KAAApB,KAAA,eAAAwB,IAAA,CAAApB,IAAA,CAAAkB,QAAA,EAAAF,KAAA;IACA;EACA;AACA"}]}