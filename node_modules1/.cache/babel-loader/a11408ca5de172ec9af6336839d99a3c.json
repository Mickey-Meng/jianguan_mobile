{"remainingRequest":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\security\\report.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\src\\views\\project\\security\\report.vue","mtime":1684246188049},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\babel.config.js","mtime":1684246187306},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1684411446344},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684411445150},{"path":"E:\\Workspace\\JianGuan\\jianguan_mobile\\mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1684411444634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovV29ya3NwYWNlL0ppYW5HdWFuL2ppYW5ndWFuX21vYmlsZS9tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwudG8tanNvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCBVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9VcGxvYWQnOwppbXBvcnQgU2VsZWN0ZXIgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9TZWxlY3Rlcic7CmltcG9ydCB7IGdldFNhZmVUcmVlLCBnZXRTYWZlQ2hlY2ssIHVwbG9hZFNhZmVEYXRhLCBnZXRHb25nUXVOZXcsIGdldEdvbmdRdVByb2plY3QsIGdldERlbGF5U2FmZUV2ZW50LCBkb0RlbGF5U2FmZUV2ZW50IH0gZnJvbSAnQC9hcGkvcHJvamVjdC5qcyc7CmltcG9ydCB7IGZvcm1hdElTTzg2MDFUaW1lIH0gZnJvbSAnQC91dGlscy9pbmRleCc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFVwbG9hZDogVXBsb2FkLAogICAgU2VsZWN0ZXI6IFNlbGVjdGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdERhdGE6IHsKICAgICAgICBzYWZlZmlyc3RuYW1lOiAnJywKICAgICAgICBzYWZlc2Vjb25kbmFtZTogJycsCiAgICAgICAgbW9kaWZ5bmFtZTogJycsCiAgICAgICAgbW9kaWZ5ZGF0ZTogMwogICAgICB9LAogICAgICBmaXJzdEFjdGlvbnM6IFtdLAogICAgICBzZWNvbmRBY3Rpb25zOiBbXSwKICAgICAgY2hlY2tBY3Rpb25zOiBbXSwKICAgICAgc2hvd0ZpcnN0OiBmYWxzZSwKICAgICAgc2hvd1NlY29uZDogZmFsc2UsCiAgICAgIHVybExpc3Q6IFtdLAogICAgICBzaG93UGlja2VyOiBmYWxzZSwKICAgICAgZm9ybWF0SVNPODYwMVRpbWU6IGZvcm1hdElTTzg2MDFUaW1lLAogICAgICBnb25nUXVBY3Rpb25zOiBbXSwKICAgICAgc2hvd0dvbmdRdTogZmFsc2UsCiAgICAgIHByb2plY3RBY3Rpb25zOiBbXSwKICAgICAgc2hvd1Byb2plY3Q6IGZhbHNlLAogICAgICBjdXJyZW50RGF0ZTogbmV3IERhdGUoKSwKICAgICAgbGlzdDogW10sCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHNob3c6IGZhbHNlLAogICAgICBkZWxheUl0ZW06IHsKICAgICAgICByZWFzb246ICcnCiAgICAgIH0sCiAgICAgIHRpdGxlOiAn6YCa6L+HJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHsKICAgIHNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbiBzY3JvbGxlckhlaWdodCgpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDE0NiArICdweCc7CiAgICB9CiAgfSwgbWFwR2V0dGVycyhbJ2N1cnJlbnRCaWFvRHVhbiddKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIHVzZXJJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmluZm8nKSk7CiAgICB0aGlzLmVkaXREYXRhLnVwbG9hZGlkID0gdXNlckluZm8uaWQ7CiAgICB0aGlzLmVkaXREYXRhLnVwbG9hZG5hbWUgPSB1c2VySW5mby5uYW1lOwogICAgdGhpcy5yZXF1ZXN0Rmlyc3QoKTsKICAgIGdldEdvbmdRdU5ldyh0aGlzLiRzdG9yZS5zdGF0ZS5jdXJQcm9qZWN0LmNoaWxkWzBdLmlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzLmdvbmdRdUFjdGlvbnMgPSBkYXRhOwogICAgICBkYXRhICYmIGRhdGEubGVuZ3RoICE9PSAwICYmIF90aGlzLm9uU2VsZWN0R29uZ3F1KGRhdGFbMF0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNlbGVjdEZpcnN0OiBmdW5jdGlvbiBvblNlbGVjdEZpcnN0KGl0ZW0pIHsKICAgICAgdGhpcy5zaG93Rmlyc3QgPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0RGF0YS5zYWZlZmlyc3RuYW1lID0gaXRlbS5uYW1lOwogICAgICB0aGlzLmVkaXREYXRhLnNhZmVmaXJzdCA9IGl0ZW0uaWQ7CiAgICAgIHRoaXMucmVxdWVzdFNlY29uZChpdGVtLmlkKTsKICAgIH0sCiAgICBvblNlbGVjdFNlY29uZDogZnVuY3Rpb24gb25TZWxlY3RTZWNvbmQoaXRlbSkgewogICAgICB0aGlzLnNob3dTZWNvbmQgPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0RGF0YS5zYWZlc2Vjb25kbmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgdGhpcy5lZGl0RGF0YS5zYWZlc2Vjb25kID0gaXRlbS5pZDsKICAgIH0sCiAgICBvblNlbGVjdENoZWNrOiBmdW5jdGlvbiBvblNlbGVjdENoZWNrKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0RGF0YS5tb2RpZnluYW1lID0gaXRlbS5uYW1lOwogICAgICB0aGlzLmVkaXREYXRhLm1vZGlmeWlkID0gaXRlbS5pZDsKICAgIH0sCiAgICBvblNlbGVjdEdvbmdxdTogZnVuY3Rpb24gb25TZWxlY3RHb25ncXUoaXRlbSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5zaG93R29uZ1F1ID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdERhdGEuZ29uZ3F1TmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgdGhpcy5lZGl0RGF0YS5nb25ncXVpZCA9IGl0ZW0uc29ydDsKICAgICAgZ2V0R29uZ1F1UHJvamVjdCh7CiAgICAgICAgaWQ6IGl0ZW0uc29ydAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLnByb2plY3RBY3Rpb25zID0gZGF0YTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVxdWVzdENoZWNrZXIoKTsKICAgIH0sCiAgICBvblNlbGVjdFByb2plY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0UHJvamVjdChpdGVtKSB7CiAgICAgIHRoaXMuc2hvd1Byb2plY3QgPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0RGF0YS5wcm9qZWN0TmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgdGhpcy5lZGl0RGF0YS5zaW5nbGVQcm9qZWN0SWQgPSBpdGVtLmlkOwogICAgfSwKICAgIG9uQ29uZmlybTogZnVuY3Rpb24gb25Db25maXJtKHRpbWUpIHsKICAgICAgdGhpcy5zaG93UGlja2VyID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdERhdGEudXBsb2FkdGltZSA9IHRoaXMuZm9ybWF0SVNPODYwMVRpbWUobmV3IERhdGUodGltZSkudG9KU09OKCkpOwogICAgfSwKICAgIHJlcXVlc3RDaGVja2VyOiBmdW5jdGlvbiByZXF1ZXN0Q2hlY2tlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgZ2V0U2FmZUNoZWNrKHsKICAgICAgICBncm91cDogdGhpcy5lZGl0RGF0YS5nb25ncXVpZCwKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRCaWFvRHVhbi5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdGhhdC5jaGVja0FjdGlvbnMgPSBkYXRhOwogICAgICAgIF90aGlzMy5vblNlbGVjdENoZWNrKHRoYXQuY2hlY2tBY3Rpb25zWzBdKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVxdWVzdEZpcnN0OiBmdW5jdGlvbiByZXF1ZXN0Rmlyc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGdldFNhZmVUcmVlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoYXQuZmlyc3RBY3Rpb25zID0gZGF0YTsKICAgICAgICBfdGhpczQub25TZWxlY3RGaXJzdChkYXRhWzBdKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVxdWVzdFNlY29uZDogZnVuY3Rpb24gcmVxdWVzdFNlY29uZChpZCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGdldFNhZmVUcmVlKHsKICAgICAgICBpZDogaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoYXQuc2Vjb25kQWN0aW9ucyA9IGRhdGE7CiAgICAgICAgdGhhdC5lZGl0RGF0YS5zYWZlc2Vjb25kbmFtZSA9IGRhdGFbMF0ubmFtZTsKICAgICAgICB0aGF0LmVkaXREYXRhLnNhZmVzZWNvbmQgPSBkYXRhWzBdLmlkOwogICAgICB9KTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0RGF0YSkpOwogICAgICBkYXRhLm1vZGlmeWRhdGUgPSBwYXJzZUludChkYXRhLm1vZGlmeWRhdGUpOwogICAgICBkYXRhLnByb2plY3RJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRCaWFvRHVhbi5pZDsKICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgdmFsdWVzLnVwbG9hZHVybC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS51cmwgJiYgdGVtcC5wdXNoKGl0ZW0udXJsKTsKICAgICAgfSk7CiAgICAgIGlmICh2YWx1ZXMudXBsb2FkdXJsLmxlbmd0aCAhPT0gdGVtcC5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fkuIrkvKDmlofku7bmiJbnrYnlvoXmlofku7bkuIrkvKDlrozmiJDvvIEnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZGF0YS51cGxvYWR1cmwgPSB0ZW1wLmpvaW4oJywnKTsKICAgICAgdXBsb2FkU2FmZURhdGEoZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LiRub3RpZnkoewogICAgICAgICAgbWVzc2FnZTogJ+aPkOS6pOaIkOWKn++8gScsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgICBfdGhpczUuJHJvdXRlci5nbygtMSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBnZXREZWxheVNhZmVFdmVudCh7CiAgICAgICAgJ3Byb2plY3RJZCc6IHRoaXMuY3VycmVudEJpYW9EdWFuLmlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB0aGF0Lmxpc3QgPSBkYXRhIHx8IFtdOwogICAgICAgIHRoYXQucmVmcmVzaGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzNi5maW5pc2hlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIGl0ZW1DbGljazogZnVuY3Rpb24gaXRlbUNsaWNrKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzZWN1cml0eURldGFpbCcsCiAgICAgICAgcGFyYW1zOiBpdGVtCiAgICAgIH0pOwogICAgfSwKICAgIGRvRGVsYXlTYWZlRXZlbnQ6IGZ1bmN0aW9uIGRvRGVsYXlTYWZlRXZlbnQoaXRlbSwgcmVzdWx0KSB7CiAgICAgIHRoaXMudGl0bGUgPSByZXN1bHQgPT09IDEgPyAn6YCa6L+HJyA6ICfkuI3pgJrov4cnOwogICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICB0aGlzLmRlbGF5SXRlbS5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZGVsYXlJdGVtLmV2ZW50aWQgPSBpdGVtLmlkOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGFjdGlvbiwgZG9uZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpIHsKICAgICAgICBkb25lKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9EZWxheVNhZmVFdmVudCh0aGlzLmRlbGF5SXRlbSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgX3RoaXM3LiR0b2FzdCgn5aSE55CG5oiQ5YqfJyk7CiAgICAgICAgICBfdGhpczcuJHN0b3JlLmRpc3BhdGNoKCdnZXRSZWFsdGltZU1lc3NhZ2UnKTsKICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgIF90aGlzNy5vbkxvYWQoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["Upload","Selecter","getSafeTree","getSafeCheck","uploadSafeData","getGongQuNew","getGongQuProject","getDelaySafeEvent","doDelaySafeEvent","formatISO8601Time","mapGetters","components","data","editData","safefirstname","safesecondname","modifyname","modifydate","firstActions","secondActions","checkActions","showFirst","showSecond","urlList","showPicker","gongQuActions","showGongQu","projectActions","showProject","currentDate","Date","list","finished","refreshing","show","delayItem","reason","title","computed","_objectSpread","scrollerHeight","window","innerHeight","mounted","created","_this","userInfo","JSON","parse","localStorage","getItem","uploadid","id","uploadname","name","requestFirst","$store","state","curProject","child","then","length","onSelectGongqu","methods","onSelectFirst","item","safefirst","requestSecond","onSelectSecond","safesecond","onSelectCheck","modifyid","_this2","gongquName","gongquid","sort","requestChecker","onSelectProject","projectName","singleProjectId","onConfirm","time","uploadtime","toJSON","_this3","that","group","projectId","currentBiaoDuan","_this4","onSubmit","values","_this5","stringify","parseInt","temp","uploadurl","forEach","url","push","$notify","type","message","join","$router","go","onLoad","_this6","itemClick","params","result","eventid","submit","action","done","_this7","$toast","dispatch"],"sources":["src/views/project/security/report.vue"],"sourcesContent":["<template>\r\n  <div class=\"report\">\r\n    <van-tabs>\r\n      <van-tab title=\"安全检查\">\r\n        <van-form @submit=\"onSubmit\" :v-model=\"editData\" class=\"common-card\" :style=\"{ height: scrollerHeight }\">\r\n          <van-field\r\n            readonly\r\n            clickable\r\n            :value=\"editData.safefirstname\"\r\n            label=\"问题大类\"\r\n            placeholder=\"问题大类\"\r\n            @click=\"showFirst = true\"\r\n            :rules=\"[{ required: true, message: '请选问题大类' }]\"\r\n          />\r\n          <van-field\r\n            readonly\r\n            clickable\r\n            :value=\"editData.safesecondname\"\r\n            label=\"问题小类\"\r\n            placeholder=\"问题小类\"\r\n            @click=\"showSecond = true\"\r\n            :rules=\"[{ required: true, message: '请选问题小类' }]\"\r\n          />\r\n          <van-field\r\n            v-model=\"editData.uploadtime\"\r\n            is-link\r\n            readonly\r\n            name=\"uploadtime\"\r\n            label=\"检查日期\"\r\n            placeholder=\"点击选择检查日期\"\r\n            @click=\"showPicker = true\"\r\n            :rules=\"[{ required: true, message: '请选择检查日期' }]\"\r\n          />\r\n          <van-field\r\n            type=\"textarea\"\r\n            rows=\"2\"\r\n            v-model=\"editData.uploadremark\"\r\n            name=\"uploadremark\"\r\n            label=\"问题描述\"\r\n            placeholder=\"问题描述\"\r\n          />\r\n          <upload\r\n            label=\"照片\"\r\n            name=\"uploadurl\"\r\n            :fileList=\"urlList\"\r\n            :rules=\"[{ required: true, message: '请选择照片' }]\"\r\n          ></upload>\r\n          <van-field\r\n            readonly\r\n            clickable\r\n            :value=\"editData.gongquName\"\r\n            label=\"工区\"\r\n            placeholder=\"工区\"\r\n            @click=\"showGongQu = true\"\r\n            :rules=\"[{ required: true, message: '请选工区' }]\"\r\n          />\r\n          <van-field\r\n            readonly\r\n            clickable\r\n            :value=\"editData.projectName\"\r\n            label=\"单位工程\"\r\n            placeholder=\"单位工程\"\r\n            @click=\"showProject = true\"\r\n            :rules=\"[{ required: true, message: '请选单位工程' }]\"\r\n          />\r\n          <Selecter\r\n            readonly\r\n            clickable\r\n            :value=\"editData.modifyname\"\r\n            label=\"责任人\"\r\n            placeholder=\"责任人\"\r\n            :rules=\"[{ required: true, message: '请选责任人' }]\"\r\n            :actions=\"checkActions\"\r\n            :onSelect=\"onSelectCheck\"\r\n          ></Selecter>\r\n          <van-field\r\n            type=\"digit\"\r\n            v-model=\"editData.modifydate\"\r\n            name=\"modifydate\"\r\n            label=\"整改期限\"\r\n            placeholder=\"整改期限\"\r\n            :rules=\"[{ required: true, message: '请填整改期限' }]\"\r\n          />\r\n\r\n          <div style=\"margin: 4px 16px\">\r\n            <van-button size=\"small\" round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n          </div>\r\n        </van-form>\r\n      </van-tab>\r\n      <van-tab title=\"延期审核\">\r\n        <van-list\r\n          :finished=\"finished\"\r\n          finished-text=\"我也是有底线的~~\"\r\n          @load=\"onLoad\"\r\n          class=\"common-list common-card\"\r\n          :style=\"{ height: scrollerHeight }\"\r\n        >\r\n          <div\r\n            @click=\"itemClick(item, 0)\"\r\n            v-for=\"(item, index) in list\"\r\n            :key=\"index\"\r\n            :class=\"'item ' + (index === list.length - 1 ? 'last' : '')\"\r\n          >\r\n            <div class=\"content\">\r\n              <span class=\"name\">检查时间：</span>\r\n              <span class=\"value\">{{ item.uploadtime }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">检查人：</span>\r\n              <span class=\"value\">{{ item.uploadname }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">检查备注：</span>\r\n              <span class=\"value\">{{ item.uploadremark }}</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">整改期限：</span>\r\n              <span class=\"value\">{{ item.modifydate }} 天</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">申请延期：</span>\r\n              <span class=\"value\">{{ item.delayday }} 天</span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <span class=\"name\">延期原因：</span>\r\n              <span class=\"value\">{{ item.delayreason }}</span>\r\n            </div>\r\n            <div class=\"operate center-in-vertical\">\r\n              <van-button\r\n                v-if=\"item.delayresult === 1\"\r\n                class=\"button\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                @click.stop=\"doDelaySafeEvent(item, 1)\"\r\n                >通过</van-button\r\n              >\r\n              <van-button\r\n                v-if=\"item.delayresult === 1\"\r\n                class=\"button\"\r\n                type=\"danger\"\r\n                size=\"small\"\r\n                @click.stop=\"doDelaySafeEvent(item, 2)\"\r\n                >不通过</van-button\r\n              >\r\n            </div>\r\n          </div>\r\n        </van-list>\r\n      </van-tab>\r\n    </van-tabs>\r\n\r\n    <van-action-sheet v-model=\"showFirst\" :actions=\"firstActions\" @select=\"onSelectFirst\" />\r\n    <van-action-sheet v-model=\"showSecond\" :actions=\"secondActions\" @select=\"onSelectSecond\" />\r\n    <van-action-sheet v-model=\"showGongQu\" :actions=\"gongQuActions\" @select=\"onSelectGongqu\" />\r\n    <van-action-sheet v-model=\"showProject\" :actions=\"projectActions\" @select=\"onSelectProject\" />\r\n    <van-popup v-model=\"showPicker\" position=\"bottom\">\r\n      <van-datetime-picker v-model=\"currentDate\" type=\"datetime\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n    </van-popup>\r\n\r\n    <van-dialog v-model=\"show\" :title=\"title\" show-cancel-button :beforeClose=\"submit\">\r\n      <van-form v-model=\"delayItem\">\r\n        <van-field type=\"textarea\" v-model=\"delayItem.reason\" name=\"uploadremark\" label=\"原因\" placeholder=\"原因\" />\r\n      </van-form>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Upload from '@/components/common/Upload'\r\nimport Selecter from '@/components/common/Selecter'\r\nimport {\r\n  getSafeTree,\r\n  getSafeCheck,\r\n  uploadSafeData,\r\n  getGongQuNew,\r\n  getGongQuProject,\r\n  getDelaySafeEvent,\r\n  doDelaySafeEvent\r\n} from '@/api/project.js'\r\nimport { formatISO8601Time } from '@/utils/index'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  components: {\r\n    Upload,\r\n    Selecter\r\n  },\r\n  data() {\r\n    return {\r\n      editData: {\r\n        safefirstname: '',\r\n        safesecondname: '',\r\n        modifyname: '',\r\n        modifydate: 3\r\n      },\r\n      firstActions: [],\r\n      secondActions: [],\r\n      checkActions: [],\r\n      showFirst: false,\r\n      showSecond: false,\r\n      urlList: [],\r\n      showPicker: false,\r\n      formatISO8601Time,\r\n      gongQuActions: [],\r\n      showGongQu: false,\r\n      projectActions: [],\r\n      showProject: false,\r\n      currentDate: new Date(),\r\n\r\n      list: [],\r\n      finished: false,\r\n      refreshing: false,\r\n      show: false,\r\n      delayItem: { reason: '' },\r\n      title: '通过'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    scrollerHeight: function() {\r\n      return window.innerHeight - 146 + 'px'\r\n    },\r\n    ...mapGetters(['currentBiaoDuan'])\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  created() {\r\n    let userInfo = JSON.parse(localStorage.getItem('userinfo'))\r\n    this.editData.uploadid = userInfo.id\r\n    this.editData.uploadname = userInfo.name\r\n    this.requestFirst()\r\n    getGongQuNew(this.$store.state.curProject.child[0].id).then(data => {\r\n      this.gongQuActions = data\r\n      data && data.length !== 0 && this.onSelectGongqu(data[0])\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    onSelectFirst(item) {\r\n      this.showFirst = false\r\n      this.editData.safefirstname = item.name\r\n      this.editData.safefirst = item.id\r\n      this.requestSecond(item.id)\r\n    },\r\n    onSelectSecond(item) {\r\n      this.showSecond = false\r\n      this.editData.safesecondname = item.name\r\n      this.editData.safesecond = item.id\r\n    },\r\n    onSelectCheck(item) {\r\n      this.editData.modifyname = item.name\r\n      this.editData.modifyid = item.id\r\n    },\r\n    onSelectGongqu(item) {\r\n      this.showGongQu = false\r\n      this.editData.gongquName = item.name\r\n      this.editData.gongquid = item.sort\r\n\r\n      getGongQuProject({ id: item.sort }).then(data => {\r\n        this.projectActions = data\r\n      })\r\n\r\n      this.requestChecker()\r\n    },\r\n    onSelectProject(item) {\r\n      this.showProject = false\r\n      this.editData.projectName = item.name\r\n      this.editData.singleProjectId = item.id\r\n    },\r\n    onConfirm(time) {\r\n      this.showPicker = false\r\n      this.editData.uploadtime = this.formatISO8601Time(new Date(time).toJSON())\r\n    },\r\n    requestChecker() {\r\n      let that = this\r\n      getSafeCheck({ group: this.editData.gongquid,projectId: this.$store.state.currentBiaoDuan.id }).then(data => {\r\n        that.checkActions = data\r\n        this.onSelectCheck(that.checkActions[0])\r\n      })\r\n    },\r\n    requestFirst() {\r\n      let that = this\r\n      getSafeTree().then(data => {\r\n        that.firstActions = data\r\n        this.onSelectFirst(data[0])\r\n      })\r\n    },\r\n    requestSecond(id) {\r\n      let that = this\r\n      getSafeTree({ id: id }).then(data => {\r\n        that.secondActions = data\r\n        that.editData.safesecondname = data[0].name\r\n        that.editData.safesecond = data[0].id\r\n      })\r\n    },\r\n    onSubmit(values) {\r\n      let data = JSON.parse(JSON.stringify(this.editData))\r\n      data.modifydate = parseInt(data.modifydate)\r\n      data.projectId = this.$store.state.currentBiaoDuan.id\r\n      let temp = []\r\n      values.uploadurl.forEach(item => {\r\n        item.url && temp.push(item.url)\r\n      })\r\n      if(values.uploadurl.length !== temp.length){\r\n         return this.$notify({ type: 'warning', message: '请上传文件或等待文件上传完成！' })\r\n      }\r\n      data.uploadurl = temp.join(',')\r\n      uploadSafeData(data).then(() => {\r\n        this.$notify({\r\n          message: '提交成功！',\r\n          type: 'success'\r\n        })\r\n        this.$router.go(-1)\r\n      })\r\n    },\r\n\r\n    onLoad() {\r\n      let that = this\r\n      getDelaySafeEvent({'projectId':this.currentBiaoDuan.id}).then(data => {\r\n        that.list = data || []\r\n        that.refreshing = false\r\n        this.finished = true\r\n      })\r\n    },\r\n    itemClick(item) {\r\n      this.$router.push({\r\n        name: 'securityDetail',\r\n        params: item\r\n      })\r\n    },\r\n    doDelaySafeEvent(item, result) {\r\n      this.title = result === 1 ? '通过' : '不通过'\r\n      this.show = true\r\n      this.delayItem.result = result\r\n      this.delayItem.eventid = item.id\r\n    },\r\n    submit(action, done) {\r\n      if (action === 'cancel') {\r\n        done()\r\n      } else {\r\n        doDelaySafeEvent(this.delayItem).then(data => {\r\n          this.$toast('处理成功')\r\n          this.$store.dispatch('getRealtimeMessage')\r\n          done()\r\n          this.onLoad()\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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"}]}