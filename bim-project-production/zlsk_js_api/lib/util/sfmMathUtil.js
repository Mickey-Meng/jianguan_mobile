!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n.SFM||(n.SFM={}))&&(n.SFM.mathUtil=t())}(function(){function f(t,n,r){var e=null==r||r<0?0:r;return Math.abs(t-n)<=e}function c(t,n){var r=Math.atan2(n.y,n.x)-Math.atan2(t.y,t.x);return r>Math.PI?r-2*Math.PI:r<=-Math.PI?r+2*Math.PI:r}return{fguid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)})},dilutePoints:function(t,n){if(!t)return t;if(!t||t.length<2)return t.concat();var r=[];r.push(t[0]);for(var e=0;e<t.length-1;e++){var a=t[e],x=t[e+1];f(a.x,x.x,n)&&f(a.y,x.y,n)&&f(a.z||0,x.z||0,n)||r.push(t[e+1])}return r},calcLength:function(t){if(!t||t.length<2)return 0;for(var n=0,r=0;r<t.length-1;r++){var e=t[r],a=t[r+1];n+=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))}return n},calcLengthByArray:function(t){if(!t||t.length<2)return 0;for(var n=0,r=0;r<t.length-1;r++){var e=t[r],a=t[r+1];n+=Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2))}return n},calcSignedArea:function(t){if(!t||t.length<3)return 0;for(var n=0,r=t[0],e=1;e<t.length-1;e++){var a=t[e],x=t[e+1];n+=(x.x-r.x)*(a.y-r.y)-(a.x-r.x)*(x.y-r.y)}return n/2},calcSignedAreaByArray:function(t){if(!t||t.length<3)return 0;for(var n=0,r=t[0],e=1;e<t.length-1;e++){var a=t[e],x=t[e+1];n+=(x[0]-r[0])*(a[1]-r[1])-(a[0]-r[0])*(x[1]-r[1])}return n/2},calcArea:function(t){if(!t||t.length<3)return 0;for(var n=0,r=t[0],e=1;e<t.length-1;e++){var a=t[e],x=t[e+1];n+=Math.abs((a.x-r.x)*(x.y-r.y)-(x.x-r.x)*(a.y-r.y))}return n/2},calcAreaByArray:function(t){if(!t||t.length<3)return 0;for(var n=0,r=t[0],e=1;e<t.length-1;e++){var a=t[e],x=t[e+1];n+=Math.abs((a[0]-r[0])*(x[1]-r[1])-(x[0]-r[0])*(a[1]-r[1]))}return n/2},calcVectorAngle:c,getPointPolygonRelationShip:function(t,n,r){return function(t,n,r){if(!t||!n||n.length<3)return-1;for(var e=0,a=0,x=n.length;a<x;a++){var o=n[a],u=n[a+1<x?a+1:0];if(f(t.x,o.x,r)&&f(t.y,o.y,r))return 1;var y={x:o.x-t.x,y:o.y-t.y},i={x:u.x-t.x,y:u.y-t.y},h=c(y,i);if(f(h,Math.PI,r)||f(h,-Math.PI,r))return 1;e+=h}return f(e,2*Math.PI,r)?0:2}(t,n,null==r?1e-6:r)},rotatePoint:function(t,n,r){return{x:(n.x-t.x)*Math.cos(r)-(n.y-t.y)*Math.sin(r)+t.x,y:(n.x-t.x)*Math.sin(r)+(n.y-t.y)*Math.cos(r)+t.y}},scalePoint:function(t,n,r){return 0==r?{x:t.x,y:t.y}:{x:(n.x-t.x)*r+t.x,y:(n.y-t.y)*r+t.y}},scalePointToLen:function(t,n,r){var e=Math.pow(n.x-t.x,2),a=Math.pow(n.y-t.y,2),x=Math.pow(e+a,.5);return 0==x?{x:t.x,y:t.y}:(x=r/x,{x:e=(n.x-t.x)*x+t.x,y:a=(n.y-t.y)*x+t.y})},version:"0.1.0"}},window);