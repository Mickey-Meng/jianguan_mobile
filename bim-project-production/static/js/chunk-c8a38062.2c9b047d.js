(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8a38062"],{1019:function(e,t,a){},"21f8":function(e,t,a){},"53ca":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},"53fe":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-head"},[e.left?t("div",{staticClass:"left-icon-container",on:{click:e.onClickLeft}},[t("van-icon",{staticClass:"center-both",attrs:{size:"40px",name:"arrow-left"}})],1):e._e(),t("span",{staticClass:"center-horizontal title"},[e._v(e._s(e.$route.query.title||e.$route.params.title||this.title))]),e.showIcon?t("div",{staticClass:"icon-container"},[t("van-icon",{attrs:{name:"plus"},on:{click:e.addClick}}),e.showSearch?t("van-icon",{attrs:{name:"filter-o"},on:{click:e.screenClick}}):e._e()],1):e._e()])},s=[],i={props:{title:{type:String},left:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1}},created:function(){},methods:{onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){},addClick:function(){this.$emit("fun")},screenClick:function(){this.$emit("screen")}}},o=i,r=(a("8349"),a("2877")),l=Object(r["a"])(o,n,s,!1,null,"09e78404",null);t["a"]=l.exports},"6be8":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"j",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return f})),a.d(t,"g",(function(){return p}));var n=a("2909"),s=(a("d3b7"),a("159b"),a("14d9"),a("b0c0"),a("e9c4"),function(e,t,a){var n=[];return t=t||"desc",a=a||"code",e.forEach((function(e){n.push({label:e[t],value:e[a]})})),n}),i=function(e){var t=e?new Date(e):new Date,a=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var s=t.getDate();s=s<10?"0"+s:s;var i=t.getHours();i=i<10?"0"+i:i;var o=t.getMinutes(),r=t.getSeconds();return o=o<10?"0"+o:o,r=r<10?"0"+r:r,a+"-"+n+"-"+s+"  "+i+":"+o+":"+r},o=function(e,t){t=t||0;var a=e?new Date(e):new Date;a=new Date(a.setDate(a.getDate()+t));var n=a.getFullYear(),s=a.getMonth()+1;s=s<10?"0"+s:s;var i=a.getDate();i=i<10?"0"+i:i;var o=a.getHours();o=o<10?"0"+o:o;var r=a.getMinutes(),l=a.getSeconds();return r=r<10?"0"+r:r,l=l<10?"0"+l:l,n+"-"+s+"-"+i},r=function(e){var t=e?new Date(e):new Date,a=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var s=t.getDate();s=s<10?"0"+s:s;var i=t.getHours();i=i<10?"0"+i:i;var o=t.getMinutes(),r=t.getSeconds();return o=o<10?"0"+o:o,r=r<10?"0"+r:r,a+"-"+n},l=function(){var e=window.location.hash.split("?")[1],t={};if(e)for(var a=e.split("&"),n=0;n<a.length;n++){var s=a[n].split("=");t[s[0]]=decodeURIComponent(s[1])}return t},c=function(e){var t="",a="";return e.forEach((function(e){"sgdw"==e["typecode"]&&(t+=e["name"]+"、"),"jldw"==e["typecode"]&&(a+=e["name"]+"、")})),{buildCompany:t,supervisionUnit:a}},d=function(e,t,a){var n=JSON.parse(JSON.stringify(e)),s=JSON.parse(JSON.stringify(t));a=a||[],n[0]&&a.forEach((function(e){delete n[0][e]})),s[0]&&a.forEach((function(e){delete s[0][e]}));var i=JSON.stringify(n)===JSON.stringify(s);return i},u=function(e,t){if(!e||!t)return"";var a=Date.parse(e),n=Date.parse(t);return a>n?0:a===n?1:parseInt((n-a)/864e5)},f=function(e,t){e=e||[];var a="";return e.forEach((function(e){e["value"]==t&&(a=e["label"])})),a},p=function e(t,a,s){s||(s=[]);for(var i=0;i<t.length;i++){var o=Object(n["a"])(s);if(o.push(t[i].name),t[i].id===a)return o;if(t[i].child){var r=e(t[i].child,a,o);if(r)return r}}}},"7c67":function(e,t,a){},8349:function(e,t,a){"use strict";a("b077")},9491:function(e,t,a){"use strict";var n=a("2b0e"),s=a("d4ec"),i=a("bee2"),o=a("262e"),r=a("2caf"),l=a("9072"),c=(a("d3b7"),a("159b"),a("14d9"),a("4ec9"),a("3ca3"),a("ddb0"),function(e){Object(o["a"])(a,e);var t=Object(r["a"])(a);function a(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"symbol";return Object(s["a"])(this,a),i=t.call(this),i.showName=e,i.setList(n,o,r),i}return Object(i["a"])(a,[{key:"setList",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"symbol";this.clear(),Array.isArray(e)&&e.forEach((function(e){t.set(e[a],e),null!=e[n]&&Object.defineProperty(t,e[n],{get:function(){return e[a]}})}))}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parentId",a=arguments.length>2?arguments[2]:void 0,n=[];return this.forEach((function(s,i){var o={id:i,name:"string"===typeof s?s:s[e],parentId:s[t]};("function"!==typeof a||a(o))&&n.push(o)})),n}},{key:"getValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return"boolean"===typeof e&&(e=e?1:0),(this.get(e)||{})[t]}}]),a}(Object(l["a"])(Map))),d=new c("用户状态",[{id:0,name:"正常状态",symbol:"NORMAL"},{id:1,name:"锁定状态",symbol:"LOCKED"}]);n["default"].prototype.SysUserStatus=d;var u=new c("用户类型",[{id:0,name:"管理员",symbol:"ADMIN"},{id:1,name:"系统操作员",symbol:"SYSTEM"},{id:2,name:"普通操作员",symbol:"OPERATOR"}]);n["default"].prototype.SysUserType=u;var f=new c("权限分组类型",[{id:0,name:"分组模块",symbol:"GROUP"},{id:1,name:"接口模块",symbol:"CONTROLLER"}]);n["default"].prototype.SysPermModuleType=f;var p=new c("权限字类型",[{id:0,name:"表单",symbol:"FORM"},{id:1,name:"片段",symbol:"FRAGMENT"},{id:2,name:"操作",symbol:"OPERATION"}]);n["default"].prototype.SysPermCodeType=p;var m=new c("菜单类型",[{id:0,name:"目录",symbol:"DIRECTORY"},{id:1,name:"表单",symbol:"MENU"},{id:2,name:"片段",symbol:"FRAGMENT"},{id:3,name:"按钮",symbol:"BUTTON"}]);n["default"].prototype.SysMenuType=m;var y=new c("菜单绑定类型",[{id:0,name:"路由菜单",symbol:"ROUTER"},{id:1,name:"在线表单",symbol:"ONLINE_FORM"},{id:2,name:"工单列表",symbol:"WORK_ORDER"}]);n["default"].prototype.SysMenuBindType=y;var b=new c("数据权限类型",[{id:0,name:"查看全部",symbol:"ALL"},{id:1,name:"仅看自己",symbol:"ONLY_USER"},{id:2,name:"仅看所在部门",symbol:"ONLY_DEPT"},{id:3,name:"仅看所在部门及子部门",symbol:"ONLY_DEPT_AND_CHILD"},{id:4,name:"自选部门及子部门",symbol:"CUSTOM_DEPT_AND_CHILD"},{id:5,name:"仅自选部门",symbol:"CUSTOM_DEPT"}]);n["default"].prototype.SysDataPermType=b;var h=new c("流程绑定表单类型",[{id:0,name:"动态表单",symbol:"ONLINE_FORM"},{id:1,name:"路由表单",symbol:"ROUTER_FORM"}]);n["default"].prototype.SysFlowEntryBindFormType=h;var v=new c("流程设计发布状态",[{id:0,name:"未发布",symbol:"UNPUBLISHED"},{id:1,name:"已发布",symbol:"PUBLISHED"}]);n["default"].prototype.SysFlowEntryPublishedStatus=v;var T=new c("流程设计步骤",[{id:0,name:"编辑基础信息",symbol:"BASIC"},{id:1,name:"流程变量设置",symbol:"PROCESS_VARIABLE"},{id:2,name:"设计流程",symbol:"PROCESS_DESIGN"}]);n["default"].prototype.SysFlowEntryStep=T;var S=new c("任务操作类型",[{id:"agree",name:"同意",symbol:"AGREE"},{id:"refuse",name:"拒绝",symbol:"REFUSE"},{id:"reject",name:"驳回",symbol:"REJECT"},{id:"rejectToStart",name:"驳回到起点",symbol:"REJECT_TO_START"},{id:"revoke",name:"撤销",symbol:"REVOKE"},{id:"transfer",name:"转办",symbol:"TRANSFER"},{id:"multi_consign",name:"加签",symbol:"CO_SIGN"},{id:"save",name:"保存",symbol:"SAVE"},{id:"stop",name:"终止",symbol:"STOP"},{id:"multi_sign",name:"会签",symbol:"MULTI_SIGN"},{id:"multi_agree",name:"同意（会签）",symbol:"MULTI_AGREE"},{id:"multi_refuse",name:"拒绝（会签）",symbol:"MULTI_REFUSE"},{id:"multi_abstain",name:"弃权（会签）",symbol:"MULTI_ABSTAIN"},{id:"set_assignee",name:"指定审批人",symbol:"SET_ASSIGNEE"}]);n["default"].prototype.SysFlowTaskOperationType=S;var g=new c("工作流任务类型",[{id:0,name:"其他任务",symbol:"OTHER_TASK"},{id:1,name:"用户任务",symbol:"USER_TASK"}]);n["default"].prototype.SysFlowTaskType=g;var k=new c("工作流变量类型",[{id:0,name:"流程变量",symbol:"INSTANCE"},{id:1,name:"任务变量",symbol:"TASK"}]);n["default"].prototype.SysFlowVariableType=k;var I=new c("工单状态",[{id:0,name:"已提交",symbol:"SUBMITED"},{id:1,name:"审批中",symbol:"APPROVING"},{id:2,name:"已拒绝",symbol:"REFUSED"},{id:3,name:"已完成",symbol:"FINISHED"},{id:4,name:"终止",symbol:"STOPPED"},{id:5,name:"撤销",symbol:"CANCEL"}]);n["default"].prototype.SysFlowWorkOrderStatus=I;var E=new c("抄送类型",[{id:"user",name:"抄送人",symbol:"USER"},{id:"dept",name:"抄送部门",symbol:"DEPT"},{id:"role",name:"抄送角色",symbol:"ROLE"},{id:"deptPostLeader",name:"审批人部门领导",symbol:"SELF_DEPT_LEADER"},{id:"upDeptPostLeader",name:"审批人上级部门领导",symbol:"UP_DEPT_LEADER"},{id:"allDeptPost",name:"抄送岗位",symbol:"POST"},{id:"selfDeptPost",name:"审批人部门岗位",symbol:"SELF_DEPT_POST"},{id:"upDeptPost",name:"审批人上级部门岗位",symbol:"UP_DEPT_POST"},{id:"deptPost",name:"指定部门岗位",symbol:"DEPT_POST"}]);n["default"].prototype.SysFlowCopyForType=E},a38e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("53ca");a("8172"),a("efec"),a("a4d3"),a("e01a"),a("d3b7"),a("d9e2"),a("a9e3");function s(e,t){if("object"!==Object(n["a"])(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!==Object(n["a"])(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function i(e){var t=s(e,"string");return"symbol"===Object(n["a"])(t)?t:String(t)}},a7ef:function(e,t,a){"use strict";a("7c67")},ac2b:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"handle-bg"},[t("el-form",{ref:"ruleform",attrs:{"label-width":"80px",rules:e.rules,model:e.formData}},[t("div",{staticClass:"form-block"},[t("div",{staticClass:"form-block-title"},[t("div",{staticClass:"title-bar"}),t("strong",[e._v("审核")])]),t("div",{staticClass:"block-line"},[t("div",{staticClass:"block-item"},[t("div",{staticClass:"block-item-label"},[e._v("审批意见")]),t("div",{staticClass:"block-item-value"},[t("el-form-item",{attrs:{prop:"comment"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审批意见"},model:{value:e.formData.comment,callback:function(t){e.$set(e.formData,"comment",t)},expression:"formData.comment"}})],1)],1)])]),e.copyUserVisible?t("div",{staticClass:"block-line"},[t("div",{staticClass:"block-item"},[t("div",{staticClass:"block-item-label"},[e._v("抄送")]),t("div",{staticClass:"block-item-value"},[t("el-form-item",{attrs:{prop:"qualityCheckUser"}},[t("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.auditUser,callback:function(t){e.auditUser=t},expression:"auditUser"}},e._l(e.userOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.username}})})),1)],1)],1)])]):e._e()]),t("div",{staticClass:"form-block",staticStyle:{"text-align":"center"}},e._l(e.flowOperationList,(function(a,n){return t("el-button",{key:n,attrs:{size:"small",type:e.getButtonType(a.type)||"primary",plain:a.plain||!1},on:{click:function(t){return e.handlerOperation(a)}}},[e._v("     "+e._s(a.label)+"      ")])})),1)])],1)},s=[],i=a("5530"),o=(a("d81d"),a("4de4"),a("d3b7"),a("a15b"),a("9491"),a("015e")),r={props:["taskInfo"],data:function(){return{formData:{approvalType:"agree",comment:"",delegateAssginee:""},rules:{comment:[{required:!0,message:"请填写审批意见",trigger:"blur"}]},operationList:[],userOptions:[],auditUser:[],copyUserVisible:!1}},created:function(){},computed:{flowOperationList:function(){var e=this;return Array.isArray(this.operationList)?this.operationList.map((function(t){if(t.type===e.SysFlowTaskOperationType.MULTI_SIGN&&null!=t.multiSignAssignee){var a=Object(i["a"])({},t.multiSignAssignee);return a.assigneeList=t.multiSignAssignee.assigneeList?a.assigneeList.split(","):void 0,Object(i["a"])(Object(i["a"])({},t),{},{multiSignAssignee:a})}return Object(i["a"])({},t)})):[]}},mounted:function(){},methods:{initData:function(){var e=this;this.getCopyUserByFlowKey(),o["Mb"]({processDefinitionId:this.taskInfo["processDefinitionId"],processInstanceId:this.taskInfo["processInstanceId"],taskId:this.taskInfo["taskId"]}).then((function(t){e.operationList=(t.data.operationList||[]).filter((function(t){return t.type!==e.SysFlowTaskOperationType.CO_SIGN&&t.type!==e.SysFlowTaskOperationType.REVOKE}))}))},getCopyUserByFlowKey:function(){var e=this;o["N"]({entryKey:this.taskInfo["entryKey"],flowKey:this.taskInfo["flowKey"],buildSection:this.$store.getters.currentBiaoDuan.id||3,projectId:this.$store.getters.curProject.id||2}).then((function(t){var a=t.data||{};e.userOptions=a.copyUserInfo||[],e.copyUserVisible=!!e.userOptions.length,e.$forceUpdate()}))},agreeTask:function(){o["Jb"]({copyData:{},flowTaskCommentDto:this.formData,masterData:{},processInstanceId:this.taskInfo.processInstanceId,slaveData:{},taskId:this.taskInfo.taskId,taskVariableData:{}}).then((function(e){}))},transferTask:function(){},rejectTask:function(){},getButtonType:function(e){switch(e){case this.SysFlowTaskOperationType.AGREE:case this.SysFlowTaskOperationType.TRANSFER:case this.SysFlowTaskOperationType.CO_SIGN:case this.SysFlowTaskOperationType.MULTI_AGREE:case this.SysFlowTaskOperationType.MULTI_SIGN:case this.SysFlowTaskOperationType.SET_ASSIGNEE:return"primary";case this.SysFlowTaskOperationType.SAVE:return"success";case this.SysFlowTaskOperationType.REFUSE:case this.SysFlowTaskOperationType.PARALLEL_REFUSE:case this.SysFlowTaskOperationType.MULTI_REFUSE:return"default";case this.SysFlowTaskOperationType.REJECT:case this.SysFlowTaskOperationType.REJECT_TO_START:case this.SysFlowTaskOperationType.REVOKE:return"danger";default:return"default"}},getOperationTagType:function(e){switch(e){case this.SysFlowTaskOperationType.AGREE:case this.SysFlowTaskOperationType.MULTI_AGREE:case this.SysFlowTaskOperationType.SET_ASSIGNEE:return"success";case this.SysFlowTaskOperationType.REFUSE:case this.SysFlowTaskOperationType.PARALLEL_REFUSE:case this.SysFlowTaskOperationType.MULTI_REFUSE:return"warning";case this.SysFlowTaskOperationType.STOP:case this.SysFlowTaskOperationType.REJECT:case this.SysFlowTaskOperationType.REJECT_TO_START:case this.SysFlowTaskOperationType.REVOKE:return"danger";default:return"primary"}},handlerOperation:function(e){var t=this;if(this.formData.approvalType=e.type,e.type!==this.SysFlowTaskOperationType.REJECT)if(e.type!==this.SysFlowTaskOperationType.REJECT_TO_START)if(e.type!==this.SysFlowTaskOperationType.REVOKE){var a={};this.auditUser.length&&(a={user:this.auditUser.join(",")}),o["Jb"]({copyData:a,flowTaskCommentDto:this.formData,masterData:{},processInstanceId:this.taskInfo.processInstanceId,slaveData:{},taskId:this.taskInfo.taskId,taskVariableData:{}}).then((function(e){t.handlerClose(),t.$message.success("提交成功！")})).catch((function(e){}))}else this.$confirm("是否撤销此任务？").then((function(e){o["revokeHistoricTask"]({pprocessInstanceId:t.taskInfo.processInstanceId,taskId:t.taskInfo.taskId,comment:"任务处理人撤销任务"}).then((function(e){t.handlerClose()})).catch((function(e){}))})).catch((function(e){}));else o["rejectToStartUserTask"]({processInstanceId:this.taskInfo.processInstanceId,taskId:this.taskInfo.taskId,comment:this.formData.comment}).then((function(e){t.handlerClose()})).catch((function(e){}));else o["Gb"]({processInstanceId:this.taskInfo.processInstanceId,taskId:this.taskInfo.taskId,comment:this.formData.comment}).then((function(e){t.handlerClose()})).catch((function(e){}))},handlerClose:function(){this.$router.go(-1)}}},l=r,c=(a("a7ef"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"1507a1d3",null);t["a"]=d.exports},ade3:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("a38e");function s(e,t,a){return t=Object(n["a"])(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},b077:function(e,t,a){},b8ba:function(e,t,a){"use strict";a("21f8")},c15c:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"log-btns"},[t("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.createFlow}},[e._v("流程图")])],1),t("div",{staticClass:"log-content"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"审批记录",name:"first"}},[t("el-table",{staticClass:"have_scrolling",staticStyle:{width:"100%"},attrs:{data:e.logData,border:""}},[t("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),t("el-table-column",{attrs:{prop:"taskName",align:"center",label:"流程环节"}}),t("el-table-column",{attrs:{prop:"createName",align:"center",label:"执行人"}}),t("el-table-column",{attrs:{prop:"approvalType",align:"center",label:"操作"}}),t("el-table-column",{attrs:{prop:"comment",align:"center",label:"审批意见","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createTime",align:"center",label:"处理时间","show-overflow-tooltip":""}})],1)],1),e.hasTaskUser?t("el-tab-pane",{attrs:{label:"审批人",name:"second"}},[t("el-table",{staticClass:"have_scrolling",staticStyle:{width:"100%"},attrs:{data:e.userData,border:""}},[t("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),t("el-table-column",{attrs:{prop:"loginName",align:"center",label:"审批人"}}),t("el-table-column",{attrs:{prop:"showName",align:"center",label:"昵称"}}),t("el-table-column",{attrs:{prop:"lastApprovalTime",align:"center",label:"处理时间"}})],1)],1):e._e()],1)],1),t("el-drawer",{attrs:{title:"我是标题",visible:e.dialogVisible,"with-header":!1,size:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"container"}})])],1)},s=[],i=(a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("b0c0"),a("7024")),o=a("015e"),r={props:["taskInfo"],data:function(){return{dialogVisible:!1,logData:[],activeName:"first",userData:[],bpmnModeler:null,xmlStr:"",runVariables:{},hasTaskUser:!1,processNodeInfo:{}}},created:function(){},components:{},computed:{},mounted:function(){},methods:{initData:function(){var e=this;o["Lb"]({processDefinitionId:this.taskInfo["processDefinitionId"]}).then((function(t){e.xmlStr=t["data"]})),o["pb"]({processInstanceId:this.taskInfo["processInstanceId"],flowKey:this.taskInfo["flowKey"],buildSection:this.$store.getters.currentBiaoDuan.id||3,projectId:this.$store.getters.curProject.id||2}).then((function(t){e.runVariables=t["data"]})),o["Kb"]({processInstanceId:this.taskInfo["processInstanceId"]}).then((function(t){e.processNodeInfo=t.data})),o["Cb"]({processInstanceId:this.taskInfo["processInstanceId"]}).then((function(t){for(var a=0;a<t.data.length;a++){var n=t.data[a];n.comment=void 0===n.comment?"发起":n.comment}e.logData=t["data"]||[]}))},createFlow:function(){var e=this;e.dialogVisible=!0,setTimeout((function(){var t=document.getElementById("container");e.bpmnModeler&&e.bpmnModeler.destroy(),e.bpmnModeler=new i["a"]({container:t,additionalModules:[{paletteProvider:["value",""],labelEditingProvider:["value",""],contextPadProvider:["value",""]}]}),e.bpmnModeler.importXML(e.xmlStr,(function(t){if(!t){var a=e.bpmnModeler.get("canvas");a.zoom("fit-viewport");var n=e.processNodeInfo,s=n.finishedTaskSet,i=n.unfinishedTaskSet,o=e.bpmnModeler.get("elementRegistry"),r=o.filter((function(e){return s.indexOf(e.id)>-1&&i.indexOf(e.id)<0})),l=o.filter((function(e){return"bpmn:UserTask"===e.type})),c=e.bpmnModeler.get("modeling");r.forEach((function(e){c.setColor(e,{stroke:"green",fill:"rgb(197 255 197)"})})),l.forEach((function(t){var a=t.businessObject.$attrs["flowable:assignee"].replace("${","").replace("}","");"assignee"==a&&(a+="List"),"startUserName"!=a||e.runVariables[a+"Str"]||(a="initiator"),c.updateLabel(t,t.businessObject.name+"\n"+(e.runVariables[a+"Str"]&&e.runVariables[a+"Str"].length>0?e.runVariables[a+"Str"]:"无"))}))}}))}),200)},setProcessStatus:function(e){this.processNodeInfo=e;var t=this.processNodeInfo,a=t.finishedSequenceFlowSet,n=t.finishedTaskSet,s=t.unfinishedTaskSet,i=this.bpmnModeler.get("canvas"),o=this.bpmnModeler.get("elementRegistry");Array.isArray(a)&&a.forEach((function(e){if(null!=e){i.addMarker(e,"success");var t=o.get(e),a=t.businessObject.conditionExpression;a&&i.addMarker(e,"condition-expression")}})),Array.isArray(n)&&n.forEach((function(e){i.addMarker(e,"success")})),Array.isArray(s)&&s.forEach((function(e){i.addMarker(e,"current")}))}}},l=r,c=(a("ef1a0"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"3a5f81fe",null);t["a"]=d.exports},ef1a0:function(e,t,a){"use strict";a("1019")},fda5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process"},[t("common-head",{ref:"head",attrs:{title:e.$route.meta.title}}),t("div",{staticClass:"full-dialog defined-dialog"},[t("template",{slot:"title"},[e._v(" "+e._s(e.dialogTitle)+" "),t("div",{staticClass:"logo-icon"})]),t("div",{staticStyle:{"background-color":"rgba(0, 0 0, 0.5)",height:"calc(100vh - 96px)","overflow-y":"scroll",padding:"0px",margin:"0"}},[t("div",[t("div",{staticClass:"form-bg"},[t("div",{staticClass:"form-content"},[t("router-view",{ref:"routerview",attrs:{detailRow:e.detailRow}})],1)]),e.isHandleVisible?t("taskhandle",{ref:"taskhandle",attrs:{taskInfo:e.taskInfo}}):e._e()],1),t("strong",{staticStyle:{"font-size":"16px","font-family":"'Microsoft YaHei'"}},[e._v("流程日志")]),t("div",[e.isInfoVisible?t("tasklog",{ref:"tasklog",attrs:{taskInfo:e.taskInfo}}):e._e()],1)])],2)],1)},s=[],i=a("53fe"),o=(a("015e"),a("6be8")),r=a("c15c"),l=a("ac2b"),c={components:{CommonHead:i["a"],taskhandle:l["a"],tasklog:r["a"]},data:function(){return{isLoading:!1,isRouterAlive:!0,dialogFormVisible:!0,dialogTitle:"项目全生命周期数字管理平台",menuTitle:"流程审批",detailRow:{},taskInfo:{},isUnEdit:!1,isHandleVisible:!1,isInfoVisible:!1}},computed:{scrollerHeight:function(){return window.innerHeight-81+"px"}},methods:{onRefresh:function(){var e=this;setTimeout((function(){e.isLoading=!1,e.reload()}),1e3)},reload:function(){var e=this;this.isRouterAlive=!1,this.$nextTick((function(){e.isRouterAlive=!0}))},updateView:function(){var e=this;setTimeout((function(){e.$refs["routerview"].getDetail(e.detailRow["id"])}),2e3)},updateTaskHandle:function(){var e=this;setTimeout((function(){e.$refs["taskhandle"]&&e.$refs["taskhandle"].initData()}),100)},updateTaskLog:function(){var e=this;setTimeout((function(){e.$refs["tasklog"].initData()}),100)},closeDialog:function(){this.$router.go(-1)}},mounted:function(){var e=Object(o["j"])();e["businessKey"]?(this.detailRow={id:e["businessKey"]},this.updateView(),e["processDefinitionId"]?(this.taskInfo={processDefinitionId:e["processDefinitionId"],processInstanceId:e["processInstanceId"],taskId:e["taskId"],flowKey:e["processDefinitionKey"],entryKey:e["taskKey"]},e["taskId"]&&(this.isHandleVisible=!0,this.isUnEdit=!0,this.updateTaskHandle()),this.updateTaskLog(),this.isInfoVisible=!0):this.isUnEdit=!1):this.isUnEdit=!1,"true"===e["isHiddenEdit"]&&(this.isUnEdit=!1)}},d=c,u=(a("b8ba"),a("2877")),f=Object(u["a"])(d,n,s,!1,null,"37c7dbf9",null);t["default"]=f.exports}}]);