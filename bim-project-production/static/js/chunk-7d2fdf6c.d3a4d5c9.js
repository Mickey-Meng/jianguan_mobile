(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d2fdf6c"],{"06c5":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("fb6a"),i("d3b7"),i("b0c0"),i("a630"),i("3ca3"),i("ac1f"),i("00b4");var a=i("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a["a"])(t,e):void 0}}},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var a=i("6b75");function s(t){if(Array.isArray(t))return Object(a["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var n=i("06c5");i("d9e2");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return s(t)||l(t)||Object(n["a"])(t)||r()}},"505b":function(t,e,i){},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("14d9"),i("159b"),i("dbb4");var a=i("ade3");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"5ac8":function(t,e,i){"use strict";i("a200")},"6a4e":function(t,e,i){"use strict";i("505b")},"6b75":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},"6be8":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"e",(function(){return l})),i.d(e,"d",(function(){return n})),i.d(e,"f",(function(){return r})),i.d(e,"j",(function(){return c})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return d})),i.d(e,"h",(function(){return u})),i.d(e,"i",(function(){return b})),i.d(e,"g",(function(){return f}));var a=i("2909"),s=(i("d3b7"),i("159b"),i("14d9"),i("b0c0"),i("e9c4"),function(t,e,i){var a=[];return e=e||"desc",i=i||"code",t.forEach((function(t){a.push({label:t[e],value:t[i]})})),a}),l=function(t){var e=t?new Date(t):new Date,i=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var s=e.getDate();s=s<10?"0"+s:s;var l=e.getHours();l=l<10?"0"+l:l;var n=e.getMinutes(),r=e.getSeconds();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,i+"-"+a+"-"+s+"  "+l+":"+n+":"+r},n=function(t,e){e=e||0;var i=t?new Date(t):new Date;i=new Date(i.setDate(i.getDate()+e));var a=i.getFullYear(),s=i.getMonth()+1;s=s<10?"0"+s:s;var l=i.getDate();l=l<10?"0"+l:l;var n=i.getHours();n=n<10?"0"+n:n;var r=i.getMinutes(),c=i.getSeconds();return r=r<10?"0"+r:r,c=c<10?"0"+c:c,a+"-"+s+"-"+l},r=function(t){var e=t?new Date(t):new Date,i=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var s=e.getDate();s=s<10?"0"+s:s;var l=e.getHours();l=l<10?"0"+l:l;var n=e.getMinutes(),r=e.getSeconds();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,i+"-"+a},c=function(){var t=window.location.hash.split("?")[1],e={};if(t)for(var i=t.split("&"),a=0;a<i.length;a++){var s=i[a].split("=");e[s[0]]=decodeURIComponent(s[1])}return e},o=function(t){var e="",i="";return t.forEach((function(t){"sgdw"==t["typecode"]&&(e+=t["name"]+"、"),"jldw"==t["typecode"]&&(i+=t["name"]+"、")})),{buildCompany:e,supervisionUnit:i}},d=function(t,e,i){var a=JSON.parse(JSON.stringify(t)),s=JSON.parse(JSON.stringify(e));i=i||[],a[0]&&i.forEach((function(t){delete a[0][t]})),s[0]&&i.forEach((function(t){delete s[0][t]}));var l=JSON.stringify(a)===JSON.stringify(s);return l},u=function(t,e){if(!t||!e)return"";var i=Date.parse(t),a=Date.parse(e);return i>a?0:i===a?1:parseInt((a-i)/864e5)},b=function(t,e){t=t||[];var i="";return t.forEach((function(t){t["value"]==e&&(i=t["label"])})),i},f=function t(e,i,s){s||(s=[]);for(var l=0;l<e.length;l++){var n=Object(a["a"])(s);if(n.push(e[l].name),e[l].id===i)return n;if(e[l].child){var r=t(e[l].child,i,n);if(r)return r}}}},7038:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[t.editAble?e("div",{staticClass:"block-line"},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",limit:1,"show-file-list":!1,accept:t.accept,"http-request":t.importFile}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1):t._e(),e("div",{staticClass:"block-table",staticStyle:{background:"rgba(0,0,0,0)"}},[e("el-table",{staticClass:"have_scrolling",staticStyle:{width:"100%"},attrs:{data:t.attachTable,border:""}},[e("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e("el-table-column",{attrs:{prop:"fileName",align:"center",label:"附件","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"uploadTime",width:"160px",align:"center",label:"上传日期"}}),e("el-table-column",{attrs:{prop:"creatorName",width:"120px",align:"center",label:"上传人"}}),e("el-table-column",{attrs:{width:"120",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row,s=i.$index;return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.reviewAttach(a,s)}}},[t._v("预览")]),t.editAble?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.deleteAttach(a,s)}}},[t._v("删除")]):t._e()]}}])})],1)],1),e("PdfPreview",{directives:[{name:"show",rawName:"v-show",value:"pdf"==t.viewFileType,expression:"viewFileType=='pdf'"}],ref:"pdfPreview"}),e("el-dialog",{attrs:{title:"预览",visible:t.viewFileVisible,fullscreen:!0,width:"100%",height:"100%",modal:!1},on:{"update:visible":function(e){t.viewFileVisible=e}}},[e("img",{directives:[{name:"show",rawName:"v-show",value:"img"==t.viewFileType,expression:"viewFileType=='img'"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:t.viewFileUrl}}),e("video",{directives:[{name:"show",rawName:"v-show",value:"mp4"==t.viewFileType,expression:"viewFileType=='mp4'"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:t.viewFileUrl,controls:""}}),e("video",{directives:[{name:"show",rawName:"v-show",value:"mov"==t.viewFileType,expression:"viewFileType=='mov'"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:t.viewFileUrl,controls:""}})])],1)},s=[],l=i("5530"),n=(i("a434"),i("14d9"),i("b0c0"),i("2f62")),r=i("015e"),c=i("24d2"),o=i("ed08"),d=i("6be8"),u=i("5c96"),b=i("a79c"),f={props:["attachTable","editAble","acceptList"],components:{PdfPreview:b["a"]},data:function(){return{viewFileType:"",viewFileUrl:"",viewFileVisible:!1,accept:this.acceptList||"image/*|video/*"}},computed:Object(l["a"])({},Object(n["b"])(["userInfo","name","project","roleId","getUrl"])),methods:{downloadAttach:function(t,e){r["downloadFile"]({fileid:t["fileId"]})},reviewAttach:function(t,e){var i=this,a="";(t.fileName.indexOf(".png")>-1||t.fileName.indexOf(".jpg")>-1)&&(a="img"),t.fileName.indexOf(".mp4")>-1&&(a="mp4"),(t.fileName.indexOf(".mov")>-1||t.fileName.indexOf(".MOV")>-1)&&(a="mov"),t.fileName.indexOf(".pdf")>-1&&(a="pdf"),this.viewFileType=a,this.viewFileUrl=Object(o["g"])(t.fileId),"pdf"==a?setTimeout((function(){i.$refs["pdfPreview"].show_otherPDF(t.fileId)}),300):this.viewFileVisible=!0},deleteAttach:function(t,e){var i=this;u["MessageBox"].confirm("确认是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.attachTable.splice(e,1)}))},afterUp:function(t){this.attachTable.push({uploadTime:Object(d["e"])(t["uploadTime"]),fileName:t["fileName"],fileId:t["fileId"],creatorName:this.$store.state.userinfo.name})},importFile:function(t){var e=this,i=new FileReader;i.readAsDataURL(t.file),i.onload=function(i){var a=i.target["result"].split("base64,")[1];Object(c["tb"])({name:t.file.name,base64:a}).then((function(i){e.$refs.upload.clearFiles();var a=Object(d["e"])(new Date),s=t.file.name,l=i;e.afterUp({uploadTime:a,fileName:s,fileId:l})}))}}}},v=f,m=(i("5ac8"),i("2877")),p=Object(m["a"])(v,a,s,!1,null,null,null);e["a"]=p.exports},a200:function(t,e,i){},ab6a:function(t,e,i){},aba5:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-block"},[e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("项目名称")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.baseInfo.projectName)+" ")])])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("合同号")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.baseInfo.contractCode)+" ")])])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("施工单位")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.baseInfo.buildCompany)+" ")])])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("监理单位")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.baseInfo.supervisionUnit)+" ")])])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("标段")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.baseInfo.buildSectionName)+" ")])])])])},s=[],l=i("5530"),n=(i("b0c0"),i("2f62")),r=i("24d2"),c=i("6be8"),o={props:["hasSection"],data:function(){return{baseInfo:{projectName:"",buildSectionName:"",contractCode:"",buildCompany:"",supervisionUnit:""},hasBuildSection:void 0!=this.hasSection&&this.hasSection}},computed:Object(l["a"])({},Object(n["b"])(["userInfo","name","project","roleId","getUrl","currentBiaoDuan","curProject"])),mounted:function(){this.getProjectInfoById()},methods:{getProjectInfoById:function(){var t=this;this.baseInfo.buildSectionName=this.currentBiaoDuan.name,this.baseInfo.contractCode=this.currentBiaoDuan.contractnum,r["S"]({projectid:this.curProject.id||2}).then((function(e){var i=e||{};t.baseInfo["projectName"]=i["project"]?i["project"]["name"]:"";var a=i["companys"]||[],s=Object(c["b"])(a);t.baseInfo["buildCompany"]=s["buildCompany"],t.baseInfo["supervisionUnit"]=s["supervisionUnit"]}))}}},d=o,u=(i("6a4e"),i("2877")),b=Object(u["a"])(d,a,s,!1,null,"077e8938",null);e["a"]=b.exports},e6a6:function(t,e,i){"use strict";i("ab6a")},f160:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"form-content"},[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("div",{staticClass:"form-title"},[e("div",{staticClass:"title-big-bar"}),e("strong",[t._v("施工方案-浙公路（JL）011")])]),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("基本信息")])]),e("projectinfo")],1),e("div",{staticClass:"form-block"},[e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("工程编号")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.formData.projectCode)+" ")])])])]),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("专项施工方案附件清单")])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("专项施工方案名称")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.formData.buildPlanName)+" ")])])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("附件清单")]),e("div",{staticClass:"block-item-value"},[t._v(" "+t._s(t.formData.attachmentList)+" ")])])])]),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("专项施工方案附件清单")])]),e("attachlist",{ref:"attachlist",attrs:{editAble:!1,attachTable:t.buildPlanAttachTable}})],1),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("专家论证会议纪要附件清单")])]),e("attachlist",{ref:"attachlist",attrs:{editAble:!1,attachTable:t.expertMeetingAttachTable}})],1),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("专家论证情况描述")])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("是否需要专家论证")]),e("div",{staticClass:"block-item-value"},[e("el-switch",{staticStyle:{display:"block"},attrs:{disabled:"","active-value":0,"inactive-value":1,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:t.formData.expertArgument,callback:function(e){t.$set(t.formData,"expertArgument",e)},expression:"formData.expertArgument"}})],1)])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("专家论证意见")]),e("div",{staticClass:"block-item-value"},[e("el-input",{attrs:{type:"textarea",rows:4,disabled:""},model:{value:t.formData.expertOpinion,callback:function(e){t.$set(t.formData,"expertOpinion",e)},expression:"formData.expertOpinion"}})],1)])]),e("div",{staticClass:"block-line"},[e("div",{staticClass:"block-item"},[e("div",{staticClass:"block-item-label"},[t._v("专家论证意见的落实情况")]),e("div",{staticClass:"block-item-value"},[e("el-input",{attrs:{type:"textarea",rows:4,disabled:""},model:{value:t.formData.expertOpinionImplement,callback:function(e){t.$set(t.formData,"expertOpinionImplement",e)},expression:"formData.expertOpinionImplement"}})],1)])])]),e("div",{staticClass:"form-block"},[e("div",{staticClass:"form-block-title"},[e("div",{staticClass:"title-bar"}),e("strong",[t._v("整改回复")])]),e("attachlist",{ref:"attachlist",attrs:{editAble:!1,attachTable:t.replyAttachTable}})],1)])],1)])},s=[],l=i("015e"),n=i("6be8"),r=i("7038"),c=i("aba5"),o={props:["detailRow"],data:function(){return{baseInfo:{buildSection:1,buildSectionName:"235国道杭州至诸暨公路萧山河上至诸暨安华段改建工程",contractCode:"235SJSG01",buildCompany:"中交上海航道局有限公司、中国交通建设股份有限公司、浙江诸安建设集团有限公司、浙江省交通规划设计研究院有限公司",supervisionUnit:"浙江交科公路水运工程监理有限公司"},formData:{buildPlanName:"",attachmentList:"",expertArgument:0,attachment:[],buildCheckselfResult:"",deletedFlag:1,draftFlag:1,hiddenProject:"",projectBuildUser:1,projectChargeUser:1,projectCode:"",buildSection:this.$store.getters.currentBiaoDuan.id||3,projectId:this.$store.getters.curProject.id||2,qualityCheckUser:1,subProject:"",supervisorEngineerUser:1,supervisorUser:1,unit:""},attachTable:[],buildPlanAttachTable:[],expertMeetingAttachTable:[],replyAttachTable:[]}},created:function(){},components:{attachlist:r["a"],projectinfo:c["a"]},computed:{},mounted:function(){var t=this;setTimeout((function(){var e=Object(n["j"])();e["processDefinitionId"]&&(t.dialogFormVisible=!0,e["id"]=e["businessKey"],t.taskInfo=e,t.getDetail(e["businessKey"]))}),500)},watch:{detailRow:function(t){t["id"]&&this.getDetail(t["id"])}},methods:{getDetail:function(t){var e=this;l["C"]({id:t}).then((function(t){var i=t["data"]||{};e.formData=i,e.buildPlanAttachTable=i.buildPlanAttachment||[],e.expertMeetingAttachTable=i.expertMeetingAttachment||[],e.replyAttachTable=i.replyAttachment||[],e.attachTable=i.attachment||[]}))}}},d=o,u=(i("e6a6"),i("2877")),b=Object(u["a"])(d,a,s,!1,null,"2790886c",null);e["default"]=b.exports}}]);